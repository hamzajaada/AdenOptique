"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1986],{46988:function(e,t,a){a.d(t,{E:function(){return i.ER},T:function(){return l}});var i=a(96660),n=a(48228),r=a(84728),o=a(1392);let l=()=>{let e=(0,r.PY)();return(0,n.D)(t=>(0,o.t)({...e,QuizExtendedData:t}))}},96660:function(e,t,a){a.d(t,{ER:function(){return h},K4:function(){return p},g5:function(){return u}});var i=a(36492),n=a(11163),r=a(87394),o=a(44415),l=a(77050),s=a(84728),d=a(37859),c=a(1392);let u=e=>(0,d.tO)({url:"/v1/quizzes",params:e}),p=(e,t)=>{let a=(0,s.PY)(),n={quizType:e,...a};return(0,i.a)(u({quizType:e}),()=>(0,c.d)(n),t)},h=()=>{let{wizardId:e,kind:t,values:a}=(0,r.Q)(),{trackEvent:i,postToAnalyticsService:d}=(0,o.r)(),u=(0,s.PY)(),p=(0,n.useRouter)(),{email:h,emailChecked:v,...g}=a;return g.app=["web"],p.query.orders&&(g.orderIDs=Array.isArray(p.query.orders)?p.query.orders:[p.query.orders]),async()=>{let a=Object.entries(g).reduce((e,t)=>{let[a,i]=t;return e.push({question:a,answers:i}),e},[]),n={quiz:{type:null==e?void 0:e.replace(/^\/+/,""),responses:a},email:null==h?void 0:h[0],referer:window.location.origin};i({category:"".concat(t,"-Results"),action:l.ld.Submit,label:Object.entries(g).map(e=>{let[t,a]=e;return"".concat(t,"=").concat(a.join(","))}).join("&")}),d({type:"quiz-close",quizType:e,quizStep:l.ld.Submit}),await(0,c.t)({...u,QuizExtendedData:n})}}},1392:function(e,t,a){a.d(t,{d:function(){return l},t:function(){return s}});var i=a(64487),n=a(33424),r=a(74050);let o=new n.x(r.i),l=async e=>{try{return await o.quizzesGetQuiz(e)}catch(e){throw e instanceof Error&&i.Tb("error while getting quiz results",{contexts:{error:{message:e.message,stack:e.stack}}}),e}},s=async e=>{try{await o.quizzesAddQuiz(e)}catch(e){throw e instanceof Error&&i.Tb("error while saving quiz results",{contexts:{error:{message:e.message,stack:e.stack}}}),e}}},40775:function(e,t,a){a.d(t,{T:function(){return i.TP}});var i=a(78553)},78553:function(e,t,a){a.d(t,{$n:function(){return n},md:function(){return p},TP:function(){return u}});var i,n,r=a(36492),o=a(18372),l=a(74050);let s=new o.R(l.i);var d=a(37859),c=a(84728);(i=n||(n={})).Retail="Retail",i.Supplier="Supplier",i.Lab="Lab",i.ShowroomPlus="Showroom Plus",i.ThreePL="3PL",i.Showroom="Showroom",i.PopUp="Pop-Up",i.Transit="Transit",i.Virtual="Virtual";let u=(e,t)=>{let a=(0,c.PY)();return(0,r.a)((0,d.tO)({url:"/v1/retail/search",params:e}),()=>s.retailSearch({...a,...e}),t)},p=(e,t)=>{let a=(0,c.PY)();return(0,r.a)((0,d.tO)({url:"/v1/retail/".concat(e.storeId),params:e}),()=>s.retailGet({...a,...e}),t)}},21530:function(e,t,a){a.d(t,{M:function(){return i.M}});var i=a(38096)},90986:function(e,t,a){a.d(t,{f:function(){return k},v:function(){return n}});var i,n,r=a(85893),o=a(30120),l=a(67294),s=a(24556),d=a(75567),c=a(77454),u=a(157);(i=n||(n={})).Unavailable="Unavailable",i.Strikethrough="Strikethrough",i.Available="Available";let p=(0,d.zo)("button",{...u.c.uibutton200,position:"relative",border:"none",width:"34px",height:"34px",margin:"$1",display:"inline-flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap",borderRadius:"50%",background:"transparent",color:"$grayscaleCharcoal",transition:"all $productiveP2S","&:hover:not([disabled])":{background:"$grayscaleIce"},"&:focus-visible":{_buttonFocusOutline:"$coreBluesBlue",background:"$grayscaleIce"},variants:{selected:{true:{background:"$coreBluesBlue",color:"$grayscaleWhite","&:hover:not([disabled]), &:focus-visible, &:focus-visible:hover:not([disabled])":{background:"$coreBluesDenim"}}},isToday:{true:{border:"1px solid $colors$coreBluesBlue"}},isAvailable:{[n.Available]:{},[n.Unavailable]:{color:"$grayscaleSmoke"},[n.Strikethrough]:{textDecorationLine:"line-through",color:"$grayscaleSmoke"}}}}),h=e=>{let{date:t,selected:a,isAvailable:i,isToday:l,onClick:s}=e;return(0,r.jsx)(p,{type:"button",role:"gridcell","aria-label":t.toLocaleString(o.ou.DATE_FULL),"aria-selected":a,selected:a,isToday:l,isAvailable:i,disabled:i!==n.Available,onClick:()=>s(t),children:t.day})},v=[{name:"Sunday",label:"Su"},{name:"Monday",label:"Mo"},{name:"Tuesday",label:"Tu"},{name:"Wednesday",label:"We"},{name:"Thursday",label:"Th"},{name:"Friday",label:"Fr"},{name:"Saturday",label:"Sa"}],g=(0,d.zo)("div",{...u.c.uibutton200,display:"grid",gap:"5.5px",gridTemplateColumns:"repeat(7, 1fr)",placeItems:"center",color:"$grayscaleSmoke"}),m=(0,d.zo)("div",{padding:"10px"}),x=()=>(0,r.jsx)(g,{role:"row",children:v.map(e=>{let{name:t,label:a}=e;return(0,r.jsx)(m,{role:"columnheader","aria-label":t,children:a},a)})});var f=a(2658),y=a.n(f);let b=(e,t,a)=>{var i;let r=o.ou.local(),l=o.ou.local(t,e,1);return y()([...7!==l.weekday?Array(l.weekday):[],...Array.from({length:null!==(i=l.daysInMonth)&&void 0!==i?i:0}).map((i,l)=>{let s=o.ou.local(t,e,l+1);return{date:s,isAvailable:a?a(s):n.Available,isToday:r.year===s.year&&r.month===s.month&&r.day===s.day}})],7)},j=(0,d.zo)("div",{display:"flex",flexDirection:"column",gap:"$3",width:"100%",minWidth:"327px",userSelect:"none"}),w=(0,d.zo)("div",{color:"$grayscaleCharcoal"}),S=(0,d.zo)("div",{}),$=(0,d.zo)("div",{display:"flex",flexDirection:"column"}),C=(0,d.zo)("div",{display:"grid",gap:"5.5px",gridTemplateColumns:"repeat(7, 1fr)",placeItems:"center"}),k=e=>{let{month:t,year:a,showHeader:i=!0,selected:n,filter:d,onSelect:u}=e,p=(0,l.useMemo)(()=>"calendar-".concat((0,c.R)()),[]),v=(0,l.useMemo)(()=>"".concat(o.kI.months("long")[t-1]," ").concat(a),[t,a]),g=(0,l.useMemo)(()=>b(t,a,d),[t,a,d]);return(0,r.jsxs)(j,{children:[i&&v?(0,r.jsx)(w,{id:p,children:(0,r.jsx)(s.J3,{variant:"lg",tag:"span",children:v})}):null,(0,r.jsxs)(S,{role:"grid","aria-labelledby":p,children:[(0,r.jsx)(x,{}),(0,r.jsx)($,{role:"rowgroup",children:g.map((e,t)=>(0,r.jsx)(C,{role:"row",children:e.map((e,t)=>e?(0,r.jsx)(h,{date:e.date,selected:n&&n.year===e.date.year&&n.month===e.date.month&&n.day===e.date.day,isAvailable:e.isAvailable,isToday:e.isToday,onClick:u},"day-".concat(e.date.day)):(0,r.jsx)("div",{role:"gridcell","aria-hidden":"true"},"prev-month-day-".concat(t)))},"week-".concat(t)))})]})]})}},60965:function(e,t,a){a.d(t,{hQ:function(){return L},lI:function(){return ep},Th:function(){return O}});var i,n=a(85893),r=a(1575),o=a(67294),l=a(49689),s=a(89023),d=a(92258),c=a(5151),u=a(61826),p=a(75567),h=a(157),v=a(62030),g=a(24556);let m=(0,p.zo)("div",{position:"relative",minHeight:"60px"}),x=(0,p.zo)("div",{borderRadius:"$space$3",background:"$grayscaleWhite",variants:{open:{true:{boxShadow:"$2"}},openInOverlay:{true:{}}},compoundVariants:[{openInOverlay:!0,open:!0,css:{position:"absolute",top:0,left:0,right:0,zIndex:"$appOverlay"}}]}),f=(0,p.zo)("div",{display:"flex",position:"relative",variants:{open:{true:{"& > label":{borderRadius:"$space$3 $space$3 0 0"}}}}}),y=(0,p.zo)("div",{borderRadius:"0 0 $space$3 $space$3",position:"relative",marginTop:"-1px"}),b=(0,p.zo)("ol",{listStyleType:"none",margin:0,padding:0,width:"100%",overflowY:"auto",maxHeight:"435px",left:0,right:0,position:"relative",borderBottom:"$divider",borderRadius:"0 0 $space$3 $space$3",variants:{hasFooter:{true:{borderRadius:0,borderBottom:0,maxHeight:"355px"}}}}),j=(0,p.zo)("button",{position:"relative",width:"100%",padding:"$5 $4",borderRadius:0,margin:0,background:"transparent",borderTop:"1px solid transparent",borderBottom:"$divider",borderLeft:"$divider",borderRight:"$divider",...h.c.uiparagraph300,textAlign:"left",color:"$grayscaleStone",":first-child:not(:hover) > &":{borderTop:"1px solid transparent"},"&::before":{content:"",position:"absolute",boxShadow:"0 0 0 1px transparent",inset:0,transition:"box-shadow $productiveP2S"},"&:focus-visible":{boxShadow:"none !important","&:before":{boxShadow:"0 0 0 1px black"}}}),w=(0,p.zo)("li",{["&:hover > ".concat(j)]:{"&::before":{boxShadow:"0 0 0 1px $colors$grayscaleSmoke"}},["&[aria-selected='true'] > ".concat(j)]:{outline:"none","&::before":{boxShadow:"0 0 0 1px $colors$grayscaleCharcoal"}},variants:{hasFooter:{true:{["&:last-child > ".concat(j)]:{borderBottom:0,"&::after":{transition:"border-color $productiveP2S",content:"",position:"absolute",width:"100%",height:"1px",left:0,bottom:0,borderBottom:"1px solid transparent"}},["&:hover:last-child > ".concat(j)]:{"&::after":{borderColor:"$grayscaleSmoke"}},["&[aria-selected='true']:last-child > ".concat(j)]:{"&::after":{borderColor:"$grayscaleCharcoal"}}},false:{["&:last-child > ".concat(j)]:{borderRadius:"0 0 $space$3 $space$3","&::before":{borderRadius:"0 0 $space$3 $space$3"}}}}}}),S=(0,p.zo)("footer",{color:"$grayscaleStone",border:"$divider",borderRadius:"0 0 $space$3 $space$3",textAlign:"center",padding:"$5",variants:{noOptions:{true:{borderTop:0,textAlign:"left"}}}}),$=(0,p.zo)(c.Z,{position:"absolute",top:18,left:18,zIndex:1,pointerEvents:"none",variants:{disabled:{true:{color:"$grayscaleSmoke"}}}}),C=(0,p.zo)("button",{position:"absolute",top:22,right:16,zIndex:1,display:"none",background:"transparent",border:0,borderRadius:"50%",padding:0,width:16,height:16,"&:focus":{_buttonFocusOutline:"$grayscaleCharcoal"},variants:{show:{true:{display:"flex"}}}}),k=(0,p.zo)("div",{display:"flex",padding:"$5",justifyContent:"center",alignItems:"center"}),I=(0,p.zo)("span",{...h.c.uibutton300,color:"$grayscaleCharcoal"}),z=e=>e&&""!==e.trim()?e.startsWith(" ")?e.trimStart():e:"",E=e=>{let{value:t,searchTerm:a}=e,i=t.toLowerCase(),r=a.toLowerCase(),o=i.indexOf(r);return-1===o?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)(n.Fragment,{children:[t.slice(0,o),(0,n.jsx)(I,{children:t.slice(o,o+a.length)}),t.slice(o+a.length)]})},T=e=>(null==e?void 0:e.firstLine)||(null==e?void 0:e.secondLine)||"",D=r.Kb.stateChangeTypes,L=e=>{let{searchTerm:t,className:a,choices:i,label:c,textEmpty:p,textManual:h,textManualButton:I,disabled:L,errorMessage:M,loading:Z,loadingError:A,openInOverlay:O,emptyTermChoice:R,handleSelectManual:W,handleSelectChoice:F,handleChange:P,handleReset:B,handleLoadingRetry:q,itemToString:N=T}=e,H=(0,r.Kb)({inputValue:t,items:i||[],itemToString:N,onInputValueChange:e=>{let{inputValue:t}=e;return P(z(t))},onSelectedItemChange:e=>{let{selectedItem:t}=e;return F(t||null)},stateReducer:(e,t)=>{let{type:a,changes:i}=t;switch(a){case D.InputChange:case D.InputFocus:case D.InputBlur:case D.FunctionReset:case D.InputKeyDownArrowUp:case D.InputKeyDownArrowDown:return{...i,isOpen:!!i.inputValue||!!R};case D.MenuMouseLeave:case D.ItemMouseMove:return{...i,highlightedIndex:e.highlightedIndex};default:return i}}}),{isOpen:V,inputValue:_,getInputProps:Y,getItemProps:Q,getMenuProps:X,getLabelProps:U,closeMenu:G,reset:J}=H,K=(0,l.I)({onTriggered:()=>G()}),ee=(0,o.useCallback)(()=>{J(),B()},[J,B]),et=!!R&&!_,ea=(null==i?void 0:i.length)===0&&!et,ei=!Z&&(!!W||ea||!!A);return(0,n.jsx)(m,{ref:K,className:a,children:(0,n.jsxs)(x,{open:V,openInOverlay:O,children:[(0,n.jsxs)(f,{open:V,children:[(0,n.jsx)($,{width:24,disabled:L}),(0,n.jsx)(s.W.Standard,{fieldLabel:c,value:_,disabled:L,left:48,right:48,labelProps:U(),errorMessage:!V&&M,...Y()}),(0,n.jsx)(C,{onClick:ee,show:!!_,children:(0,n.jsx)(d.Z,{width:16})})]}),(0,n.jsxs)(y,{children:[(0,n.jsxs)(b,{...X(),hasFooter:ei||!V,children:[V&&!A&&(i||[]).map((e,t)=>(0,n.jsx)(w,{hasFooter:ei,...Q({item:e,index:t}),children:(0,n.jsx)(j,{color:"stone",children:(0,n.jsxs)("section",{children:[(0,n.jsx)("header",{children:(0,n.jsx)(E,{value:e.firstLine,searchTerm:_})}),e.secondLine&&(0,n.jsx)("footer",{children:(0,n.jsx)(E,{value:e.secondLine,searchTerm:_})})]})})},t)),V&&et&&(0,n.jsx)(w,{hasFooter:ei,...Q({item:{firstLine:""}}),children:R})]}),V&&Z&&(0,n.jsx)(k,{children:(0,n.jsx)(u.$,{size:28})}),V&&!et&&ei&&(0,n.jsx)(S,{noOptions:ea||!!A,children:(0,n.jsx)(g.gi,{tag:"p",variant:"md",children:A?(0,n.jsxs)(n.Fragment,{children:[A," ",q?(0,n.jsx)(v.A,{onClick:e=>{e.preventDefault(),e.stopPropagation(),q()},children:"Retry"}):null]}):(0,n.jsxs)(n.Fragment,{children:[W&&(!i||i.length>0)?h:p,(0,n.jsx)("br",{}),!!W&&(0,n.jsx)(v.A,{variant:"md",onClick:()=>W(_),children:I})]})})})]})]})})};function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var Z=function(e){return o.createElement("svg",M({width:16,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=o.createElement("path",{d:"M14.5 2 2 9l5 .5 1 5L14.5 2Z",fill:"#414B56",stroke:"#414B56",strokeLinejoin:"round"})))};let A=(0,p.zo)("div",{...h.c.uibutton300,display:"flex",gap:"$3",alignItems:"center",color:"$grayscaleCharcoal"}),O=e=>{let{copy:t,onClick:a}=e;return(0,n.jsx)(j,{onClick:a,children:(0,n.jsxs)(A,{children:[(0,n.jsx)(Z,{}),(0,n.jsx)("span",{children:null!=t?t:"Use my precise location"})]})})};var R=a(1340),W=a(35878),F=a(52599),P=a(66545);let B="62px",q="80px",N=(0,p.zo)("div",{position:"relative",minHeight:B,maxHeight:"500px",width:"100%"}),H=(0,p.zo)("div",{display:"flex",flex:"1","& label":{height:"inherit",minHeight:B,"& > input":{minWidth:q}},variants:{isScrollable:{true:{"& label":{maxHeight:"160px",overflow:"auto"}}},isShrinkable:{true:{"& label":{display:"flex",alignItems:"center","& > input":{height:0,minHeight:0,minWidth:0,transition:"min-height $productiveP2S, min-width 0s 0.2s"},"&:focus-within":{"& > input":{minHeight:"28px",minWidth:q,transition:"min-height $productiveP2S, min-width 0s"}}}}},open:{true:{"& > label":{boxShadow:"$2",borderRadius:"$space$3 $space$3 0 0"}}}}}),V=(0,p.zo)(c.Z,{position:"absolute",top:18,left:18,zIndex:1,pointerEvents:"none",variants:{disabled:{true:{color:"$grayscaleSmoke"}}}});(0,p.zo)("button",{position:"absolute",top:22,right:16,display:"none",background:"transparent",border:0,borderRadius:"50%",padding:0,width:16,height:16,"&:focus":{_buttonFocusOutline:"$grayscaleCharcoal"},variants:{show:{true:{display:"flex"}}}});let _=e=>e&&""!==e.trim()?e.startsWith(" ")?e.trimStart():e:"",Y=e=>(null==e?void 0:e.firstLine)||(null==e?void 0:e.secondLine)||"",Q=e=>e.scrollIntoView({behavior:"smooth",block:"nearest"}),X=e=>{e.stopPropagation()},U={onMouseDown:X,onClick:X,onMouseUp:X},G=r.Kb.stateChangeTypes,J=r.M$.stateChangeTypes,K=(e,t)=>{let{type:a,changes:i}=t;switch(a){case G.InputKeyDownEnter:case G.ItemClick:case G.InputChange:return{...i,isOpen:!0,highlightedIndex:0};case G.InputBlur:return{...i,selectedItem:null};default:return i}},ee=e=>{let{id:t,searchTerm:a,values:i,choices:n,inputRef:l,itemToString:s,onSearchTermChange:d,onSelectChoices:c}=e,[u,p]=(0,o.useState)(null!=a?a:""),[h,v]=(0,o.useState)(null!=i?i:[]);(0,o.useEffect)(()=>{a&&p(a)},[a]),(0,o.useEffect)(()=>{i&&v(i)},[i]);let g=e=>{let{selectedItems:t,type:a}=e;switch(a){case J.SelectedItemKeyDownBackspace:case J.SelectedItemKeyDownDelete:case J.DropdownKeyDownBackspace:case J.FunctionRemoveSelectedItem:v(null!=t?t:[]);break;case J.FunctionReset:v([])}},m=e=>{let{inputValue:t,type:a,selectedItem:i}=e;switch(a){case G.InputBlur:p(""),null==d||d("");break;case G.InputKeyDownEnter:case G.ItemClick:if(i){var n;let e=[...h,i];v(e),null==l||null===(n=l.current)||void 0===n||n.select()}break;case G.InputChange:{let e=_(t);p(e),null==d||d(e)}}},x=(0,r.M$)({selectedItems:h,onSelectedItemsChange:e=>{let{selectedItems:t}=e;t&&(null==c||c(t))},onStateChange:g}),f=n.filter(e=>!h.find(t=>t.id===e.id)),y=(0,r.Kb)({id:t,inputValue:u,items:f,selectedItem:null,itemToString:s,scrollIntoView:Q,stateReducer:K,onStateChange:m,onSelectedItemChange:e=>{let{selectedItem:t}=e,a=[...h];return t&&a.push(t),null==c?void 0:c(a)}});return{inputValue:u,comboboxProps:y,multipleSelectionProps:x,remainingChoices:f}},et=e=>{let{element:t,options:a,callback:i}=e;(0,o.useEffect)(()=>{if(t){let e=new MutationObserver(i);return e.observe(t,a),()=>e.disconnect()}return()=>{}},[t,a,i])},ea=e=>e.forEach(e=>{if("style"===e.attributeName&&e.target instanceof HTMLElement&&e.target.parentElement instanceof HTMLElement){var t;let a="0"===e.target.style.opacity,i=e.target.parentElement.hasAttribute("data-radix-popper-content-wrapper"),n=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.parentElement;n&&(n.style.visibility=a&&i?"hidden":"")}}),ei=e=>{et({element:e,options:{attributes:!0,attributeFilter:["style"]},callback:ea})};var en=a(20360),er=a(55133);let eo=(0,p.zo)(R.VY,{maxHeight:"270px",width:"var(--radix-popper-anchor-width)",overflow:"auto",borderRadius:"0 0 $space$3 $space$3",background:"$grayscaleWhite",pointerEvents:"auto !important",zIndex:"$onTop",variants:{open:{true:{boxShadow:"$2",borderBottom:"$divider"}}}}),el=(0,p.zo)("ul",{listStyleType:"none",margin:0,padding:0,width:"100%",borderRadius:"0 0 $space$3 $space$3",left:0,right:0}),es=(0,p.zo)("li",{position:"relative",display:"flex",flexDirection:"column",cursor:"pointer",padding:"$5 $4",border:"$divider",borderTop:0,outline:0,...h.c.uiparagraph300,color:"$grayscaleStone","&[aria-selected=true], &:hover":{backgroundColor:"$grayscaleSilk"},"&:last-of-type":{borderBottom:0},"&:not([role=option])":{display:"flex",justifyContent:"center",minHeight:B,backgroundColor:"$grayscaleWhite",cursor:"default"}}),ed=(0,p.zo)(g.J3,{color:"$grayscaleCharcoal"}),ec=e=>{let{value:t,searchTerm:a}=e,i=t.toLowerCase(),r=a.toLowerCase(),o=i.indexOf(r);return-1===o?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("span",{children:[t.slice(0,o),(0,n.jsx)(ed,{variant:"sm",children:t.slice(o,o+a.length)}),t.slice(o+a.length)]})},eu=e=>{let{choices:t,comboboxProps:a,textEmpty:i,emptyTermChoice:r,loading:l,loadingError:s}=e,d=(0,en.t)(),c=(0,o.useRef)(null);ei(c.current);let{isOpen:p,inputValue:h,highlightedIndex:v,getMenuProps:m,getItemProps:x}=a,f=m({ref:c},{suppressRefError:!0}),y=(0,o.useMemo)(()=>l?(0,n.jsx)(es,{as:"div",role:"complementary",children:(0,n.jsx)(er.E,{justifyContent:"center",children:(0,n.jsx)(u.$,{size:22})})}):l||s||!(t.length>0)?l||h?(0,n.jsx)(es,{role:"complementary",children:(0,n.jsx)(g.gi,{tag:"p",variant:"md",children:null!=s?s:i})}):(0,n.jsx)(es,{role:"complementary",children:(0,n.jsx)(g.gi,{tag:"p",variant:"md",children:null!=r?r:"Start typing to search.."})}):t.map((e,t)=>(0,n.jsxs)(es,{...x({item:e,index:t,selected:t===v}),children:[(0,n.jsx)(ec,{value:e.firstLine,searchTerm:h}),e.secondLine&&(0,n.jsx)(ec,{value:e.secondLine,searchTerm:h})]},e.id)),[l,s,t,h,i,v,r,x]);return d?(0,n.jsx)(R.h_,{forceMount:!0,children:(0,n.jsx)(eo,{...f,className:"combobox-menu",hideWhenDetached:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},open:p,children:p&&(0,n.jsx)(el,{children:y})})}):null},ep=e=>{let{values:t,searchTerm:a,className:i,label:r,disabled:l,errorMessage:s,pasteDelimiters:d=["\n","	",";",","],showSearchIcon:c,itemToString:u=Y,onSelectChoices:p,onSearchTermChange:h,onPaste:v,...g}=e,m=(0,o.useRef)(null),x=(0,o.useRef)(null),{choices:f}=g,{inputValue:y,comboboxProps:b,multipleSelectionProps:j,remainingChoices:w}=ee({id:r,searchTerm:a,values:t,choices:f,inputRef:x,itemToString:u,onSelectChoices:p,onSearchTermChange:h}),{isOpen:S,getLabelProps:$,getInputProps:C}=b,{selectedItems:k,getDropdownProps:I,getSelectedItemProps:z,removeSelectedItem:E}=j,T=C(I()),D=$(),L=k.length>0,M=e=>{if(!v)return;let t=e.clipboardData.getData("text"),a=t.replace(/\r\n?/g,"\n").split(RegExp(d.join("|"),"g")).map(e=>e.trim()).filter(Boolean);1!==a.length&&(e.preventDefault(),v(a))},Z=e=>{var t,a;null!==(t=m.current)&&void 0!==t&&t.contains(e.relatedTarget)||null===(a=T.onBlur)||void 0===a||a.call(T,e)};return(0,n.jsx)(N,{className:i,children:(0,n.jsxs)(R.fC,{open:S,children:[(0,n.jsx)(R.xz,{asChild:!0,children:(0,n.jsxs)(H,{ref:m,isScrollable:L,isShrinkable:L&&!y,tabIndex:-1,open:S,...U,children:[!L&&c&&(0,n.jsx)(V,{width:24,disabled:l}),(0,n.jsx)(F.y,{...T,ref:(0,W.Z)([x,T.ref]),labelProps:D,tags:k.map((e,t)=>(0,o.createElement)(P.T,{...z({selectedItem:e,index:t}),key:e.id,size:"medium",onClick:void 0,onRemove:t=>{t.stopPropagation(),E(e),setTimeout(()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.focus()},0)}},e.firstLine)),value:y,left:c?48:16,right:48,fieldLabel:r,errorMessage:S?void 0:s,error:!S&&void 0!==s,disabled:l,onPaste:M,onBlur:Z})]})}),(0,n.jsx)(eu,{...g,comboboxProps:b,choices:w})]})})}},33765:function(e,t,a){a.d(t,{m:function(){return n}});var i=a(30120);let n=e=>{if(!e)return"";let t=i.ou.fromISO(null!=e?e:"");return t.isValid?t.toFormat("h:mm a").replace("AM","a.m.").replace("PM","p.m."):""}},40902:function(e,t,a){a.d(t,{Y:function(){return s}});var i=a(85893),n=a(75567);let r=(0,n.zo)("svg"),o=(0,n.zo)("circle",{transition:"stroke $transitions$productiveP2S"}),l=(0,n.zo)("circle",{transition:"fill $transitions$productiveP2S"}),s=()=>(0,i.jsxs)(r,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)(o,{"data-radio-piece":"border",cx:"12",strokeWidth:"1.5",stroke:"#676F78",cy:"12",r:"10"}),(0,i.jsx)(l,{"data-radio-piece":"indicator",cx:"12",fill:"#ffffff",cy:"12",r:"6"})]})},79153:function(e,t,a){a.d(t,{e:function(){return iJ}});var i,n,r,o=a(85893),l=a(67294),s=a(75567),d=a(32500),c=a(8364),u=a(87394),p=a(88982),h=a(44329),v=a(44415),g=a(77050),m=a(67747),x=a(19220),f=a(24344),y=a(43924),b=a(50359),j=a(72349);let w=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$4",padding:"0 0 $4",borderBottom:"1px solid $colors$grayscaleSilver",width:"100%"}),S=(0,s.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 $6","@tablet":{padding:"0 $12"},"@desktop":{padding:"0 $12"}}),$=(0,s.zo)(f.a,{opacity:0,transition:"opacity $transitions$expressiveE5S",variants:{visibility:{visible:{opacity:1},hidden:{opacity:0}}}}),C=()=>{var e;let{current:t,progress:a,goBack:i,close:n}=(0,u.Q)(),r=i&&(!("showBackButton"in t.config)||!1!==t.config.showBackButton),l=n&&(!("showCloseButton"in t.config)||!1!==t.config.showCloseButton);return"wizard-step-loading"===t.type?null:(0,o.jsxs)(w,{children:[(0,o.jsx)(x.k,{value:null!==(e=null==a?void 0:a.value)&&void 0!==e?e:0,max:100,onTransitionEnd:null==a?void 0:a.onTransitionEnd}),(0,o.jsxs)(S,{children:[(0,o.jsx)($,{"aria-label":"Back",type:"button",onClick:i?()=>i():void 0,visibility:r?"visible":"hidden",disabled:!r,children:(0,o.jsx)(b.Z,{})}),(0,o.jsx)(j.G,{}),(0,o.jsx)($,{"aria-label":"Close",type:"button",onClick:n,visibility:l?"visible":"hidden",disabled:!l,children:(0,o.jsx)(y.Z,{})})]})]})};var k=a(769),I=a(11163),z=a(46988),E=a(19349),T=a(96235),D=a(33864),L=a(50031),M=a(35021),Z=a(92280),A=a(54116),O=a(89023),R=a(31929),W=a(26323),F=a(65751);let P=(0,s.zo)(F.yG,{alignItems:"center","@tablet":{paddingBottom:"$12",gap:"$12"},"@desktop":{paddingBottom:"$12",gap:"$12"}}),B=(0,s.zo)("div",{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"$3","@tablet":{maxWidth:"498px"},"@desktop":{maxWidth:"432px"}}),q=e=>{let{widget:t,activeCtas:a,checked:i,setChecked:n,email:r,setEmail:l,errorMessage:s}=e,{id:d,config:c}=t,{ctasType:u,checkboxLabel:p}=c;return(0,o.jsxs)(P,{children:[(0,o.jsx)(W.W,{id:d,config:c,defaultAlignment:Z.H.Center}),(0,o.jsxs)(B,{children:[(0,o.jsx)(O.W.Standard,{type:"email",fieldLabel:"Email address",value:r,onChange:e=>l(e.target.value),errorMessage:s}),!!p&&(0,o.jsx)(A.X,{value:i,onChange:n,label:p})]}),(0,o.jsx)(R.t,{value:a,ctasType:u})]})},N=e=>{var t,a;let{config:{ctas:i,skipStep:n}}=e,{values:r,goNext:s,updateValues:d}=(0,u.Q)(),{trackEvent:c}=(0,v.r)(),[p,h]=(0,l.useState)((null===(t=r.emailChecked)||void 0===t?void 0:t[0])!=="false"),[m,x]=(0,l.useState)(""),[f,y]=(0,l.useState)((null===(a=r.email)||void 0===a?void 0:a[0])||""),b=(0,l.useCallback)(e=>{(0,D.J)(e)&&x(""),y(e),d({email:[e]})},[d]),j=(0,l.useCallback)(e=>{h(e),d({emailChecked:["".concat(e)]}),c({action:e?g.ld.Check:g.ld.Uncheck,label:e?g.YX.WantsMarketingEmailsCheck:g.YX.WantsMarketingEmailsUncheck})},[d,c]);return(0,E.SN)("wizard-subscribe",async e=>{if(!(0,D.J)(f)){x("Email address must be valid.");return}c({action:g.ld.WantsMarketingEmails,label:p?g.YX.WantsMarketingEmailsYes:g.YX.WantsMarketingEmailsNo,customer:{customer_email_sha_digest:(0,M.e)(f)}}),p&&await(0,L.u)({email:f}),s(e.next)},[f]),(0,E.SN)("wizard-skip",e=>{e.next&&s(e.next)},[]),(0,o.jsx)(q,{widget:e,activeCtas:(f?i||[]:n?[n]:[]).map(e=>(0,F.Vk)(e,"emailAddress")),checked:p,setChecked:j,email:f,setEmail:b,errorMessage:m})};var H=a(42708),V=a(93568),_=a(33445),Y=a(38771),Q=a(97098);let X=(0,s.zo)("div",{display:"flex",flexDirection:"column",textAlign:"center",gap:"$1"}),U=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$6","@tablet":{gap:"$12"}}),G=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$6"}),J=(0,s.zo)("div",{width:"100%","@tablet":{width:"243px",margin:"auto"},"> *":{minWidth:"100%"},variants:{isStickyCtas:{true:{width:"auto",position:"sticky",bottom:0,background:"$grayscaleWhite",margin:"0 calc((100% - 100vw) / 2)",padding:"$4 calc((100vw - 100%) / 2)",boxShadow:"$6"}}}}),K=(0,s.zo)(O.W.TextArea,{height:"225px"}),ee=e=>{let{widget:t,wizardKind:a,selectedCardsIds:i,ctasType:n,activeCtas:r,onCardClick:s,customValue:d}=e,{id:c,config:{header:u,paragraph:p,multiselect:h,cards:v,cardsLayout:g,cardsLayoutGrid:m,eyebrow:x}}=t,[f,y]=(0,l.useState)(!1),{ref:b}=(0,H.YD)({onChange:e=>{y(!e)},rootMargin:"-10px"});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(F.yG,{kind:a,noBottomPadding:f&&!!(null==r?void 0:r.length),children:[(0,o.jsxs)(X,{children:[(0,o.jsx)(Y.I,{value:x}),(0,o.jsx)(V.l,{value:u,widgetId:c,defaultHeadingLevel:"h1",defaultTypography:Z.ZT.HeaderMedium,defaultAlignment:Z.H.Center,defaultColor:Z.Il.Charcoal}),(0,o.jsx)(_.Z,{value:p,defaultAlignment:Z.H.Center})]}),(0,o.jsxs)(U,{children:[(0,o.jsxs)(G,{children:[(0,o.jsx)(Q.q,{cards:v,layout:g,layoutGrid:m,multiselect:h,selectedCardsIds:i,onClick:s}),!!d&&(0,o.jsx)(K,{fieldLabel:d.placeholder,value:d.value,onChange:e=>d.onChange(e.currentTarget.value)}),t.config.remark?(0,o.jsx)(_.Z,{value:t.config.remark,defaultTypography:Z.ZT.ParagraphMedium,defaultColor:Z.Il.Stone}):null]}),!!(null==r?void 0:r.length)&&(0,o.jsx)(J,{isStickyCtas:f,children:(0,o.jsx)(R.t,{value:r,ctasType:n,renderCustomFixedWidthWrapper:e=>e})})]})]}),(0,o.jsx)("div",{ref:b})]})},et=e=>{var t,a;let{id:i,meta:n,config:{cards:r,multiselect:s,ctasType:d,ctas:c,skipStep:p,customValue:h,obfuscateAnalytics:m}}=e,x=(null==n?void 0:n.gaCategory)||(null===(t=r[0])||void 0===t?void 0:t.questionId),{kind:f,values:y,customValues:b,updateValues:j,updateCustomValues:w,goNext:S}=(0,u.Q)(),{trackEvent:$}=(0,v.r)(),[C,k]=(0,l.useState)(()=>{var e;return(null===(e=b.find(e=>(null==h?void 0:h.questionId)===e.questionId||e.answerId&&r.some(t=>t.questionId===e.questionId&&t.answerIds.includes(e.answerId))))||void 0===e?void 0:e.value)||""}),[I,z]=(0,l.useState)(()=>r.filter(e=>{var t;return e.answerIds.length>0&&(s||e.answerIds.length===(null===(t=y[e.questionId])||void 0===t?void 0:t.length))&&e.answerIds.every(t=>{var a;return null===(a=y[e.questionId])||void 0===a?void 0:a.includes(t)})}).map(e=>e.id)),T=(0,l.useMemo)(()=>r.filter(e=>I.includes(e.id)).reduce((e,t)=>({...e,[t.questionId]:s?[...e[t.questionId]||[],...t.answerIds||[]]:t.answerIds||[]}),{}),[r,s,I]),D=(0,l.useMemo)(()=>{let e=[...new Set(Object.values(T).flat())];return!!(null==h?void 0:h.questionId)||!!(null==h?void 0:h.dependsOn)&&e.includes(h.dependsOn)},[T,h]),L=e=>{var t;let a=(null==h?void 0:h.questionId)||(null===(t=r.find(e=>e.answerIds.includes((null==h?void 0:h.dependsOn)||"")))||void 0===t?void 0:t.questionId);a&&w([{questionId:a,answerId:null==h?void 0:h.dependsOn,value:e.trim()}])};(0,E.SN)("wizard-next-selected",e=>{j(T),h&&L(D?C:""),S(e.next)},[I,D,C]),(0,E.SN)("wizard-skip",e=>{e.next&&(j(r.reduce((e,t)=>({...e,[t.questionId]:(e[t.questionId]||[]).filter(e=>!t.answerIds.includes(e))}),{})),h&&L(""),S(e.next))},[]);let M=e=>{if(!e.next)return;let t=m?"stepid_".concat(i,"_cardId_").concat(e.id):"".concat(x,"_").concat(e.text);$({action:g.ld.Click,label:t}),(null==h?void 0:h.dependsOn)&&e.answerIds.includes(h.dependsOn)?z([e.id]):(z([]),j({[e.questionId]:e.answerIds||[]}),S(e.next))},Z=e=>{let t=I.includes(e.id),a=m?"stepid_".concat(i,"_cardId_").concat(e.id):"".concat(x,"_").concat(e.text);$({action:t?g.ld.Uncheck:g.ld.Check,label:a}),z(t?I.filter(t=>t!==e.id):[...I,e.id])},A=p&&!I.length||D&&(!(null==h?void 0:h.required)||!!C.trim())||!D&&!!I.length,O=D?{value:C,onChange:k,placeholder:(null==h?void 0:h.placeholder)||""}:void 0;return(0,o.jsx)(ee,{widget:e,wizardKind:f,selectedCardsIds:I,onCardClick:s?Z:M,ctasType:D&&(null==h?void 0:null===(a=h.ctas)||void 0===a?void 0:a.length)&&h.ctasType?h.ctasType:d,activeCtas:(()=>{if(D){var e;return!!(null==h?void 0:null===(e=h.ctas)||void 0===e?void 0:e.length)&&h.ctas||c||[]}return p&&!I.length||p&&!s&&I.length?[p]:c||[]})().map(e=>{let t=m?"stepid_".concat(i,"_cardId_").concat(I):x;return(0,F.Vk)(e,t,!A)}),customValue:O})},ea=(0,s.F4)({from:{opacity:0},to:{opacity:1}}),ei=(0,s.F4)({from:{opacity:0,transform:"translateY(30px)"},to:{opacity:1,transform:"translateY(0)"}}),en=(0,s.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"$21 $6 $6",gap:"$12","@tablet":{padding:"$27 0 $12"},"@desktop":{padding:"$27 0 $12"}}),er=(0,s.zo)("div",{width:"100%",opacity:0,animation:"".concat(ea," $transitions$productiveP2S forwards"),"@tablet":{width:"672px"},"@desktop":{width:"888px"}}),eo=(0,s.zo)("div",{width:"100%",opacity:0,animation:"".concat(ei," $transitions$expressiveE5S forwards"),"@tablet":{width:"498px"},"@desktop":{width:"432px"}}),el=(0,s.zo)("div",{opacity:0,animation:"".concat(ei," $transitions$expressiveE5S forwards")});function es(e){return"".concat(.15+.65*e,"s")}let ed=e=>{let{id:t,config:a}=e,{header:i,list:n,ctasType:r,ctas:l}=a,{kind:s}=(0,u.Q)(),{Track:d}=(0,v.r)({category:"".concat(s,"-Results")});return(0,o.jsx)(d,{children:(0,o.jsxs)(en,{children:[(0,o.jsx)(er,{children:(0,o.jsx)(V.l,{value:i,widgetId:t})}),n.map((e,a)=>(0,o.jsxs)(eo,{css:{animationDelay:es(a)},children:[(0,o.jsx)(V.j,{value:e.subheader,widgetId:t}),(0,o.jsx)(_.Z,{value:e.paragraph,defaultTypography:Z.ZT.ParagraphLarge})]},e.id)),(0,o.jsx)(el,{css:{animationDelay:es(n.length)},children:(0,o.jsx)(R.t,{value:l,ctasType:r})})]})})};var ec=a(36492),eu=a(14230),ep=a(74050);let eh=new eu.t(ep.i);var ev=a(37859);let eg=e=>(0,ec.a)(["patients"],()=>eh.eyeExamsGetCustomerPatients(),e),em=(e,t)=>(0,ec.a)((0,ev.tO)({url:"/v1/eye-exams/next-available",params:e}),()=>eh.eyeExamsGetDatesAvailability(e),t),ex=(e,t)=>(0,ec.a)((0,ev.tO)({url:"/v1/eye-exams/time-slots",params:e}),()=>eh.eyeExamsGetTimeslots(e),t),ef=(e,t)=>(0,ec.a)((0,ev.tO)({url:"/v1/eye-exams/appointment",params:e}),()=>eh.eyeExamsGetByAppointmentId(e),t);var ey=a(48228);let eb=e=>{var t;let{appointmentInfo:a,origin:i,storeInfo:n,patientInfo:r}=e;return eh.eyeExamsCreateAppointment({AppointmentCreateInput:{origin:i,configId:a.configId,storeId:n.id,doctorId:a.doctorId,examRoomIndex:a.examRoomIndex,startDate:a.startDate,endDate:a.endDate,patientName:r.userName,email:r.email,phoneNumber:r.phone,dateOfBirth:(null===(t=r.dateOfBirth)||void 0===t?void 0:t.toISODate())||"",sendSms:r.sendTexts}})},ej=e=>{let{appointmentId:t,hash:a,appointmentInfo:i,origin:n,storeInfo:r}=e;return eh.eyeExamsUpdateAppointment({appointmentId:t,hash:a,AppointmentUpdateInput:{origin:n,configId:i.configId,storeId:r.id,doctorId:i.doctorId,examRoomIndex:i.examRoomIndex,startDate:i.startDate,endDate:i.endDate}})},ew=e=>{let{appointmentId:t,hash:a,reason:i,text:n}=e;return eh.eyeExamsCancelAppointment({appointmentId:t,hash:a,EyeExamsControllerCancelAppointmentRequest:{reason:i,text:n}})},eS=e=>{let{appointmentId:t,hash:a,pageUrl:i,variantId:n,answers:r}=e;return eh.eyeExamsSubmitIntakeForm({appointmentId:t,hash:a,IntakeFormData:{pageUrl:i,variantId:n,answers:r}})},e$=()=>(0,ey.D)(eb),eC=()=>(0,ey.D)(ej),ek=()=>(0,ey.D)(ew),eI=()=>(0,ey.D)(eS);var ez=a(83993),eE=a(73126);let eT=()=>(0,o.jsxs)(ez.j,{type:"warning",children:["There was an issue processing your request. Please try again. If the problem persists, reach out via ",(0,o.jsx)(eE.J,{})," or give us a call at ",(0,o.jsx)(eE.g,{}),"."]});var eD=a(41668);let eL=(0,s.zo)("div",{textAlign:"center"}),eM=(0,s.zo)("img",{objectFit:"contain"}),eZ=e=>{var t;let{media:a}=e;if(!a||(null===(t=a[0])||void 0===t?void 0:t.specType)==="hidden")return null;let[i]=a;return(0,o.jsx)(eL,{children:(0,o.jsxs)("picture",{children:[(0,o.jsx)("source",{srcSet:i.desktopUrl,media:eD.A.desktop}),(0,o.jsx)("source",{srcSet:i.tabletUrl,media:eD.A.tablet}),(0,o.jsx)(eM,{src:i.mobileUrl,alt:i.alt})]})})},eA=(0,s.zo)(F.yG,{textAlign:"center",alignItems:"center","@tablet":{padding:"$3 0 $6"},variants:{hasMedia:{false:{"@tablet":{paddingTop:0,gap:"$12"}}}}}),eO=(0,s.zo)("div",{width:"100%","@tablet":{width:"243px",margin:"auto"},variants:{ctasFullWidth:{true:{width:"100%","& > *":{minWidth:"100%"}}}}}),eR=e=>{let{id:t,wizardKind:a,header:i,paragraph:n,specialText:r,eyebrow:l,ctasType:s,ctas:d,ctasFullWidth:c,media:u,showError:p}=e,h=null==u?void 0:u.some(e=>"hidden"!==e.specType);return(0,o.jsxs)(eA,{kind:a,hasMedia:h,children:[p&&(0,o.jsx)(eT,{}),(0,o.jsx)(eZ,{media:u}),(0,o.jsx)(W.W,{id:t,config:{header:i,paragraph:n,specialText:r,eyebrow:l}}),(0,o.jsx)(eO,{ctasFullWidth:c,children:(0,o.jsx)(R.t,{value:d,ctasType:s,alignment:Z.H.Center,renderCustomFixedWidthWrapper:e=>e})})]})},eW=()=>{let e=(0,I.useRouter)(),t="string"==typeof e.query.appointmentId?e.query.appointmentId:void 0,a="string"==typeof e.query.hash?e.query.hash:void 0;return{appointmentId:t,hash:a}},eF=(e,t)=>(null==e?void 0:e.copy.includes("%"))?{...e,copy:(0,F.wT)(e.copy,t)}:e,eP=(e,t)=>{var a;return(null===(a=e.route)||void 0===a?void 0:a.includes("%"))?{...e,route:(0,F.wT)(e.route,t)}:e},eB=e=>{let{id:t,config:a}=e,{appointmentId:i,hash:n}=eW(),{kind:r,values:s,goNext:d}=(0,u.Q)(),{trackEvent:c}=(0,v.r)(),{isLoading:p,error:h,mutate:m}=ek(),{header:x,paragraph:f,specialText:y,eyebrow:b,ctasFullWidth:j,ctasType:w,ctas:S,media:$}=(0,l.useMemo)(()=>{var e;return{header:eF(a.header,s),paragraph:a.paragraph,specialText:a.specialText,eyebrow:a.eyebrow,media:a.media,ctasFullWidth:a.ctasFullWidth,ctasType:a.ctasType,ctas:null===(e=a.ctas)||void 0===e?void 0:e.map(e=>{let t=eP(e,s);return(0,F.Vk)(t,"wizard-messaging-step",p)})}},[s,a,p]);return(0,E.SN)("wizard-next-selected",e=>{c({action:g.ld.Click,label:"".concat(e.type,"_").concat(e.next)}),d(e.next)},[]),(0,E.SN)("wizard-skip",e=>{c({action:g.ld.Click,label:"".concat(e.type,"_").concat(e.next)}),d(e.next)},[]),(0,E.SN)("wizard-eye-exam-add-to-calendar",()=>{var e;let t=null===(e=s.appointmentIcalURL)||void 0===e?void 0:e[0];t&&(window.location.href=t)},[]),(0,E.SN)("wizard-open-page",e=>{let{pageUrl:t}=e;window.location.href=t},[]),(0,E.SN)("wizard-eye-exam-cancel",async e=>{i&&n&&m({appointmentId:i,hash:n},{onSuccess:()=>{c({action:g.ld.EyeExam,label:g.YX.CancelEyeExamSuccess}),d(e.next)},onError:()=>{c({action:g.ld.EyeExam,label:g.YX.CancelEyeExamError})}})},[]),(0,o.jsx)(eR,{id:t,wizardKind:r,media:$,header:x,paragraph:f,specialText:y,eyebrow:b,ctasFullWidth:j,ctasType:w,ctas:S,showError:!!h})};var eq=a(41412),eN=a(78218);let eH=e=>{let{children:t}=e,a=(0,I.useRouter)(),[i,n]=(0,l.useState)(!1),r=(0,z.E)(),{current:{config:{saveResultsOnEnter:s}},values:{email:d,emailChecked:c,...p}}=(0,u.Q)();return(0,l.useEffect)(()=>{s&&r()},[]),(0,E.SN)("wizard-open-page",async e=>{n(!0),e.saveResults&&await r(),a.push({pathname:e.pageUrl,query:p})},[]),(0,o.jsx)(T.f,{isLoading:i,css:{width:"100%",height:"100%"},children:t})},eV=e=>{let{widget:t}=e,a=(0,eq.r)(t)({"wizard-step-generic":et,"wizard-step-email":N,"wizard-step-loading":ed,"wizard-step-messaging":eB});return(0,o.jsx)(eH,{children:(0,eN.xN)(a,t)})};var e_=a(78451);let eY=()=>{let{values:e,updateValues:t}=(0,u.Q)(),a=(0,l.useMemo)(()=>{var t,a,i,n,r,o,l;return{id:null===(t=e.storeId)||void 0===t?void 0:t.join("/"),name:null===(a=e.storeName)||void 0===a?void 0:a[0],address:null===(i=e.storeAddress)||void 0===i?void 0:i[0],practiceGroup:null===(n=e.storeCompany)||void 0===n?void 0:n[0],postalCode:null===(r=e.storePostalCode)||void 0===r?void 0:r[0],providerType:null===(o=e.storeProviderType)||void 0===o?void 0:o[0],timezoneShort:null===(l=e.storeTimezoneShort)||void 0===l?void 0:l[0]}},[e.storeAddress,e.storeCompany,e.storeId,e.storeName,e.storePostalCode,e.storeProviderType,e.storeTimezoneShort]),i=(0,l.useCallback)(()=>t({storeId:[],storeName:[],storeAddress:[],storeCompany:[],storePostalCode:[],storeProviderType:[],storeTimezoneShort:[]}),[t]),n=(0,l.useCallback)(e=>{var a;return t({storeId:[e.id],storeName:[e.name],storeAddress:[e.addressDisplay],storeCompany:[e.practiceGroup],storePostalCode:[(null===(a=e.address)||void 0===a?void 0:a.postalCode)||""],storeProviderType:[e.eyeExamProviderType||""],storeTimezoneShort:[e.timezoneShort||""]})},[t]);return{storeInfo:a,clearStoreInfo:i,updateStoreInfo:n}},eQ=()=>{var e;let{values:t,updateValues:a}=(0,u.Q)(),i=(0,l.useMemo)(()=>{var a,i,n,r,o,l,s;return{configId:null===(a=t.configId)||void 0===a?void 0:a[0],doctorId:null===(i=t.doctorId)||void 0===i?void 0:i[0],examRoomIndex:null!==(e=Number(null===(n=t.examRoomIndex)||void 0===n?void 0:n[0]))&&void 0!==e?e:0,startDate:null===(r=t.startDate)||void 0===r?void 0:r[0],startDateDisplay:null===(o=t.startDateDisplay)||void 0===o?void 0:o[0],endDate:null===(l=t.endDate)||void 0===l?void 0:l[0],endDateDisplay:null===(s=t.endDateDisplay)||void 0===s?void 0:s[0]}},[t.configId,t.doctorId,t.endDate,t.endDateDisplay,t.examRoomIndex,t.startDate,t.startDateDisplay]),n=(0,l.useCallback)(e=>a({configId:[e.configId],doctorId:[e.doctorId],examRoomIndex:[e.examRoomIndex.toString()],startDate:[e.startDate],endDate:[e.endDate],startDateDisplay:[e.startDateDisplay],endDateDisplay:[e.endDateDisplay]}),[a]);return{appointmentInfo:i,updateAppointmentInfo:n}},eX=()=>{let{values:e,widgets:t}=(0,u.Q)(),a=(0,l.useMemo)(()=>(0,F.KL)(e,t),[e,t]);return a};var eU=a(30120),eG=a(91296),eJ=a.n(eG),eK=a(42243),e0=a(75047),e1=a(40775),e5=a(78553),e2=a(31914);let e4=e=>{var t;let{initialZipCode:a,distanceInMiles:i}=e,n=eU.ou.now().startOf("day").toISODate()||"",{storeInfo:r}=eY(),{appointmentId:o}=eW(),s=eX(),{isPreview:d}=(0,h.M)(),[c,u]=(0,l.useState)(),p=r.postalCode||a||"",[m,x]=(0,l.useState)(r.id),[f,y]=(0,l.useState)(!!p),[b,j]=(0,l.useState)(!1),[w,S]=(0,l.useState)(""),{debouncedValue:$}=(0,eK.N)(w,300),C=f?p:$,{trackEvent:k}=(0,v.r)(),{data:I,isFetching:z,error:E,refetch:T}=(0,e0.yA)({enabled:b,retry:!1}),{data:D,isFetching:L,isError:M,refetch:Z}=(0,e0.AX)(C,{enabled:!!C&&!b,retry:!1}),{data:A,isFetching:O,isError:R,refetch:W}=(0,e0.W1)(null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"",{enabled:!!(null==c?void 0:c.id),retry:!1});(0,l.useEffect)(()=>{y(!!p)},[p]),(0,l.useEffect)(()=>{if(f&&D){let e=D[0];S(null==e?void 0:e.fullAddress),u(e),y(!1)}},[f,D]),(0,l.useEffect)(()=>{b&&I&&(S(I.address),u({id:I.id,fullAddress:I.address,primaryAddress:I.address,secondaryAddress:""}))},[b,I]);let P=E instanceof e2.i3,B=b?I:A,q=b&&!!E&&!P,{data:N,isFetching:H,isError:V,refetch:_}=(0,e1.T)({size:20,latitude:null==B?void 0:B.latitude,longitude:null==B?void 0:B.longitude,appointmentTypes:d?["GLASSES_ONLY"]:s,appointmentId:o,facilityTypes:[e5.$n.Retail],showNextAvailableEyeExamTime:!0,startDate:n,hasLaunchedOnly:!0,useMyLocation:q,distanceInMiles:i},{enabled:!!B||q,retry:!1,keepPreviousData:!0}),Y=(0,l.useMemo)(()=>w?b&&c?[c]:null!=D?D:[]:[],[w,b,c,D]),Q=(0,l.useMemo)(()=>(0,F.rk)(Y),[Y]),X=(0,l.useCallback)(eJ()(()=>{k({action:g.ld.Change,label:g.YX.LocationSearchInput})},300),[k,eJ()]),U=e=>{X(),S(e),j(!1),e||u(void 0)},G=()=>{S(""),u(void 0),j(!1)},J=e=>{u(null==e?void 0:e.payload),j(!1)},K=async()=>{k({action:g.ld.Click,label:g.YX.PreciseLocation}),j(!0),E&&await T()},ee=async()=>{!b&&R&&await W(),V&&await _()};return{selectedLocation:B,selectedStoreId:m,searchTerm:w,appointmentTypes:s,choices:Q,isLoadingLocations:L,isLocationsError:M,isLoadingStores:O||z||H,isStoresError:R||V,isPreciseLocationRejected:P,stores:N,setSelectedStoreId:x,refetchLocations:Z,handleRefetchStores:ee,handleChange:U,handleSelectChoice:J,handleReset:G,handleSelectPreciseLocation:K}},e3=String(!0),e6=()=>{let{values:e,updateValues:t}=(0,u.Q)(),a=(0,l.useMemo)(()=>{var t,a,i,n,r,o,l;if((null===(t=e.hasPatientInfo)||void 0===t?void 0:t[0])===e3)return{userName:(null===(a=e.patientName)||void 0===a?void 0:a[0])||"",email:(null===(i=e.patientEmail)||void 0===i?void 0:i[0])||"",phone:(null===(n=e.patientPhone)||void 0===n?void 0:n[0])||"",dateOfBirth:(null===(r=e.patientDob)||void 0===r?void 0:r[0])?eU.ou.fromISO(null===(o=e.patientDob)||void 0===o?void 0:o[0]):void 0,sendTexts:(null===(l=e.sendTexts)||void 0===l?void 0:l[0])===e3}},[e.hasPatientInfo,e.patientDob,e.patientEmail,e.patientName,e.patientPhone,e.sendTexts]);return{patientInfo:a,savePatientInfo:e=>{var a;return t({hasPatientInfo:[e3],patientName:[e.userName],patientEmail:[e.email],patientPhone:[e.phone],patientDob:[(null===(a=e.dateOfBirth)||void 0===a?void 0:a.toISO())||""],sendTexts:[e.sendTexts.toString()]})}}};var e7=a(24556),e8=a(99607),e9=a(22497),te=a(63752),tt=a(85423);let ta=()=>{var e;let{goBack:t,widgets:a}=(0,u.Q)(),i=null===(e=a.find(e=>"eye-exam-time-step"===e.type))||void 0===e?void 0:e.config.step;return(0,o.jsx)(ez.j,{type:"warning",children:(0,o.jsxs)(e7.gi,{tag:"p",variant:"md",children:["We apologize, but the selected time is no longer available. Please"," ",(0,o.jsx)(te.h,{href:"#",onClick:()=>null==t?void 0:t(i),children:"go back"})," ","and choose a new time."]})})},ti=e=>{let{error:t}=e;return t instanceof tt.i&&409===t.code?(0,o.jsx)(ta,{}):(0,o.jsx)(eT,{})},tn=(0,s.zo)("div",{width:"100%",display:"flex",flexDirection:"column",gap:"$1",padding:"$4",background:"$grayscaleWhite",borderRadius:"$space$3",boxShadow:"$2",color:"$grayscaleStone","@desktop":{padding:"$6"}}),tr=e=>{let{value:{examType:t,storeName:a,date:i,time:n}}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e9.g6,{color:"charcoal",children:(0,o.jsx)(e7.J3,{variant:"lg",children:t})}),a&&(0,o.jsx)(e7.J3,{variant:"md",children:a}),(0,o.jsx)(e7.gi,{variant:"md",tag:"p",children:i}),(0,o.jsx)(e7.gi,{variant:"md",tag:"p",children:n})]})},to=e=>{let{value:t}=e;return(0,o.jsx)(tn,{children:(0,o.jsx)(tr,{value:t})})};var tl=a(58248);let ts=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1",textAlign:"center"}),td=(0,s.zo)("form",{display:"flex",flexDirection:"column",gap:"$3",width:"100%",variants:{isChild:{true:{gap:"$6"}}}}),tc=(0,s.zo)("fieldset",{display:"flex",flexDirection:"column",gap:"$3",border:0,padding:0,margin:0}),tu=e=>{let{isChild:t,isLoading:a,value:i,onChange:n}=e,[r,s]=(0,l.useState)(""),d=e=>{let t=e.currentTarget.value;(0,tl.oO)(t)&&s(""),n({...i,userName:t})},c=()=>{i.userName?(0,tl.oO)(i.userName)||s("Please enter first and last name."):s("")};return(0,o.jsx)(O.W.Standard,{autoComplete:"name",disabled:a,fieldLabel:t?"First and last name":"Patient’s first and last name",type:"text",value:i.userName,onChange:d,errorMessage:r,onBlur:c})},tp=e=>{let{isLoading:t,value:a,onChange:i}=e;return(0,o.jsx)(O.W.DateOfBirth,{autoComplete:"bday",disabled:t,fieldLabel:"Date of birth",value:a.dateOfBirth,onChange:e=>i({...a,dateOfBirth:e})})},th=e=>{let{isLoading:t,value:a,onChange:i}=e,[n,r]=(0,l.useState)(""),s=e=>{let t=e.currentTarget.value;(0,D.J)(t)&&r(""),i({...a,email:t})},d=()=>{a.email?(0,D.J)(a.email)||r("Please enter a valid email address."):r("")};return(0,o.jsx)(O.W.Standard,{autoComplete:"email",disabled:t,fieldLabel:"Email address",type:"email",value:a.email,onChange:s,errorMessage:n,onBlur:d})},tv=e=>{let{isLoading:t,value:a,onChange:i}=e;return(0,o.jsx)(O.W.PhoneNumber,{disabled:t,fieldLabel:"Phone number",value:a.phone,onChange:e=>i({...a,phone:e})})},tg=e=>{let{widget:t,submitError:a,isChild:i,appointmentSummary:n,value:r,activeCtas:l,onChange:s}=e,{id:d,config:c}=t;return(0,o.jsxs)(F.yG,{kind:k.Ig.EyeExam,children:[a?(0,o.jsx)(ti,{error:a}):null,(0,o.jsxs)(ts,{children:[(0,o.jsx)(V.l,{value:c.header,widgetId:d}),i&&(0,o.jsx)(_.Z,{value:c.childNote})]}),!c.omitPatientsData&&(0,o.jsxs)(td,{isChild:i,children:[(0,o.jsxs)(tc,{children:[i&&(0,o.jsx)(e7.fi,{variant:"md",tag:"h2",children:"Patient info"}),(0,o.jsx)(tu,{...e}),i?(0,o.jsx)(tp,{...e}):(0,o.jsx)(th,{...e})]}),(0,o.jsxs)(tc,{children:[i&&(0,o.jsx)(e7.fi,{variant:"md",tag:"h2",children:"Parent/guardian info"}),i?(0,o.jsx)(th,{...e}):(0,o.jsx)(tp,{...e}),(0,o.jsx)(tv,{...e}),!!c.checkboxLabel&&(0,o.jsx)(e9.g6,{color:"stone",children:(0,o.jsx)(e8.X,{label:c.checkboxLabel,value:r.sendTexts,onChange:e=>s({...r,sendTexts:e})})})]})]}),(0,o.jsx)(to,{value:n}),(0,o.jsx)(R.t,{value:l,ctasType:c.ctasType,renderCustomFixedWidthWrapper:e=>e})]})},tm=e=>{var t;let[a,i]=e.userName.split(" ");return{emailAddress:e.email,firstName:a,lastName:i,birthdate:null===(t=e.dateOfBirth)||void 0===t?void 0:t.toString()}},tx=e=>{let{config:{checkboxLabel:t,ctas:a,childAppointmentType:i,omitPatientsData:n}}=e,{trackEvent:r,postToAnalyticsService:s}=(0,v.r)(),{origin:d,values:c,widgets:p,updateValues:h,goNext:m}=(0,u.Q)(),{data:x,isFetching:f}=eg({retry:!1,enabled:d===Z.Yi.Web}),y=(0,e_.EE)()||void 0,{patientInfo:b,savePatientInfo:j}=e6(),{appointmentInfo:w}=eQ(),S=eX(),{appointmentId:$,hash:C}=eW(),{storeInfo:k}=eY(),{isLoading:I,error:z,mutateAsync:T}=e$(),{isLoading:D,error:L,mutateAsync:A}=eC(),O=S.includes(i),R=(0,l.useMemo)(()=>(0,tl.E8)(c,p,w,k),[c,p,w,k]),[W,P]=(0,l.useState)(b||(0,tl.hT)(!!t)),B=n||(0,tl._Z)(W),q=(a||[]).map(e=>(0,F.Vk)(e,"eye-exam-book-step",!B||f||I||D));(0,l.useEffect)(()=>{let e=null==x?void 0:x[0];if(e&&!b){let a=(0,tl.hT)(!!t,e,O);P(a)}},[x,O,t,b]);let N=(e,t)=>{h({appointmentId:[e.id],appointmentSummary:[R.summary],appointmentIcalURL:[e.icalURL||""],hash:[e.hash||""]}),r({action:g.ld.EyeExam,label:g.YX.BookEyeExamSuccess,customer:{...tm(W),customer_id:y,customer_email_sha_digest:(0,M.e)(W.email)}}),s({type:"exam-booked",configId:w.configId}),m(t)};return(0,E.SN)("wizard-eye-exam-submit",async e=>{j(W),T({origin:d,storeInfo:k,patientInfo:W,appointmentInfo:w},{onSuccess:t=>N(t,e.next),onError:()=>{r({action:g.ld.EyeExam,label:g.YX.BookEyeExamError})}})},[W,w,d]),(0,E.SN)("wizard-eye-exam-edit",async e=>{$&&A({appointmentId:$,hash:C,origin:d,storeInfo:k,appointmentInfo:w},{onSuccess:t=>{let a=t.intakeResponseSubmitted?e.nextNoIntake:e.nextWithIntake;N(t,a)},onError:()=>{r({action:g.ld.EyeExam,label:g.YX.BookEyeExamError})}})},[W,w,d]),(0,o.jsx)(tg,{widget:e,submitError:z||L,isChild:O,isLoading:f,appointmentSummary:R,activeCtas:q,value:W,onChange:P})};var tf=a(60965),ty=a(21530),tb=a(4926),tj=a(61013),tw=a(89208);let tS=(0,s.zo)(tb.Zb,{width:"100%",height:"auto",padding:"$4",flexDirection:"column",gap:"$3",alignItems:"flex-start",textAlign:"left",variants:{inCarousel:{true:{height:"100%",width:"calc(100% - $space$3)"}}},"@desktop":{padding:"$6"}}),t$=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1"}),tC=(0,s.zo)("div",{color:"$grayscaleStone"}),tk=e=>{let{availability:t}=e;return"today"===t?(0,o.jsx)(tj.N,{color:"blue",children:"Availability today"}):t?(0,o.jsx)(tj.N,{children:(0,o.jsx)(e9.g6,{color:"charcoal",children:"Availability ".concat(t)})}):(0,o.jsx)(tj.N,{color:"outline",children:(0,o.jsx)(e9.g6,{color:"charcoal",children:"No availability"})})},tI=e=>{var t;let{store:a,selected:i,inCarousel:n,onSelect:r}=e,s=(0,l.useMemo)(()=>(0,tw.F)(a.availabilityPerDate),[a.availabilityPerDate]);return(0,o.jsxs)(tS,{selected:i,inCarousel:n,preventHighlightingOnClick:!0,onClick:()=>r(a),children:[(0,o.jsxs)(t$,{children:[(0,o.jsx)(e7.J3,{variant:"lg",children:a.name}),(0,o.jsxs)(tC,{children:[(0,o.jsx)(e7.gi,{variant:"md",tag:"p",children:a.addressDisplay}),(0,o.jsx)(e7.gi,{variant:"md",tag:"p",children:null===(t=a.address)||void 0===t?void 0:t.neighborhood})]}),a.distanceMilesDisplay&&(0,o.jsx)(tC,{children:(0,o.jsxs)(e7.J3,{variant:"md",tag:"p",children:[a.distanceMilesDisplay," miles away"]})})]}),(0,o.jsx)(tk,{availability:s})]})};var tz=a(80650),tE=a(16691);let tT=(0,s.zo)(F.yG,{position:"sticky",bottom:0,gap:0}),tD=(0,s.zo)("div",{height:"$space$6",background:"linear-gradient(0, $grayscaleSilk 0%, rgba(248, 248, 248, 0) 85.71%)","@tablet":{height:"$space$10"},"@desktop":{height:"$space$10"}}),tL=(0,s.zo)("div",{paddingBottom:"$4",background:"$grayscaleSilk"}),tM=(0,s.zo)("div",{marginTop:"$10","@desktop":{marginTop:"$18"}}),tZ=(0,s.zo)(tz.a.CloseButton,{top:"$space$6",right:"$space$6","@mobileOnly":{scale:16/24,height:16}}),tA=e=>{let{isOpen:t,setIsOpen:a,stickyButton:i,trigger:n,onOpenAutoFocus:r,onCloseAutoFocus:l,children:s}=e;return(0,o.jsxs)(tz.a.Root,{isOpen:t,onOpenChange:a,children:[!!n&&(0,o.jsx)(tz.a.Trigger,{children:n}),(0,o.jsxs)(tz.a.Content,{css:{background:"$grayscaleSilk",maxWidth:"888px",borderRadius:"$space$3 $space$3 0 0",top:"initial",height:"calc(100vh - 128px)",overflow:"auto","@desktop":{height:"calc(100vh - 70px)"}},onOpenAutoFocus:r,onCloseAutoFocus:l,children:[(0,o.jsx)(tZ,{}),(0,o.jsx)(tM,{children:s}),i?(0,o.jsxs)(tT,{kind:k.Ig.EyeExam,noBottomPadding:!0,children:[(0,o.jsx)(tD,{}),(0,o.jsx)(tL,{children:(0,o.jsx)(tE.h,{children:i})})]}):null]})]})},tO=(0,s.zo)(F.yG,{gap:"$6",textAlign:"center"}),tR=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1"}),tW={header:{typography:Z.ZT.HeaderSmall,copy:"We can’t use your current location until you give us access"},paragraph:{typography:Z.ZT.ParagraphLarge,copy:"If you want to use your current location to find nearby stores, you need to choose “Allow” when prompted."},ctasType:Z.XD._1Lg,ctas:[{action:{type:"wizard-close-modal"},copy:"Ok, got it",type:Z.g8.LargePill}]},tF=e=>{let{isPreciseLocationRejected:t,config:a}=e,[i,n]=(0,l.useState)(!1),{header:r,paragraph:s,ctas:d,ctasType:c}=(0,l.useMemo)(()=>({...tW,...a}),[a]);return(0,l.useEffect)(()=>{n(t)},[t,n]),(0,E.SN)("wizard-close-modal",()=>{n(!1)},[n]),(0,o.jsx)(tA,{isOpen:i,setIsOpen:n,children:(0,o.jsxs)(tO,{kind:k.Ig.EyeExam,children:[(0,o.jsxs)(tR,{children:[(0,o.jsx)(V.l,{value:r}),(0,o.jsx)(_.Z,{value:s})]}),(0,o.jsx)(R.t,{ctasType:c,value:d,renderCustomFixedWidthWrapper:e=>e})]})})},tP=(0,s.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",gap:"$6"}),tB=(0,s.zo)("div",{width:"100%",display:"flex",flexDirection:"column",gap:"$3"}),tq=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1",textAlign:"center",variants:{isModal:{true:{"@desktop":{textAlign:"left"}}}}}),tN=e=>{let{isModal:t,showStoreUnavailableLabel:a,selectedStoreId:i,selectedLocation:n,searchTerm:r,widgetId:l,config:s,isLoadingLocations:d,isLoadingStores:c,locations:u,stores:p,isLocationsError:h,isStoresError:v,isPreciseLocationRejected:g,refetchLocations:m,refetchStores:x,handleChange:f,handleReset:y,handleSelectChoice:b,handleSelectPreciseLocation:j,handleSelectStore:w}=e,{header:S,preselectedStoreError:$,searchPlaceholder:C,noResultsLabel:I,singleResultLabel:z,singleResultVvtLabel:E,preciseLocationError:D}=s;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tF,{isPreciseLocationRejected:g,config:D}),(0,o.jsxs)(F.yG,{kind:k.Ig.EyeExam,children:[(0,o.jsxs)(tq,{isModal:t,children:[(0,o.jsx)(V.l,{value:S,widgetId:l}),a&&(0,o.jsx)(_.Z,{value:$})]}),(0,o.jsx)(tf.hQ,{textEmpty:"No matches found.",searchTerm:r,label:C,handleChange:f,handleReset:y,handleSelectChoice:b,choices:u,emptyTermChoice:(0,o.jsx)(tf.Th,{copy:s.useCurrentLocationLabel,onClick:j}),loading:d,loadingError:h?"Unable to load locations":"",handleLoadingRetry:m,itemToString:e=>{var t;return(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.fullAddress)||""}}),(0,o.jsx)(T.f,{isLoading:c,children:(0,o.jsx)(tP,{children:v?(0,o.jsx)(ty.M,{isLoading:c,errorCopy:"We couldn’t load the results. Want to try again?",buttonCopy:"Try again",onClick:x}):(0,o.jsxs)(o.Fragment,{children:[!!(null==p?void 0:p.length)&&(0,o.jsx)(tB,{children:null==p?void 0:p.map(e=>(0,o.jsx)(tI,{selected:e.id===i,store:e,onSelect:w},e.id))}),(0,o.jsxs)(tB,{children:[(null==p?void 0:p.length)===0&&(0,o.jsx)(_.Z,{value:I}),(null==p?void 0:p.length)===1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.Z,{value:z}),(null==n?void 0:n.isVvtSupported)&&(0,o.jsx)(_.Z,{value:E})]})]})]})})})]})]})};var tH=a(76427),tV=a.n(tH),t_=a(46346),tY=a(42723),tQ=a(44722),tX=a(65674),tU=a(3086),tG=a(24348),tJ=a(95341),tK=a(73739);let t0=(0,s.zo)(te.h,{width:"100%",height:"100%",justifyContent:"center",cursor:"pointer"}),t1=e=>{let{findStoreText:t,isStandalone:a,onClick:i}=e;return(0,o.jsx)(tJ.Zb,{css:{background:"$grayscaleCharcoal",width:"100%",height:a?"164px":"100%",padding:0},children:(0,o.jsx)(t0,{variant:"lg",color:"white",endIcon:(0,o.jsx)(tK.Z,{}),onClick:i,children:(0,o.jsx)(tY.l,{value:null!=t?t:{copy:"Find a store"}})})})},t5=(0,s.zo)(tX.v,{padding:"6px",margin:"-6px"}),t2=(0,s.zo)(tU.h,{left:"-6px"}),t4=(0,s.zo)(tU.a,{right:"-6px"}),t3=e=>{let{stores:t,findStoreText:a,onSelectStore:i,onFindStoreClick:n}=e,r=(0,tG.H)();return t&&0!==t.length?(0,o.jsxs)(t5,{api:r,renderCenterLeftControls:e=>{let{previousDisabled:t}=e;return t?null:(0,o.jsx)(t2,{onClick:r.prev})},renderCenterRightControls:e=>{let{nextDisabled:t}=e;return t?null:(0,o.jsx)(t4,{onClick:r.next})},children:[t.map(e=>(0,o.jsx)(tI,{store:e,inCarousel:!0,onSelect:()=>i(e)},e.externalId)),(0,o.jsx)(t1,{findStoreText:a,onClick:n})]}):(0,o.jsx)(t1,{findStoreText:a,isStandalone:!0,onClick:n})},t6=(0,s.zo)(tX.v,{padding:"6px",margin:"-6px"}),t7=e=>{let{stores:t,findStoreText:a,onSelectStore:i,onFindStoreClick:n}=e;return t&&0!==t.length?(0,o.jsxs)(t6,{isMobile:!0,children:[t.map(e=>(0,o.jsx)(tI,{store:e,inCarousel:!0,onSelect:()=>i(e)},e.externalId)),(0,o.jsx)(t1,{findStoreText:a,onClick:n})]}):(0,o.jsx)(t1,{findStoreText:a,isStandalone:!0,onClick:n})};var t8=a(35081);let t9=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$3"}),ae="selectedStore",at=e=>{let{widget:t,stores:a}=e,i=(0,I.useRouter)(),{goNext:n}=(0,u.Q)(),{clearStoreInfo:r,updateStoreInfo:s}=eY(),{id:d,config:c}=t,{header:p,paragraph:h,specialText:v,findStoreText:g,ctasType:m,ctas:x,next:f}=c;(0,E.SN)("wizard-next-selected",e=>n(e.next),[]),(0,l.useEffect)(()=>{r(),(0,t8.Q)(i,tV()(i.query,ae))},[]);let y=async e=>{s(e),await(0,t8.Q)(i,{...i.query,[ae]:e.id}),n(f)},b=()=>n(f);return(0,o.jsxs)(F.yG,{kind:k.Ig.EyeExam,children:[(0,o.jsx)(W.W,{id:d,config:{header:p,paragraph:h},isSubLockup:!0,defaultAlignment:Z.H.Center}),(0,o.jsxs)(t9,{children:[v&&(0,o.jsx)(tY.l,{value:v}),(0,o.jsx)(tQ.LN,{targets:["tablet","desktop"],children:(0,o.jsx)(t3,{stores:a,findStoreText:g,onSelectStore:y,onFindStoreClick:b})}),(0,o.jsx)(tQ.LN,{targets:["mobile"],children:(0,o.jsx)(t7,{stores:a,findStoreText:g,onSelectStore:y,onFindStoreClick:b})})]}),(0,o.jsx)(R.t,{value:x,ctasType:m,alignment:Z.H.Center,renderCustomFixedWidthWrapper:e=>e})]})},aa=e=>{var t;let{appointmentTypes:a,children:i,onStoreSelect:n}=e,r=(0,I.useRouter)(),{appointmentId:s}=eW(),d=null!==(t=(0,t_.c)(r.query))&&void 0!==t?t:"",c="string"==typeof r.query[ae]?r.query[ae]:"",u=s?c:d,{data:p,isInitialLoading:h}=(0,e5.md)({storeId:u,appointmentTypes:a,appointmentId:s,showNextAvailableEyeExamTime:!0,startDate:eU.ou.now().toISODate()||""},{enabled:!!u,refetchOnMount:!0,retry:!1});return((0,l.useEffect)(()=>{(null==p?void 0:p.nextAvailableDate)&&n(p),p&&!p.nextAvailableDate&&((0,t8.Q)(r,tV()(r.query,d?"storeId":ae)),n(null))},[p]),u&&(h||(null==p?void 0:p.nextAvailableDate)))?(0,o.jsx)(T.f,{isLoading:!0}):(0,o.jsx)(o.Fragment,{children:i})},ai=e=>{let{id:t,config:a}=e,{next:i}=a,[n,r]=(0,l.useState)(!1),{updateStoreInfo:s}=eY(),{goNext:d}=(0,u.Q)(),{selectedStoreId:c,selectedLocation:p,searchTerm:h,appointmentTypes:m,choices:x,isLoadingLocations:f,isLocationsError:y,isLoadingStores:b,isStoresError:j,isPreciseLocationRejected:w,stores:S,setSelectedStoreId:$,refetchLocations:C,handleRefetchStores:k,handleChange:I,handleSelectChoice:z,handleReset:E,handleSelectPreciseLocation:T}=e4(a),{trackEvent:D}=(0,v.r)(),L=(e,t)=>{$(e.id),s(e),d(i,t),D({action:g.ld.Click,label:"store_".concat(e.id)})},M=e=>{e?L(e,!0):r(!0)};return(0,o.jsx)(aa,{appointmentTypes:m,onStoreSelect:M,children:(0,o.jsx)(tN,{showStoreUnavailableLabel:n,selectedStoreId:c,selectedLocation:p,searchTerm:h,widgetId:t,config:a,locations:x,isLoadingLocations:f,isLoadingStores:b,isLocationsError:y,isStoresError:j,isPreciseLocationRejected:w,refetchLocations:C,refetchStores:k,stores:S,handleChange:I,handleSelectChoice:z,handleReset:E,handleSelectPreciseLocation:T,handleSelectStore:L})})},an=(e,t)=>(0,l.useMemo)(()=>{let a=null==t?void 0:t[e.id];return a&&Object.entries(a).map(e=>{let[t,a]=e;return[eU.ou.fromISO(t),a]})},[t,e.id]),ar=(e,t)=>(0,l.useMemo)(()=>[...Array(t).keys()].map((t,a)=>[e.plus({days:a}),!1]),[e,t]),ao=(e,t)=>{let{config:a}=e,{paragraph:i}=a;return(0,l.useMemo)(()=>({...e,config:{...a,paragraph:{...i,copy:i.copy.replace("%practice_group%",t.practiceGroup)}}}),[e,a,i,t.practiceGroup])};var al=a(91533),as=a(157),ad=a(17313),ac=a(39050),au=a(782);let ap=()=>{var e;let t=(0,l.useRef)(!1),a=(0,l.useRef)(null),[i,n]=(0,l.useState)(!1),[r,o]=(0,l.useState)(!1),s=e=>1-(1-e)**3,d=e=>{let t=Math.round(e);return .05>Math.abs(e-t)?t+1:Math.ceil(e)},c=e=>{let t=Math.round(e);return .05>Math.abs(e-t)?t-1:Math.floor(e)},u=()=>{let e=a.current;if(e&&e.children.length>1){let t=e.children[0],a=e.children[1],i=t.offsetWidth,n=a.getBoundingClientRect().left-t.getBoundingClientRect().right;return[4*(i+n),3*(i+n)+i/2]}return[0,0]},p=(0,l.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.scrollLeft)||0,i=a.current;if(i){let e=i.getBoundingClientRect().width,a=t<i.scrollWidth-e;n(t>0),o(a)}},[a]),h=e=>()=>{if(t.current)return;t.current=!0;let i=a.current;if(i){let[a,n]=u(),r=i.getBoundingClientRect().width,o=i.scrollWidth,l=i.scrollLeft,h=(l-n)/a,v="left"===e?c(h):d(h),g=Math.max(Math.min(v*a+n,o-r),0),m=Math.abs(l-g),x=performance.now(),f=()=>{let a=performance.now()-x,n=s(a/500),r=Math.max(0,Math.min(n,1));i.scrollLeft="left"===e?l-m*r:l+m*r,r<1?requestAnimationFrame(f):t.current=!1};f(),p(g)}},v=()=>{let e=a.current;if(t.current||!e)return;t.current=!0;let i=e.scrollLeft,n=e.scrollLeft,r=performance.now(),o=()=>{let a=performance.now()-r,l=s(a/500),d=Math.max(0,Math.min(l,1));e.scrollLeft=n-i*d,d<1?requestAnimationFrame(o):t.current=!1};o(),p(0)};return(0,l.useEffect)(()=>{let e=()=>p();return p(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[a,p]),{leftScrollEnabled:i,rightScrollEnabled:r,containerRef:a,scroll:h,scrollToStart:v}};var ah=a(15265);let av=e=>{let t=e.toRelativeCalendar();return"today"===t?"Today":"tomorrow"===t?"Tomorrow":e.weekdayShort},ag=(0,l.forwardRef)((e,t)=>{let{date:a,available:i,selected:n,onClick:r}=e,l=(0,ah.Q)(a.day),s=av(a),d=a.toFormat("MMM d'".concat(l,"'"));return(0,o.jsxs)(tb.Zb,{ref:t,ariaLabel:d,selected:n,disabled:!i,onClick:()=>r(a),preventHighlightingOnClick:!0,css:{flexDirection:"column",padding:0,width:"94px",height:"72px",justifyContent:"center","@tablet":{width:"120px",height:"92px"},"@desktop":{width:"120px",height:"92px"}},children:[(0,o.jsx)(e7.J3,{variant:"md",children:s}),(0,o.jsx)(e7.J3,{variant:"md",children:d})]})});ag.displayName="DateCard";var am=a(45037),ax=a(90986),af=a(61826);let ay=(0,s.zo)(am.z,{marginLeft:"$3",marginRight:"$6"}),ab=(0,s.zo)(V.l,{"@desktop":{alignSelf:"flex-start"}}),aj=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$6",padding:"0 $6 $6",alignItems:"center",maxWidth:"660px",margin:"0 auto","@tablet":{padding:"0 0 $6"},"@desktop":{padding:"0 0 $6"}}),aw=(0,s.zo)("div",{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}),aS=(0,s.zo)(al.i,{width:"100%"}),a$=(0,s.zo)(_.Z,{color:"$grayscaleStone",alignSelf:"flex-start"}),aC=e=>[e.month,e.year],ak=(e,t)=>(null==e?void 0:e.year)!==(null==t?void 0:t.year)||(null==e?void 0:e.month)!==(null==t?void 0:t.month)||(null==e?void 0:e.day)!==(null==t?void 0:t.day),aI={header:{color:"charcoal",copy:"Select a date",typography:Z.ZT.HeaderMedium},note:{copy:"Note: Appointment availability for this location has not been listed beyond this point.",color:"stone",typography:Z.ZT.ParagraphMedium},numberOfMonths:3},az=e=>{var t,a,i;let{appointmentTypes:n,config:r,selected:s,storeId:d,onSelect:c}=e,{appointmentId:u}=eW(),{trackEvent:p}=(0,v.r)(),h=()=>{p({action:g.ld.Click,label:g.YX.Calendar})},{header:m,note:x,numberOfMonths:f}=(0,l.useMemo)(()=>({header:{...aI.header,...null==r?void 0:r.header},note:{...aI.note,...null==r?void 0:r.note},numberOfMonths:null!==(t=null==r?void 0:r.numberOfMonths)&&void 0!==t?t:aI.numberOfMonths}),[r]),y=eU.ou.local().startOf("day"),[b,j]=(0,l.useState)(!1),[w,S]=(0,l.useState)(s),[$,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>{S(s)},[s]);let{data:k,isFetching:I,isError:z,refetch:E}=em({storeIds:[d],appointmentTypes:n,appointmentId:u,from:null!==(a=y.toISODate())&&void 0!==a?a:"",to:null!==(i=y.plus({months:f-1}).endOf("month").toISODate())&&void 0!==i?i:""},{enabled:b}),T=(0,l.useMemo)(()=>[...Array(f)].map((e,t)=>aC(0===t?y:y.plus({months:t}))),[y,f]),D=(0,l.useCallback)(e=>{var t;return k&&k[d]&&!(e<y)?!0!==k[d][null!==(t=e.toISODate())&&void 0!==t?t:""]?ax.v.Strikethrough:ax.v.Available:ax.v.Unavailable},[k]),L=()=>{w&&ak(w,s)&&(c(w),C(!0)),j(!1)},M=e=>{$&&e.preventDefault(),C(!1)};return(0,o.jsx)(tA,{isOpen:b,setIsOpen:j,trigger:(0,o.jsx)(ay,{size:"small",color:"clear-smoke",onClick:h,children:"See more dates"}),stickyButton:I||z?null:(0,o.jsx)(am.z,{fullWidth:!0,onClick:L,disabled:!w,children:"Done"}),onCloseAutoFocus:M,children:(0,o.jsxs)(aj,{children:[(0,o.jsx)(ab,{value:m}),I&&!z&&(0,o.jsx)(aw,{children:(0,o.jsx)(af.$,{size:40})}),!I&&!z&&k&&(0,o.jsxs)(o.Fragment,{children:[T.map(e=>{let[t,a]=e;return(0,o.jsx)(ax.f,{month:t,year:a,selected:w,onSelect:S,filter:D},"".concat(t,"-").concat(a))}),(0,o.jsx)(aS,{type:"inset"}),(0,o.jsx)(a$,{value:x})]}),z&&(0,o.jsx)(ty.M,{isLoading:I,errorCopy:"We couldn’t load available dates. Want to try again?",buttonCopy:"Try again",onClick:E})]})})},aE=(0,s.zo)("div",{position:"relative"}),aT=(0,s.zo)("div",{display:"flex",gap:"$3",alignItems:"center",overflow:"auto",padding:"$1 calc((100vw - 100%) / 2)",margin:"-$1 calc((100% - 100vw) / 2)",...au.Y,"@desktop":{overflow:"hidden",padding:"$1 0",margin:"-$1 0"},"> *":{flex:"1 0 auto"},variants:{leftScrollEnabled:{false:{"@desktop":{paddingLeft:"$1",marginLeft:"-$1"}}}}}),aD=(0,s.zo)(ac.Z),aL=(0,s.zo)(ad.h,{position:"absolute",right:"$3",top:"50%",transform:"translateY(-50%)",boxShadow:"$5",["".concat(aD," > path")]:{fill:"$grayscaleStone"}}),aM=(0,s.zo)("div",{position:"absolute",background:"linear-gradient(270deg, #F8F8F8 0%, rgba(248, 248, 248, 0) 100%)",width:"96px",height:"100%",zIndex:1,visibility:"hidden",opacity:0,transition:"$expressiveE5S",variants:{direction:{right:{right:0},left:{transform:"matrix(-1, 0, 0, 1, 0, 0)",left:0}},enabled:{true:{"@desktop":{visibility:"visible",opacity:1}}}}}),aZ=e=>{let{enabled:t,direction:a,onScroll:i}=e;return(0,o.jsx)(aM,{direction:a,enabled:t,children:(0,o.jsx)(aL,{label:a,color:"white",size:"small",onClick:i(a),children:(0,o.jsx)(aD,{})})})},aA=e=>{let{appointmentTypes:t,calendarConfig:a,dates:i,selectedDate:n,storeId:r,onSelectedDateChange:s,onStartDateChange:d}=e,[c,u]=(0,l.useState)(!1),p=(0,l.useCallback)(e=>{c&&e&&(e.focus(),u(!1))},[c]),h=(0,l.useMemo)(()=>{let e=0;return i.map(t=>{let[a,i]=t;return(0,o.jsx)(ag,{date:a,available:i,selected:n===a,onClick:s,...!i||e++?null:{ref:p}},a.toLocaleString())})},[i,n,s,p]),{leftScrollEnabled:v,rightScrollEnabled:g,containerRef:m,scroll:x,scrollToStart:f}=ap(),y=e=>{d(e),s(e),f(),u(!0)};return(0,o.jsxs)(aE,{children:[(0,o.jsx)(aZ,{direction:"left",enabled:v,onScroll:x}),(0,o.jsx)(aZ,{direction:"right",enabled:g,onScroll:x}),(0,o.jsxs)(aT,{ref:m,leftScrollEnabled:v,children:[h,(0,o.jsx)(az,{appointmentTypes:t,selected:n,storeId:r,config:a,onSelect:y})]})]})};function aO(){return(aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var aR=function(e){return l.createElement("svg",aO({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=l.createElement("mask",{id:"shop_svg__a",fill:"#fff"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 19.5V5a.5.5 0 0 0-.5-.5H4a.5.5 0 0 0-.5.5v14.5h17Zm1.5 0V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v14.5h-.25a.75.75 0 0 0 0 1.5h20.5a.75.75 0 0 0 0-1.5H22ZM8.25 7.5H6.5v9h1.75v-9Zm1.5 0v9h1.75v-9H9.75ZM6.5 6A1.5 1.5 0 0 0 5 7.5v9A1.5 1.5 0 0 0 6.5 18h5a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 11.5 6h-5Zm10 3.5v5h1v-5h-1ZM16 8a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1h-2Z"}))),n||(n=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 19.5V5a.5.5 0 0 0-.5-.5H4a.5.5 0 0 0-.5.5v14.5h17Zm1.5 0V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v14.5h-.25a.75.75 0 0 0 0 1.5h20.5a.75.75 0 0 0 0-1.5H22ZM8.25 7.5H6.5v9h1.75v-9Zm1.5 0v9h1.75v-9H9.75ZM6.5 6A1.5 1.5 0 0 0 5 7.5v9A1.5 1.5 0 0 0 6.5 18h5a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 11.5 6h-5Zm10 3.5v5h1v-5h-1ZM16 8a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1h-2Z",fill:"#414B56"})),r||(r=l.createElement("path",{d:"M20.5 19.5v1h1v-1h-1Zm-17 0h-1v1h1v-1Zm18.5 0h-1v1h1v-1Zm-20 0v1h1v-1H2Zm4.5-12v-1h-1v1h1Zm1.75 0h1v-1h-1v1Zm-1.75 9h-1v1h1v-1Zm1.75 0v1h1v-1h-1Zm1.5 0h-1v1h1v-1Zm0-9v-1h-1v1h1Zm1.75 9v1h1v-1h-1Zm0-9h1v-1h-1v1Zm5 7h-1v1h1v-1Zm0-5v-1h-1v1h1Zm1 5v1h1v-1h-1Zm0-5h1v-1h-1v1Zm2-4.5v14.5h2V5h-2Zm.5.5a.5.5 0 0 1-.5-.5h2A1.5 1.5 0 0 0 20 3.5v2Zm-8 0h8v-2h-8v2Zm-8 0h8v-2H4v2Zm.5-.5a.5.5 0 0 1-.5.5v-2A1.5 1.5 0 0 0 2.5 5h2Zm0 14.5V5h-2v14.5h2Zm-1 1h17v-2h-17v2ZM21 5v14.5h2V5h-2Zm-1-1a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3v2Zm-8 0h8V2h-8v2ZM4 4h8V2H4v2ZM3 5a1 1 0 0 1 1-1V2a3 3 0 0 0-3 3h2Zm0 14.5V5H1v14.5h2Zm-1.25 1H2v-2h-.25v2Zm.25-.25a.25.25 0 0 1-.25.25v-2A1.75 1.75 0 0 0 0 20.25h2ZM1.75 20a.25.25 0 0 1 .25.25H0C0 21.216.784 22 1.75 22v-2ZM3 20H1.75v2H3v-2Zm18 0H3v2h18v-2Zm1.25 0H21v2h1.25v-2Zm-.25.25a.25.25 0 0 1 .25-.25v2A1.75 1.75 0 0 0 24 20.25h-2Zm.25.25a.25.25 0 0 1-.25-.25h2a1.75 1.75 0 0 0-1.75-1.75v2Zm-.25 0h.25v-2H22v2ZM6.5 8.5h1.75v-2H6.5v2Zm1 8v-9h-2v9h2Zm.75-1H6.5v2h1.75v-2Zm-1-8v9h2v-9h-2Zm3.5 9v-9h-2v9h2Zm.75-1H9.75v2h1.75v-2Zm-1-8v9h2v-9h-2Zm-.75 1h1.75v-2H9.75v2ZM6 7.5a.5.5 0 0 1 .5-.5V5A2.5 2.5 0 0 0 4 7.5h2Zm0 9v-9H4v9h2Zm.5.5a.5.5 0 0 1-.5-.5H4A2.5 2.5 0 0 0 6.5 19v-2Zm5 0h-5v2h5v-2Zm.5-.5a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm0-9v9h2v-9h-2Zm-.5-.5a.5.5 0 0 1 .5.5h2A2.5 2.5 0 0 0 11.5 5v2Zm-5 0h5V5h-5v2Zm11 7.5v-5h-2v5h2Zm0-1h-1v2h1v-2Zm-1-4v5h2v-5h-2Zm0 1h1v-2h-1v2ZM16 9V7a2 2 0 0 0-2 2h2Zm0 6V9h-2v6h2Zm0 0h-2a2 2 0 0 0 2 2v-2Zm2 0h-2v2h2v-2Zm0 0v2a2 2 0 0 0 2-2h-2Zm0-6v6h2V9h-2Zm0 0h2a2 2 0 0 0-2-2v2Zm-2 0h2V7h-2v2Z",fill:"#676F78",mask:"url(#shop_svg__a)"})))};let aW=(0,s.zo)("div",{width:"100%",display:"flex",alignItems:"center",textAlign:"left",gap:"$2"}),aF=(0,s.zo)(e7.gi,{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),aP=(0,s.zo)(e7.J3,{color:"$coreBluesBlue"}),aB=e=>{let{storeName:t,locationConfig:a,onStoreChange:i}=e,[n,r]=(0,l.useState)(!1),[s,d]=(0,l.useState)(),{trackEvent:c}=(0,v.r)(),{selectedStoreId:u,selectedLocation:p,searchTerm:h,choices:m,isLoadingLocations:x,isLocationsError:f,isLoadingStores:y,isStoresError:b,isPreciseLocationRejected:j,stores:w,setSelectedStoreId:S,refetchLocations:$,handleRefetchStores:C,handleChange:k,handleSelectChoice:I,handleReset:z,handleSelectPreciseLocation:E}=e4(a),T=e=>{r(e),e&&c({action:g.ld.Click,label:g.YX.LocationEdit})},D=e=>{S(e.id),d(e)},L=()=>{s&&i(s)};return(0,o.jsx)(tA,{isOpen:n,setIsOpen:T,trigger:(0,o.jsx)(tb.Zb,{ariaLabel:"Edit: ".concat(t),fullWidth:!0,preventHighlightingOnClick:!0,css:{padding:"18px $4",height:"auto"},children:(0,o.jsxs)(aW,{children:[(0,o.jsx)(aR,{}),(0,o.jsx)(aF,{variant:"lg",tag:"p",children:t}),(0,o.jsx)(aP,{variant:"sm",children:"Edit"})]})}),stickyButton:(0,o.jsx)(am.z,{fullWidth:!0,onClick:L,children:"Done"}),children:(0,o.jsx)(tN,{isModal:!0,selectedStoreId:u,selectedLocation:p,searchTerm:h,config:a,locations:m,isLoadingLocations:x,isLoadingStores:y,isLocationsError:f,isStoresError:b,isPreciseLocationRejected:j,refetchLocations:$,refetchStores:C,stores:w,handleChange:k,handleSelectChoice:I,handleReset:z,handleSelectPreciseLocation:E,handleSelectStore:D})})},aq=(0,l.createContext)(void 0),aN=()=>{let e=(0,l.useContext)(aq);if(void 0===e)throw Error("attempted to call `useApptTypeDetailsContext` without wrapping tree in`ApptTypeDetailsContext.Provider`");return e},aH=(e,t)=>{let a=(0,l.useCallback)((e,a)=>{var i,n;let r=null==t?void 0:null===(i=t.configs)||void 0===i?void 0:i.find(t=>t.id===e.configId);return(null==r?void 0:null===(n=r.options)||void 0===n?void 0:n.includes(a))||!1},[t]),i=(0,l.useMemo)(()=>null!=t&&!!t.timeslots&&!!t.configs&&t.timeslots.some(t=>a(t,e)),[t,e,a]);return{showAppointmentType:i,hasAppointmentType:a}},aV=(0,s.F4)({from:{opacity:0},to:{opacity:1}}),a_=(0,s.F4)({from:{opacity:1},to:{opacity:0}}),aY=(0,s.zo)("div",{width:"100%",display:"grid",gap:"$3",gridTemplateColumns:"1fr 1fr","@tablet":{gridTemplateColumns:"1fr 1fr 1fr"},"@desktop":{gridTemplateColumns:"1fr 1fr 1fr"},variants:{isFetching:{true:{animation:"".concat(a_," $transitions$productiveP15S forwards")},false:{animation:"".concat(aV," $transitions$productiveP15S forwards")}}}}),aQ=e=>{let{isFetching:t,widget:a,timeSlotsConfig:i,onSelect:n}=e,{config:{remoteDoctorConfig:{appointmentType:r,label:s},confirmation:d}}=a,{trackEvent:c}=(0,v.r)(),{setDetails:u,setIsOverlayOpen:p,setSelectedTimeSlot:h}=aN(),[m,x]=(0,l.useState)(i);(0,l.useEffect)(()=>{t||x(i)},[i,t]);let{showAppointmentType:f,hasAppointmentType:y}=aH(r,m),b=(0,l.useMemo)(()=>{var e;return(null==m?void 0:null===(e=m.timeslots)||void 0===e?void 0:e.map(e=>{let t=f&&y(e,r)?s:null;return{timeString:e.startTimeDisplay,appointmentType:t,timeSlot:e}}))||[]},[r,s,f,m,y]),j=e=>{let t=d.find(t=>y(e,t.appointmentType));t?(h(e),u(t),p(!0),c({action:g.ld.View,label:g.YX.TimeConfirmation})):n(e)};return(0,o.jsx)(aY,{isFetching:t,children:b.map(e=>{let{timeString:t,appointmentType:a,timeSlot:i}=e;return(0,o.jsxs)(tb.Zb,{ariaLabel:t,css:{flexDirection:"column",justifyContent:"center",padding:0,height:"70px","@tablet":{height:"72px"},"@desktop":{height:"72px"}},preventHighlightingOnClick:!0,onClick:()=>j(i),children:[(0,o.jsx)(e7.J3,{variant:"lg",children:t}),!!a&&(0,o.jsx)(e7.gi,{variant:"sm",tag:"p",children:a})]},t)})})},aX=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1",textAlign:"center"}),aU=(0,s.zo)("div",{width:"100%",display:"flex",flexDirection:"column",gap:"$4"}),aG=(0,s.zo)(al.i,{width:"100%"}),aJ=(0,s.zo)("div",{span:{...as.c.uiparagraph400,"@desktop":{...as.c.uiparagraph500},span:{fontWeight:600}}}),aK=e=>{let{appointmentTypes:t,calendarConfig:a,dates:i,isFetching:n,isInitialLoading:r,isError:l,locationConfig:s,selectedDate:d,showParagraph:c,showCtas:u,store:p,timeSlotsConfig:h,widget:v,onSelectedDateChange:g,onStartDateChange:m,onStoreChange:x,onTimeSlotSelect:f,refetchTimeSlots:y}=e,{id:b,config:j}=v,{header:w,paragraph:S,ctasType:$,ctas:C}=j;return(0,o.jsxs)(F.yG,{kind:k.Ig.EyeExam,children:[(0,o.jsxs)(aX,{children:[(0,o.jsx)(V.l,{value:w,widgetId:b}),c&&(0,o.jsx)(_.Z,{value:S}),u&&(0,o.jsx)(aJ,{children:(0,o.jsx)(R.t,{ctasType:$,value:C})})]}),(0,o.jsxs)(aU,{children:[(0,o.jsx)(aB,{storeName:p.name,locationConfig:s,onStoreChange:x}),(0,o.jsx)(aA,{appointmentTypes:t,calendarConfig:a,dates:i,selectedDate:d,storeId:p.id,onSelectedDateChange:g,onStartDateChange:m})]}),r&&(0,o.jsx)(T.f,{isLoading:!0}),!r&&!l&&(0,o.jsxs)(o.Fragment,{children:[!!h&&(0,o.jsx)(aG,{type:"inset"}),(0,o.jsx)(aQ,{widget:v,isFetching:n,timeSlotsConfig:h,onSelect:f})]}),l&&(0,o.jsx)(ty.M,{isLoading:r,errorCopy:"We couldn’t load available time slots. Want to try again?",buttonCopy:"Try again",onClick:y})]})};var a0=a(71272),a1=a(18780);let a5=(0,s.zo)(F.yG,{gap:0}),a2=(0,s.zo)(V.l,{marginBottom:"$1",textAlign:"center","@desktop":{textAlign:"initial"}}),a4=(0,s.zo)(_.Z,{marginBottom:"$4",textAlign:"center",color:"$grayscaleStone","@desktop":{marginBottom:"$3",textAlign:"initial"}}),a3=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$4",color:"$grayscaleStone","@desktop":{gap:"$2"}}),a6=(0,s.zo)("div",{display:"flex",gap:"$3"}),a7=(0,s.zo)("div",{width:"$space$6",height:"$space$6",flex:"0 0 auto",alignSelf:"center"}),a8=(0,s.zo)(a0.E,{maxWidth:"unset",width:"400%",height:"400%",transform:"scale(0.25)",transformOrigin:"0 0"}),a9=(0,s.zo)("div",{borderRadius:"$space$3",margin:"$6 0",overflow:"hidden"}),ie=e=>{var t;let{details:a,isOpen:i,setIsOpen:n,onConfirm:r}=e;return(0,E.SN)("wizard-next-selected",r,[r]),(0,E.SN)("wizard-close-modal",()=>n(!1),[n]),(0,o.jsx)(tA,{isOpen:i,setIsOpen:n,children:!!a&&(0,o.jsxs)(a5,{kind:k.Ig.EyeExam,children:[(0,o.jsx)(a2,{value:a.header}),(0,o.jsx)(a4,{value:a.paragraph}),(0,o.jsx)(a3,{children:a.items.map(e=>{let{icon:t,text:a}=e;return(0,o.jsxs)(a6,{children:[(0,o.jsx)(a7,{children:(0,o.jsx)(a8,{src:t,alt:a})}),(0,o.jsx)(e7.gi,{variant:"lg",tag:"p",children:a})]},a)})}),!!(null===(t=a.media)||void 0===t?void 0:t.length)&&(0,o.jsx)(a9,{children:(0,o.jsx)(a1.yV,{media:a.media[0]})}),(0,o.jsx)(R.t,{ctasType:a.ctasType,value:a.ctas,renderCustomFixedWidthWrapper:e=>e})]})})},it=e=>{let{widget:t,children:a,onTimeSlotSelect:i}=e,[n,r]=(0,l.useState)(!1),[s,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),p=(0,l.useCallback)(()=>!!c&&i(c),[c,i]);(0,E.SN)("wizard-eye-exam-open-appt-type-details-modal",e=>{let{appointmentType:a}=e,{config:{apptTypesDetails:i}}=t,n=null==i?void 0:i.find(e=>e.appointmentType===a);n&&(d(n),r(!0))},[t]);let h=(0,l.useMemo)(()=>({setIsOverlayOpen:r,setDetails:d,setSelectedTimeSlot:u}),[r,d,u]);return(0,o.jsxs)(aq.Provider,{value:h,children:[(0,o.jsx)(ie,{isOpen:n,setIsOpen:r,details:s,onConfirm:p}),a]})},ia={useCurrentLocationLabel:"Use my precise location",searchPlaceholder:"Search by city or zip code",header:{typography:Z.ZT.HeaderSmall,copy:"Select a location"},distanceInMiles:50,noResultsLabel:{copy:"There aren’t any eye exam locations within 50 miles. Search another area to find one."},singleResultLabel:{copy:"There aren’t any other eye exam locations within 50 miles. Search another area to find more."},singleResultVvtLabel:{copy:'Need to renew an existing prescription?&nbsp;<a href="https://apps.apple.com/us/app/prescription-check/id1209102842">Download our Virtual Vision Test app</a>.'},preselectedStoreError:{typography:Z.ZT.ParagraphLarge,copy:"The store you selected does not offer your requested exam type. Find another below."}},ii=e=>{let{config:{numberOfDays:t,next:a,showParagraphForPracticeTypes:i,calendarConfig:n,locationConfig:r,remoteDoctorConfig:{appointmentType:s}}}=e,{goNext:d}=(0,u.Q)(),{trackEvent:c}=(0,v.r)(),{updateAppointmentInfo:p}=eQ(),{storeInfo:h,updateStoreInfo:m}=eY(),[x,f]=(0,l.useState)(eU.ou.now().startOf("day")),y=eX(),{appointmentId:b}=eW(),[j,w]=(0,l.useState)(),{data:S}=em({storeIds:[h.id],appointmentTypes:y,appointmentId:b,from:x.toISODate()||"",to:x.plus({days:t}).toISODate()||""},{retry:!1}),{data:$,refetch:C,isFetching:k,isInitialLoading:I,isError:z}=ex({storeId:h.id,appointmentTypes:y,appointmentId:b,date:(null==j?void 0:j.toISODate())||""},{enabled:!!j,keepPreviousData:!0,retry:!1}),E=i.includes(h.providerType),T=ar(x,t),D=an(h,S),L=ao(e,h),M=(0,l.useMemo)(()=>({...ia,...r}),[r]),{showAppointmentType:Z}=aH(s,$);(0,l.useEffect)(()=>{var e;let t=null===(e=null==D?void 0:D.find(e=>{let[,t]=e;return t}))||void 0===e?void 0:e[0];w(t)},[D]);let A=e=>{w(e),c({action:g.ld.Click,label:"date_".concat(e.toISODate())})},O=e=>{let{configId:t="",doctorId:i="",examRoomIndex:n=0,start:r="",end:o="",startTimeDisplay:l="",endTimeDisplay:s=""}=e;p({configId:t,doctorId:i,examRoomIndex:n,startDate:r,endDate:o,startDateDisplay:l,endDateDisplay:s}),c({action:g.ld.Click,label:"time_".concat(r)}),d(a)},R=e=>{f(e),A(e)},W=e=>{m(e),w(void 0),c({action:g.ld.Click,label:"store_".concat(e.id)})};return(0,o.jsx)(it,{widget:e,onTimeSlotSelect:O,children:(0,o.jsx)(aK,{appointmentTypes:y,calendarConfig:n,dates:D||T,isInitialLoading:I,isFetching:k,isError:z,locationConfig:M,selectedDate:j,showParagraph:E,showCtas:Z,store:h,timeSlotsConfig:j?$:void 0,widget:L,onStoreChange:W,onStartDateChange:R,onSelectedDateChange:A,onTimeSlotSelect:O,refetchTimeSlots:C})})};var ir=a(33765),io=a(89839);let il=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1",color:"$grayscaleStone"}),is=e=>{var t,a;let{store:i,date:n}=e,r=eU.ou.fromISO(n),l=i.businessHours[r.weekday],s=(0,ir.m)(l.startTime),d=(0,ir.m)(l.endTime),c=i.mapUrl||(0,io.gl)(i.addressDisplay);return(0,o.jsxs)(il,{children:[(0,o.jsx)(e7.J3,{variant:"lg",children:(0,o.jsx)(e9.g6,{color:"charcoal",children:i.name})}),(null===(t=i.address)||void 0===t?void 0:t.neighborhood)&&(0,o.jsx)(e7.gi,{variant:"md",children:null===(a=i.address)||void 0===a?void 0:a.neighborhood}),(0,o.jsx)(te.h,{href:c,variant:"md",size:{"@initial":200,"@desktop":300},children:i.addressDisplay}),s&&d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e7.gi,{variant:"md",children:"Store hours on the day of your exam:"}),(0,o.jsxs)(e7.gi,{variant:"md",children:[s," — ",d]})]})]})},id=(0,s.zo)("div",{width:"100%",display:"flex",flexDirection:"column",gap:"$1",padding:"$4",background:"$grayscaleWhite",borderRadius:"$space$3",boxShadow:"$2",color:"$grayscaleStone","@desktop":{padding:"$6"}}),ic=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$1"}),iu=(0,s.zo)(al.i,{padding:"10px 0"}),ip=e=>{let{widget:t,appointment:a}=e,{goNext:i}=(0,u.Q)(),{id:n,config:r}=t,{header:l,paragraph:s,ctasType:d,ctas:c}=r;return(0,E.SN)("wizard-next-selected",e=>i(e.next),[]),(0,o.jsxs)(F.yG,{kind:k.Ig.EyeExam,children:[(0,o.jsx)(W.W,{id:n,config:{header:l,paragraph:s},defaultAlignment:Z.H.Center}),(0,o.jsxs)(id,{children:[(0,o.jsx)(ic,{children:(0,o.jsx)(tr,{value:{examType:a.typeDisplay,date:(0,t8.p)(a.start),time:a.timeDisplay}})}),(0,o.jsx)(iu,{type:"width100"}),(0,o.jsx)(is,{store:a.store,date:a.date})]}),(0,o.jsx)(R.t,{value:c,ctasType:d,alignment:Z.H.Center,renderCustomFixedWidthWrapper:e=>e})]})},ih=(0,s.zo)("div",{position:"absolute",left:"50%",transform:"translate(-50%)"}),iv=e=>{let{appointmentId:t,hash:a}=eW(),{data:i,isLoading:n,isError:r,refetch:l}=ef({appointmentId:null!=t?t:"",hash:a});return r?(0,o.jsx)(ty.M,{isLoading:n,errorCopy:"We couldn’t load the appointment. Want to try again?",buttonCopy:"Try again",onClick:l}):n||!i?(0,o.jsx)(ih,{children:(0,o.jsx)(af.$,{})}):(0,o.jsx)(ip,{widget:e,appointment:i})};var ig=a(6817),im=a(40902),ix=a(97119);let iy=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$3"}),ib=(0,s.zo)("div",{width:"100%",display:"flex",flexDirection:"column",gap:"$1",padding:"$4",background:"$grayscaleWhite",border:"1px solid $colors$grayscaleSilver",borderRadius:"$space$3",color:"$grayscaleStone","@desktop":{padding:"$6"}}),ij=(0,s.zo)("div",{display:"flex",alignItems:"center"}),iw=(0,s.zo)(ig.ck,{display:"flex",gap:"$3",alignItems:"start",cursor:"pointer",textAlign:"left","&:svg":{flex:"0 0 20px"},"&:hover":{'[data-radio-piece="indicator"]':{fill:"$grayscaleWhite"},'[data-radio-piece="border"]':{stroke:"$coreBluesBlue"}},"&[data-state='checked']":{'[data-radio-piece="indicator"]':{fill:"$coreBluesBlue"},'[data-radio-piece="border"]':{stroke:"$coreBluesBlue"}},"&[data-state='checked']:hover":{'[data-radio-piece="indicator"]':{fill:"$coreBluesDenim"},'[data-radio-piece="border"]':{stroke:"$coreBluesDenim"}}}),iS=(0,s.zo)(ig.fC,{display:"flex",flexDirection:"column",gap:"$4"}),i$=e=>{let{widget:t,issueText:a,selectedReason:i,onReasonChange:n,setIssueText:r}=e,{id:l,config:s}=t,{header:d,reasons:c,ctasType:u,ctas:p}=s;return(0,o.jsxs)(F.yG,{kind:k.Ig.EyeExam,children:[(0,o.jsx)(W.W,{id:l,config:{header:d},defaultAlignment:Z.H.Center}),(0,o.jsxs)(iy,{children:[(0,o.jsx)(ib,{children:(0,o.jsx)(iS,{value:i,onValueChange:n,children:c.items.map(e=>(0,o.jsxs)(iw,{value:e.copy,children:[(0,o.jsx)(ij,{children:(0,o.jsx)(im.Y,{})}),(0,o.jsx)(_.Z,{value:e})]},e.copy))})}),(0,o.jsx)(ix.K,{fieldLabel:s.reasons.additionalInfoPlaceholder,value:a,onChange:e=>r(e.target.value)})]}),(0,o.jsx)(R.t,{value:p,ctasType:u,alignment:Z.H.Center,renderCustomFixedWidthWrapper:e=>e})]})},iC=e=>{let[t,a]=(0,l.useState)(""),[i,n]=(0,l.useState)(""),{goNext:r}=(0,u.Q)(),{trackEvent:s}=(0,v.r)(),{appointmentId:d,hash:c}=eW(),{mutate:p}=ek();return(0,E.SN)("wizard-next-selected",e=>r(e.next),[]),(0,E.SN)("wizard-eye-exam-cancel",async e=>{d&&p({appointmentId:d,hash:c,reason:t,text:i},{onSuccess:()=>{s({action:g.ld.EyeExam,label:g.YX.CancelEyeExamSuccess}),r(e.next)},onError:()=>{s({action:g.ld.EyeExam,label:g.YX.CancelEyeExamError})}})},[t,i]),(0,o.jsx)(i$,{widget:e,selectedReason:t,issueText:i,setIssueText:n,onReasonChange:a})};var ik=a(2704);let iI=(0,s.zo)("div",{position:"absolute",left:"50%",transform:"translate(-50%)"}),iz=e=>{let{config:t}=e,{serviceUrl:a}=t,{isPreview:i}=(0,h.M)(),n=a;i&&(n="".concat(a.replace("useMyLocation=true","useMyLocation=false").replace("&appointmentId={appointment.id}",""),"&appointmentTypes=GLASSES_ONLY&&latitude=40.7182&longitude=-74.0476"));let{data:r,isLoading:l,isError:s,refetch:d}=(0,ik.V_)(n);return s?(0,o.jsx)(ty.M,{isLoading:l,errorCopy:"We couldn’t load nearby stores. Want to try again?",buttonCopy:"Try again",onClick:d}):l?(0,o.jsx)(iI,{children:(0,o.jsx)(af.$,{})}):(0,o.jsx)(at,{widget:e,stores:null!=r?r:[]})},iE=e=>{let{widget:t}=e,{config:{step:a}}=t,i=(0,eq.r)(t)({"eye-exam-book-step":tx,"eye-exam-location-step":ai,"eye-exam-time-step":ii,"eye-exam-info":iv,"eye-exam-cancel-reason":iC,"eye-exam-cancel-info":iz,"wizard-step-generic":et,"wizard-step-messaging":eB}),{trackEvent:n}=(0,v.r)(),{storeInfo:r,updateStoreInfo:o}=eY(),{appointmentInfo:s,updateAppointmentInfo:d}=eQ(),{appointmentId:c}=eW(),{data:u}=ef({appointmentId:null!=c?c:""},{enabled:!!c}),p=(0,l.useCallback)(()=>{u&&(r.id||o(u.store),s.startDate&&s.endDate||d({...s,startDate:u.start,endDate:u.end}))},[]);return(0,l.useEffect)(()=>{p()},[p]),(0,l.useEffect)(()=>{n({action:g.ld.View,label:a})},[n,a]),(0,eN.xN)(i,t)},iT=(0,s.F4)({from:{opacity:0},to:{opacity:1}}),iD=(0,s.F4)({from:{opacity:1},to:{opacity:0}}),iL=(0,s.F4)({from:{transform:"translateX(-50%)"},to:{transform:"translateX(0)"}}),iM=(0,s.F4)({from:{transform:"translateX(50%)"},to:{transform:"translateX(0)"}}),iZ=(0,s.F4)({from:{transform:"translateX(0)"},to:{transform:"translateX(-50%)"}}),iA=(0,s.F4)({from:{transform:"translateX(0)"},to:{transform:"translateX(50%)"}}),iO=(0,s.zo)("div",{width:"100%",variants:{active:{true:{},false:{}},animation:{enter:{},leave:{}},direction:{leftToRight:{},rightToLeft:{}}},compoundVariants:[{animation:"enter",direction:"leftToRight",active:!0,css:{animation:"".concat(iT," $transitions$expressiveE5S, ").concat(iM," $transitions$expressiveE35S")}},{animation:"leave",direction:"leftToRight",active:!0,css:{animation:"".concat(iD," $transitions$expressiveE5S, ").concat(iZ," $transitions$expressiveE35S")}},{animation:"enter",direction:"rightToLeft",active:!0,css:{animation:"".concat(iT," $transitions$expressiveE5S, ").concat(iL," $transitions$expressiveE35S")}},{animation:"leave",direction:"rightToLeft",active:!0,css:{animation:"".concat(iD," $transitions$expressiveE5S, ").concat(iA," $transitions$expressiveE35S")}}]}),iR=["wizard-step-loading"],iW=e=>{let{children:t}=e,{current:a,transition:i}=(0,u.Q)();return(0,o.jsx)(iO,{active:!iR.includes(a.type),animation:null==i?void 0:i.type,direction:null==i?void 0:i.direction,onAnimationEnd:null==i?void 0:i.onTransitionEnd,children:t})},iF=(0,s.zo)(V.l,{textAlign:"center"}),iP=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$6"}),iB=(0,s.zo)("div",{display:"flex",flexDirection:"column",gap:"$6","@tablet":{gap:"$12"}}),iq=(0,s.zo)("div",{textAlign:"center"}),iN=(0,s.zo)("img",{border:"1px solid $colors$grayscaleSilver",borderRadius:"$space$3",objectFit:"cover",width:80,height:64,"@tablet":{width:88,height:72}}),iH=(0,s.zo)("div",{width:"100%",textAlign:"center",margin:"0 auto","@tablet":{width:"243px"}}),iV=(0,s.zo)("a",{display:"flex",gap:"$3",alignItems:"center",border:"1px solid $colors$grayscaleWhite",borderRadius:"$space$3",backgroundColor:"$colors$grayscaleWhite",padding:"$6",boxShadow:"$shadows$2"}),i_=e=>{let{widget:t,wizardKind:a,submitError:i,isLoading:n}=e,{id:r,config:{header:l,paragraph:s,ctasType:d,documents:c,ctas:u}}=t;return(0,o.jsxs)(F.yG,{kind:a,children:[i?(0,o.jsx)(eT,{}):null,(0,o.jsx)(iF,{value:l,widgetId:r,defaultHeadingLevel:"h1",defaultTypography:Z.ZT.HeaderMedium,defaultColor:Z.Il.Charcoal}),(0,o.jsxs)(iP,{children:[(0,o.jsxs)(iB,{children:[c.map(e=>(0,o.jsxs)(iV,{target:"_blank",href:e.url,children:[(0,o.jsx)(iN,{src:e.imageUrl,alt:e.title}),(0,o.jsx)(e9.g6,{color:"charcoal",children:(0,o.jsx)(e7.J3,{variant:"xl",children:e.title})})]},e.id)),(0,o.jsx)(iq,{children:(0,o.jsx)(_.Z,{defaultColor:"stone",defaultTypography:Z.ZT.ParagraphXl,value:s})})]}),(0,o.jsx)(iH,{children:n?(0,o.jsx)(af.$,{size:34}):(0,o.jsx)(R.t,{value:u,ctasType:d,renderCustomFixedWidthWrapper:e=>e})})]})]})},iY=(e,t)=>{let{appointmentId:a,hash:i,...n}=e,r=Object.entries(n).reduce((e,a)=>{let[i,n]=a;return{...e,[i]:n.map(e=>{var a;return{answerId:e,custom:null===(a=t.find(t=>t.questionId===i&&t.answerId===e))||void 0===a?void 0:a.value}})}},{}),o=t.filter(e=>!e.answerId);return o.forEach(e=>{let t=r[e.questionId]||[];t.push({custom:e.value}),r[e.questionId]=t}),r},iQ=()=>{let{page:e,wizardId:t,values:a,customValues:i}=(0,u.Q)(),{isLoading:n,error:r,mutate:o}=eI(),{appointmentId:l,hash:s}=eW(),d="/appointments/eye-exams/".concat(t,"/intake-form"),c=iY(a,i);return{isLoading:n,error:r,submit:t=>o({appointmentId:null!=l?l:"",hash:null!=s?s:"",pageUrl:d,variantId:e.variantId,answers:c},t)}},iX=e=>{let{isLoading:t,error:a,submit:i}=iQ(),{trackEvent:n}=(0,v.r)(),{goNext:r}=(0,u.Q)();return(0,E.SN)("wizard-intake-form-submit",async e=>i({onSuccess:()=>{n({action:g.ld.IntakeFormSubmit,label:g.YX.IntakeFormSubmitSuccess}),r(e.next)},onError:()=>{n({action:g.ld.IntakeFormSubmit,label:g.YX.IntakeFormSubmitError})}}),[]),(0,o.jsx)(i_,{submitError:a,isLoading:t,widget:e,wizardKind:k.Ig.IntakeForm})},iU=e=>{let{widget:t}=e,{config:{step:a}}=t,i=(0,eq.r)(t)({"wizard-step-generic":et,"wizard-step-messaging":eB,"wizard-review-docs-step":iX}),{trackEvent:n}=(0,v.r)();return(0,l.useEffect)(()=>{n({action:g.ld.View,label:a})},[n,a]),(0,eN.xN)(i,t)},iG=(0,s.zo)(m.f,{display:"flex",position:"fixed",top:"0",left:"0",height:"100%",width:"100%",overflow:"hidden auto",flex:"1 1 auto",flexDirection:"column",alignItems:"center",gap:"$6",transition:"background-color $transitions$productiveP2S","@tablet":{gap:"$12"},variants:{kind:{[k.Ig.EyeExam]:{gap:"$9","@tablet":{gap:"$15"}},[k.Ig.IntakeForm]:{},[k.Ig.Quiz]:{}}}}),iJ=()=>{let{kind:e,current:t,wizardId:a}=(0,u.Q)(),{isPreview:i}=(0,l.useContext)(h.X),{Track:n,trackEvent:r,postToAnalyticsService:s}=(0,v.r)({category:e===k.Ig.Quiz?a:e});return((0,l.useEffect)(()=>{r({action:g.ld.Click,label:g.YX.Start}),e===k.Ig.Quiz&&s({type:"quiz-viewed",quizType:a,quizStep:g.YX.Start})},[e,s,r,a]),t)?(0,o.jsx)(n,{children:(0,o.jsx)(d.K,{widget:t,fallback:i?(0,o.jsx)(p.O,{type:t.type}):(0,o.jsx)(c.n,{}),children:(0,o.jsxs)(iG,{kind:e,backgroundColor:t.config.backgroundColor,meta:t.meta,children:[(0,o.jsx)(C,{}),(0,o.jsxs)(iW,{children:[e===k.Ig.Quiz&&(0,o.jsx)(eV,{widget:t},t.id),e===k.Ig.EyeExam&&(0,o.jsx)(iE,{widget:t},t.id),e===k.Ig.IntakeForm&&(0,o.jsx)(iU,{widget:t},t.id)]})]})})}):null}},77605:function(e,t,a){a.d(t,{L:function(){return j}});var i=a(85893),n=a(67294),r=a(11163),o=a(92280),l=a(3695),s=a(44329),d=a(44415),c=a(77050),u=a(769),p=a(87394);let h=function(e,t,a,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(a.config.step===e)return[...n,a];if((0,u.Js)(a))return g(a,t,e,i,[...n,a]);if((0,u.jg)(a)){let r=[...a.config.ctas||[],...a.config.skipStep?[a.config.skipStep]:[]];return v(t,r,e,i,[...n,a])}return[]},v=(e,t,a,i,n)=>{for(let r=0;r<t.length;r+=1){let{action:o}=t[r];if((null==o?void 0:o.type)==="wizard-next-selected"||(null==o?void 0:o.type)==="wizard-subscribe"||(null==o?void 0:o.type)==="wizard-skip"){let t=e.find(e=>e.config.step===o.next),r=t?h(a,e,t,i,[...n]):[];if(r)return r}}return[]},g=(e,t,a,i,n)=>{if(e.config.multiselect){let r=e.config.cards.some(e=>{var t;return(null===(t=e.answerIds)||void 0===t?void 0:t.length)&&e.answerIds.every(t=>{var a;return null===(a=i[e.questionId])||void 0===a?void 0:a.includes(t)})});if(r&&e.config.ctas){let r=v(t,e.config.ctas,a,i,[...n]);if(r.length)return r}}else for(let r=0;r<e.config.cards.length;r+=1){let{next:o,questionId:l,answerIds:s}=e.config.cards[r],d=t.find(e=>{var t;return(null===(t=e.config)||void 0===t?void 0:t.step)===o}),c=d&&(null==s?void 0:s.length)&&s.every(e=>{var t;return null===(t=i[l])||void 0===t?void 0:t.includes(e)})?h(a,t,d,i,[...n]):[];if(c.length)return c}if(e.config.skipStep){let r=v(t,[e.config.skipStep],a,i,[...n]);if(r.length)return r}return[]},m=e=>Object.entries(e).reduce((e,t)=>{let[a,i]=t;return"string"==typeof i?{...e,[a]:[i]}:Array.isArray(i)?{...e,[a]:i}:e},{}),x=e=>{let{config:{cards:t,customValue:a}}=e,i=(null==a?void 0:a.questionId)?[{questionId:a.questionId,value:""}]:[];return t.reduce((e,t)=>{let{values:a,customValues:i}=e;return{values:{...a,[t.questionId]:[]},customValues:[...i,...t.answerIds.map(e=>({questionId:t.questionId,answerId:e,value:""}))]}},{values:{},customValues:i})},f=e=>(0,u.Js)(e)?x(e):null,y=e=>{let{returnUrl:t,startFrom:a,src:i,wizardId:n,...r}=e;return{startFrom:a,returnUrl:t,src:i,queryParams:r}},b=(e,t)=>e?(0,l.s)(e)?(console.error("Wizard: trying to pass absolute URL: ".concat(e)),t):e:t,j=e=>{let{origin:t,wizardId:a,kind:l,data:v,closable:g=!0,defaultReturnUrl:x="/",children:j}=e,w=(0,r.useRouter)(),{isPreview:S}=(0,s.M)(),{trackEvent:$,postToAnalyticsService:C}=(0,d.r)(),[k,I]=(0,n.useState)(),[z,E]=(0,n.useState)({type:"enter",direction:"leftToRight",onTransitionEnd:()=>void 0}),T=async e=>{let t=()=>{},a=new Promise(e=>{t=e});I({value:e,onTransitionEnd:t}),await a},D=async(e,t)=>{let a=()=>{},i=new Promise(e=>{a=e});E({type:e,direction:t,onTransitionEnd:a}),await i},L=(0,n.useMemo)(()=>(null==v?void 0:v.widgets)||[],[null==v?void 0:v.widgets]),{initialValues:M,initialPath:Z,rootStepWidget:A,closeUrl:O}=(0,n.useMemo)(()=>{let{returnUrl:e,startFrom:t,queryParams:a}=y(w.query),i=L[0],n=m(a),r=[];return i&&(r=t?h(t,L,i,n):[i]),{initialPath:r,initialValues:n,rootStepWidget:i,closeUrl:b(e,x)}},[L]),[R,W]=(0,n.useState)([]),[F,P]=(0,n.useState)(M),[B,q]=(0,n.useState)(Z);(0,n.useEffect)(()=>{S&&q(Z)},[S,Z]);let{current:N,previous:H}=(0,n.useMemo)(()=>({current:B[B.length-1]||A,previous:B[B.length-2]}),[B,A]),V=(0,n.useMemo)(()=>{let e=Object.values(o.Yi).find(e=>e.toLowerCase()===(null==t?void 0:t.toLowerCase()));return e||o.Yi.Web},[t]),_=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||l!==u.Ig.Quiz||C({type:"quiz-option-select",quizType:a,quizStep:c.ld.Select,optionName:Object.keys(e)[0],optionValues:Object.values(e)[0]}),P(t=>({...t,...e}))},[l,C,a]),Y=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||l!==u.Ig.Quiz||C({type:"quiz-option-select",quizType:a,quizStep:c.ld.Select,optionName:e[0].questionId,optionValues:[e[0].value]}),W(t=>[...t.filter(t=>!e.some(e=>e.questionId===t.questionId&&e.answerId===t.answerId)),...e.filter(e=>!!e.value)])},[l,C,a]),Q=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=L.find(t=>t.config.step===e);a&&("progress"in a.config&&T(a.config.progress),await D("leave","leftToRight"),q(e=>[...t?e.slice(0,e.length-1):e,a]),await D("enter","leftToRight"))},[L]),X=(0,n.useCallback)(async e=>{let t=e?B.findIndex(t=>t.config.step===e):B.length-2;if(t>=0){let e=B[t],i=B.slice(t+1,B.length);$({category:l===u.Ig.Quiz?a:l,action:c.ld.Click,label:c.YX.Back}),C({type:"quiz-back",quizType:a,quizStep:c.YX.Back});let{values:n,customValues:r}=i.reduce((e,t)=>{let a=f(t);return{values:{...null==e?void 0:e.values,...null==a?void 0:a.values},customValues:[...(null==e?void 0:e.customValues)||[],...(null==a?void 0:a.customValues)||[]]}},{});_(n,!0),Y(r,!0),"progress"in e.config&&T(e.config.progress),await D("leave","rightToLeft"),q(e=>e.slice(0,t+1)),await D("enter","rightToLeft")}},[l,B,C,$,Y,_,a]),U=(0,n.useCallback)(()=>{O&&!S&&($({category:l===u.Ig.Quiz?a:l,action:c.ld.Click,label:c.YX.Close}),C({type:"quiz-close",quizType:a,quizStep:c.ld.Close}),w.push(decodeURIComponent(O)))},[O,S,l,C,w,$,a]),G=(0,n.useMemo)(()=>({origin:V,wizardId:a,page:v,kind:l,current:N,previous:H,widgets:L,values:F,customValues:R,progress:k,transition:z,updateValues:_,updateCustomValues:Y,goNext:Q,goBack:H?X:void 0,close:g?U:void 0}),[V,a,v,l,N,H,L,F,R,k,z,_,Y,Q,X,g,U]);return(0,i.jsx)(p.k.Provider,{value:G,children:j})}},87394:function(e,t,a){a.d(t,{Q:function(){return r},k:function(){return n}});var i=a(67294);let n=(0,i.createContext)(void 0),r=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("attempted to call `useWizardContext` without wrapping tree in`WizardContext.Provider`");return e}},42243:function(e,t,a){a.d(t,{N:function(){return n}});var i=a(67294);let n=(e,t)=>{let[a,n]=(0,i.useState)(e),r=e=>{n(e)};return(0,i.useEffect)(()=>{let a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[t,e]),{debouncedValue:a,forceSync:r}}},46346:function(e,t,a){a.d(t,{c:function(){return i}});let i=e=>{var t;return"string"==typeof e.storeId?e.storeId:null===(t=e.storeId)||void 0===t?void 0:t.join("/")}},89839:function(e,t,a){a.d(t,{gl:function(){return r},ko:function(){return n},oF:function(){return i}});let i=e=>encodeURI("/retail/".concat(e)),n=e=>encodeURI("/appointments/eye-exams/".concat(e)),r=e=>encodeURI("https://www.google.com/maps/place/".concat(e))},77454:function(e,t,a){a.d(t,{R:function(){return n}});let i={8:"-",13:"-",18:"-",23:"-"},n=()=>{let e=Array.from({length:37},()=>Math.floor(16*Math.random()));return e[14]=4,e[19]=3&e[19]|8,e.reduce((e,t,a)=>"".concat(e).concat(i[a]||"0123456789abcdef"[t]),"")}},92258:function(e,t,a){var i,n,r=a(67294);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",o({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=r.createElement("circle",{cx:8,cy:8,r:8,fill:"#E1E5E6"})),n||(n=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.53 4.47a.75.75 0 0 0-1.06 1.06L6.94 8l-2.47 2.47a.75.75 0 0 0 1.06 1.06L8 9.06l2.47 2.47a.75.75 0 1 0 1.06-1.06L9.06 8l2.47-2.47a.75.75 0 0 0-1.06-1.06L8 6.94 5.53 4.47Z",fill:"#414B56"})))}}}]);