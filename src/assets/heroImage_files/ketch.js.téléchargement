/*! For license information please see ketch.js.LICENSE.txt */
(()=>{var e={1971:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KetchWebAPI=void 0;const i=n(7582);t.KetchWebAPI=class{constructor(e,t){this._baseUrl=e,this._fetch=t||n.g.fetch.bind(window)}getLocation(){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.get("/ip")}))}getBootstrapConfiguration(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.get(`/config/${e.organizationCode}/${e.propertyCode}/boot.json`)}))}getFullConfiguration(e){return i.__awaiter(this,void 0,void 0,(function*(){let t="";return this._baseUrl.includes("web/v3")?(e.environmentCode&&e.jurisdictionCode&&e.languageCode&&(t=`/${e.environmentCode}/${e.jurisdictionCode}/${e.languageCode}`),yield this.get(`/config/${e.organizationCode}/${e.propertyCode}${t}/config.json${e.hash?`?hash=${e.hash}`:""}`)):(e.environmentCode&&e.hash&&e.jurisdictionCode&&e.languageCode&&(t=`/${e.environmentCode}/${e.hash}/${e.jurisdictionCode}/${e.languageCode}`),yield this.get(`/config/${e.organizationCode}/${e.propertyCode}${t}/config.json`))}))}getSubscriptionsConfiguration(e){return i.__awaiter(this,void 0,void 0,(function*(){const{organizationCode:t,propertyCode:n,languageCode:i,experienceCode:o}=e;return yield this.get(`/config/${t}/${n}/${i}/${o}/subscriptions.json`)}))}getConsentConfiguration({organizationCode:e,propertyCode:t,envCode:n,jurisdictionCode:o,langCode:r,hash:s}){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.get(`/config/${e}/${t}/${n}/${o}/${r}/consent.json${s?`?hash=${s}`:""}`)}))}getPreferenceConfiguration({organizationCode:e,propertyCode:t,envCode:n,jurisdictionCode:o,langCode:r,hash:s}){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.get(`/config/${e}/${t}/${n}/${o}/${r}/preference.json${s?`?hash=${s}`:""}`)}))}getConsent(e){return i.__awaiter(this,void 0,void 0,(function*(){try{const t=yield this.post(`/consent/${e.organizationCode}/get`,e);return t&&t.purposes&&Object.keys(t.purposes).length?t:e}catch(t){return e}}))}setConsent(e){return i.__awaiter(this,void 0,void 0,(function*(){try{const t=yield this.post(`/consent/${e.organizationCode}/update`,e);return t&&t.purposes&&Object.keys(t.purposes).length?t:e}catch(t){return e}}))}getSubscriptions(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.post(`/subscriptions/${e.organizationCode}/get`,e)}))}setSubscriptions(e){return i.__awaiter(this,void 0,void 0,(function*(){yield this.post(`/subscriptions/${e.organizationCode}/update`,e)}))}invokeRight(e){return i.__awaiter(this,void 0,void 0,(function*(){return this.post(`/rights/${e.organizationCode}/invoke`,e)}))}preferenceQR(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=new URL(`${this._baseUrl}/qr/${e.organizationCode}/${e.propertyCode}/preferences.png`);e.environmentCode&&t.searchParams.set("env",e.environmentCode),e.imageSize&&t.searchParams.set("size",e.imageSize.toString()),e.path&&t.searchParams.set("path",e.path),e.backgroundColor&&t.searchParams.set("bgcolor",e.backgroundColor),e.foregroundColor&&t.searchParams.set("fgcolor",e.foregroundColor);for(const n of Object.keys(e.parameters))t.searchParams.set(n,e.parameters[n]);return t.toString()}))}webReport(e,t){return i.__awaiter(this,void 0,void 0,(function*(){yield this.post(`/report/${e}`,t)}))}get(e){return i.__awaiter(this,void 0,void 0,(function*(){return this._fetch(this._baseUrl+e,this.fetchOptions("GET")).then((e=>e.json()))}))}post(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const n=yield this._fetch(this._baseUrl+e,this.fetchOptions("POST",t));if(!n.ok)throw new Error(yield n.text());return n.json()}))}fetchOptions(e,t){const n={method:e,mode:"cors",credentials:"omit"},i="application/json";return t?(n.body=JSON.stringify(t),n.headers={Accept:i,"Content-Type":i}):n.headers={Accept:i},n}}},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}_(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&_(e,"error",t,{once:!0})}(e,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function a(e,t,n,i){var o,r,s,a;if(u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,a=d,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(i);return o.listener=n,i.wrapFn=o,o}function f(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function _(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var a=c.length,d=h(c,a);for(n=0;n<a;++n)i(d[n],this,t)}return!0},r.prototype.addListener=function(e,t){return a(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return a(this,e,t,!0)},r.prototype.once=function(e,t){return u(t),this.on(e,l(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,l(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,o,r,s;if(u(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return f(this,e,!0)},r.prototype.rawListeners=function(e){return f(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9746:e=>{function t(e){var t=typeof e;return"object"===t?null===e?"null":function(e){if(Array.isArray(e))return!0;var t=e.length;return"number"==typeof t&&t>-1&&(!t||0 in e&&t-1 in e)}(e)?"array":e.constructor===Object?"pure-object":"object":t}e.exports=function e(n,i){if(n===i)return!0;if(n!=n&&i!=i)return!0;var o=t(n);if(o!==t(i))return!1;if("pure-object"===o){if(n===i)return!0;var r=Object.keys(n),s=Object.keys(i).length;if(r.length!==s)return!1;for(var u=0,c=r.length;u<c;u++){var a=r[u];if(!i.hasOwnProperty(r[u]))return!1;var d=n[a],l=i[a];if(d===n||l===i||d===i||l===n)return d===l;if(!e(d,l))return!1}return!0}if("array"===o){if(n.length!==i.length)return!1;for(var f=0;f<n.length;f++){var p=n[f],h=i[f];if(p===n||h===i||p===i||h===n)return p===h;if(!e(p,h))return!1}return!0}if("object"===o){if(n.valueOf!==Object.prototype.valueOf()&&i.valueOf!==Object.prototype.valueOf())return n.valueOf()===i.valueOf();if(n.toString!==Object.prototype.toString()&&i.toString!==Object.prototype.toString())return n.toString()===i.toString()}return!1}},8127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=(0,n(7040).getLogger)("appDivs");t.default=function(e){var t,n,r;return i.__awaiter(this,void 0,void 0,(function*(){const i=yield e.getConfig();let s=[];o.debug("init",null===(t=i.options)||void 0===t?void 0:t.appDivs);const u=null===(r=null===(n=i.options)||void 0===n?void 0:n.appDivs)||void 0===r?void 0:r.trim();if(null==u?void 0:u.length){const t=u.split(",");e.on("willShowExperience",(()=>{o.debug("willShowExperience");for(const e of t){const t=document.getElementById(e);t&&(o.debug("obscuring",e),s.push({id:e,zIndex:t.style.zIndex}),t.style.zIndex="-1")}})),e.on("hideExperience",(()=>{o.debug("hideExperience");for(const e of s){const t=document.getElementById(e.id);t&&(o.debug("restoring",t.id),t.style.zIndex=e.zIndex)}s=[]}))}}))}},1822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=(0,n(7040).getLogger)("dataLayer");function r(){return window.dataLayer=window.dataLayer||[]}t.default=function(e){return i.__awaiter(this,void 0,void 0,(function*(){e.on("geoip",(e=>{o.info("pushGeoIP",e);const t={event:"ketchGeoip",ip:e.ip,countryCode:e.countryCode,regionCode:e.regionCode};r().push(t)})),e.on("jurisdiction",(e=>{o.info("pushJurisdiction",e);const t={event:"ketchJurisdiction",jurisdictionCode:e};r().push(t)}))}))}},3857:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=i.__importDefault(n(8127)),r=i.__importDefault(n(1822)),s=n(7040),u=n(7808),c=(0,s.getLogger)("ketch");t.default=function(e){return i.__awaiter(this,void 0,void 0,(function*(){return c.info(`version ${u.version}`),Promise.all([(0,o.default)(e),(0,r.default)(e)]).then((()=>{}))}))}},7429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var i=f(n(3990)),o=f(n(8237)),r=f(n(5355)),s=f(n(3764)),u=f(n(6314)),c=f(n(8464)),a=f(n(6435)),d=f(n(4008)),l=f(n(8222));function f(e){return e&&e.__esModule?e:{default:e}}},4163:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,r,s){return i((u=i(i(t,e),i(o,s)))<<(c=r)|u>>>32-c,n);var u,c}function r(e,t,n,i,r,s,u){return o(t&n|~t&i,e,t,r,s,u)}function s(e,t,n,i,r,s,u){return o(t&i|n&~i,e,t,r,s,u)}function u(e,t,n,i,r,s,u){return o(t^n^i,e,t,r,s,u)}function c(e,t,n,i,r,s,u){return o(n^(t|~i),e,t,r,s,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,i="0123456789abcdef";for(let o=0;o<n;o+=8){const n=e[o>>5]>>>o%32&255,r=parseInt(i.charAt(n>>>4&15)+i.charAt(15&n),16);t.push(r)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let o=1732584193,a=-271733879,d=-1732584194,l=271733878;for(let t=0;t<e.length;t+=16){const n=o,f=a,p=d,h=l;o=r(o,a,d,l,e[t],7,-680876936),l=r(l,o,a,d,e[t+1],12,-389564586),d=r(d,l,o,a,e[t+2],17,606105819),a=r(a,d,l,o,e[t+3],22,-1044525330),o=r(o,a,d,l,e[t+4],7,-176418897),l=r(l,o,a,d,e[t+5],12,1200080426),d=r(d,l,o,a,e[t+6],17,-1473231341),a=r(a,d,l,o,e[t+7],22,-45705983),o=r(o,a,d,l,e[t+8],7,1770035416),l=r(l,o,a,d,e[t+9],12,-1958414417),d=r(d,l,o,a,e[t+10],17,-42063),a=r(a,d,l,o,e[t+11],22,-1990404162),o=r(o,a,d,l,e[t+12],7,1804603682),l=r(l,o,a,d,e[t+13],12,-40341101),d=r(d,l,o,a,e[t+14],17,-1502002290),a=r(a,d,l,o,e[t+15],22,1236535329),o=s(o,a,d,l,e[t+1],5,-165796510),l=s(l,o,a,d,e[t+6],9,-1069501632),d=s(d,l,o,a,e[t+11],14,643717713),a=s(a,d,l,o,e[t],20,-373897302),o=s(o,a,d,l,e[t+5],5,-701558691),l=s(l,o,a,d,e[t+10],9,38016083),d=s(d,l,o,a,e[t+15],14,-660478335),a=s(a,d,l,o,e[t+4],20,-405537848),o=s(o,a,d,l,e[t+9],5,568446438),l=s(l,o,a,d,e[t+14],9,-1019803690),d=s(d,l,o,a,e[t+3],14,-187363961),a=s(a,d,l,o,e[t+8],20,1163531501),o=s(o,a,d,l,e[t+13],5,-1444681467),l=s(l,o,a,d,e[t+2],9,-51403784),d=s(d,l,o,a,e[t+7],14,1735328473),a=s(a,d,l,o,e[t+12],20,-1926607734),o=u(o,a,d,l,e[t+5],4,-378558),l=u(l,o,a,d,e[t+8],11,-2022574463),d=u(d,l,o,a,e[t+11],16,1839030562),a=u(a,d,l,o,e[t+14],23,-35309556),o=u(o,a,d,l,e[t+1],4,-1530992060),l=u(l,o,a,d,e[t+4],11,1272893353),d=u(d,l,o,a,e[t+7],16,-155497632),a=u(a,d,l,o,e[t+10],23,-1094730640),o=u(o,a,d,l,e[t+13],4,681279174),l=u(l,o,a,d,e[t],11,-358537222),d=u(d,l,o,a,e[t+3],16,-722521979),a=u(a,d,l,o,e[t+6],23,76029189),o=u(o,a,d,l,e[t+9],4,-640364487),l=u(l,o,a,d,e[t+12],11,-421815835),d=u(d,l,o,a,e[t+15],16,530742520),a=u(a,d,l,o,e[t+2],23,-995338651),o=c(o,a,d,l,e[t],6,-198630844),l=c(l,o,a,d,e[t+7],10,1126891415),d=c(d,l,o,a,e[t+14],15,-1416354905),a=c(a,d,l,o,e[t+5],21,-57434055),o=c(o,a,d,l,e[t+12],6,1700485571),l=c(l,o,a,d,e[t+3],10,-1894986606),d=c(d,l,o,a,e[t+10],15,-1051523),a=c(a,d,l,o,e[t+1],21,-2054922799),o=c(o,a,d,l,e[t+8],6,1873313359),l=c(l,o,a,d,e[t+15],10,-30611744),d=c(d,l,o,a,e[t+6],15,-1560198380),a=c(a,d,l,o,e[t+13],21,1309151649),o=c(o,a,d,l,e[t+4],6,-145523070),l=c(l,o,a,d,e[t+11],10,-1120210379),d=c(d,l,o,a,e[t+2],15,718787259),a=c(a,d,l,o,e[t+9],21,-343485551),o=i(o,n),a=i(a,f),d=i(d,p),l=i(l,h)}return[o,a,d,l]}(function(e){if(0===e.length)return[];const t=8*e.length,i=new Uint32Array(n(t));for(let n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}(e),8*e.length))}},4790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},6314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},8222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(6435))&&i.__esModule?i:{default:i};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},58:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},3319:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)},3757:(e,t)=>{"use strict";function n(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:case 3:return t^n^i;case 2:return t&n^t&i^n&i}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,s=Math.ceil(r/16),u=new Array(s);for(let t=0;t<s;++t){const n=new Uint32Array(16);for(let i=0;i<16;++i)n[i]=e[64*t+4*i]<<24|e[64*t+4*i+1]<<16|e[64*t+4*i+2]<<8|e[64*t+4*i+3];u[t]=n}u[s-1][14]=8*(e.length-1)/Math.pow(2,32),u[s-1][14]=Math.floor(u[s-1][14]),u[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=u[e][t];for(let e=16;e<80;++e)r[e]=i(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let s=o[0],c=o[1],a=o[2],d=o[3],l=o[4];for(let e=0;e<80;++e){const o=Math.floor(e/20),u=i(s,5)+n(o,c,a,d)+l+t[o]+r[e]>>>0;l=d,d=a,a=i(c,30)>>>0,c=s,s=u}o[0]=o[0]+s>>>0,o[1]=o[1]+c>>>0,o[2]=o[2]+a>>>0,o[3]=o[3]+d>>>0,o[4]=o[4]+l>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},4008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var i,o=(i=n(6435))&&i.__esModule?i:{default:i};const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function s(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}t.default=function(e,t=0){const n=s(e,t);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}},3990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(3319))&&i.__esModule?i:{default:i},r=n(4008);let s,u,c=0,a=0;t.default=function(e,t,n){let i=t&&n||0;const d=t||new Array(16);let l=(e=e||{}).node||s,f=void 0!==e.clockseq?e.clockseq:u;if(null==l||null==f){const t=e.random||(e.rng||o.default)();null==l&&(l=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=u=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:a+1;const _=p-c+(h-a)/1e4;if(_<0&&void 0===e.clockseq&&(f=f+1&16383),(_<0||p>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,a=h,u=f,p+=122192928e5;const v=(1e4*(268435455&p)+h)%4294967296;d[i++]=v>>>24&255,d[i++]=v>>>16&255,d[i++]=v>>>8&255,d[i++]=255&v;const g=p/4294967296*1e4&268435455;d[i++]=g>>>8&255,d[i++]=255&g,d[i++]=g>>>24&15|16,d[i++]=g>>>16&255,d[i++]=f>>>8|128,d[i++]=255&f;for(let e=0;e<6;++e)d[i+e]=l[e];return t||(0,r.unsafeStringify)(d)}},8237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7925)),o=r(n(4163));function r(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("v3",48,o.default);t.default=s},7925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function i(e,i,s,u){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=(0,r.default)(i)),16!==(null===(c=i)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(i),a.set(e,i.length),a=n(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,s){u=u||0;for(let e=0;e<16;++e)s[u+e]=a[e];return s}return(0,o.unsafeStringify)(a)}try{i.name=e}catch(e){}return i.DNS=s,i.URL=u,i};var i,o=n(4008),r=(i=n(8222))&&i.__esModule?i:{default:i};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const u="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=u},5355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(4790)),o=s(n(3319)),r=n(4008);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(i.default.randomUUID&&!t&&!e)return i.default.randomUUID();const s=(e=e||{}).random||(e.rng||o.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return(0,r.unsafeStringify)(s)}},3764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7925)),o=r(n(3757));function r(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("v5",80,o.default);t.default=s},6435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(58))&&i.__esModule?i:{default:i};t.default=function(e){return"string"==typeof e&&o.default.test(e)}},8464:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(6435))&&i.__esModule?i:{default:i};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},4404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Future=void 0;const i=n(7582),o=n(7187),r=i.__importDefault(n(9746));class s{constructor(e={}){this._options=e,this._value=void 0,this._error=void 0,this._emitter=new o.EventEmitter,e.maxListeners&&this.setMaxListeners(e.maxListeners),e.executor&&this.fulfill(e.executor),this._options.timeout?this._timeout=window.setTimeout((()=>{void 0===this._value&&void 0===this._error&&(this.error=new Error("timed out"))}),this._options.timeout):this._timeout=void 0}static resolve(e){return(new s).fulfill(e)}fulfill(e){return function(e){return"function"==typeof e}(e)?new Promise(e).then((e=>this.value=e)).catch((e=>this.error=e)):this.value=e,this}isFulfilled(){return void 0!==this._value}get fulfilled(){return void 0!==this._value?Promise.resolve(this._value):new Promise(((e,t)=>{this.once(s.FULFILLED,e),this.once(s.ERROR,t)}))}get value(){if(void 0!==this._error)throw this._error;if(void 0===this._value)throw new Error("future has not been resolved");return this._value}set value(e){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=void 0),this._error=void 0,void 0!==this._value&&(0,r.default)(this._value,e)||(this._value=e,this._emitter.emit(s.FULFILLED,e),this._options.name&&this._options.emitter&&this._options.emitter.emit(this._options.name,e))}reset(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=void 0);const e=this._value;this._value=void 0,this._error=void 0,this._emitter.emit(s.RESET,e),this._options.name&&this._options.emitter&&this._options.emitter.emit(this._options.name,void 0)}get error(){return this._error}set error(e){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=void 0),this._error=e,this._value=void 0,void 0!==e&&this._emitter.emit(s.ERROR,e)}addListener(e,t){return this._emitter.addListener(e,t),this.trigger(e,t),this}on(e,t){return this.addListener(e,t)}once(e,t){return this.trigger(e,t)||this._emitter.once(e,t),this}removeListener(e,t){return this._emitter.removeListener(e,t),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return this._emitter.removeAllListeners(e),this}setMaxListeners(e){return this._emitter.setMaxListeners(e),this}then(e,t){return this.fulfilled.then(e,t)}catch(e){return this.fulfilled.catch(e)}trigger(e,t){return e===s.FULFILLED&&this.isFulfilled()?(t(this._value),!0):e===s.ERROR&&void 0!==this._error&&(t(this._error),!0)}}s.FULFILLED="fulfilled",s.RESET="reset",s.ERROR="error",t.Future=s,t.default=s},6428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=n(1815),r=n(744);t.default=class{constructor(e=window,t=r.DEFAULT_TTL){this._window=e,this._ttl=t}getItem(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=(0,o.getCookie)(this._window,e);if(t)try{return JSON.parse(atob(t))}catch(e){return}}))}setItem(e,t){return i.__awaiter(this,void 0,void 0,(function*(){return!!(0,o.setCookie)(this._window,e,btoa(JSON.stringify(t)),this._ttl)&&this.getItem(e).then((e=>!!e))}))}removeItem(e){return i.__awaiter(this,void 0,void 0,(function*(){return(0,o.setCookie)(this._window,e,"",-86400),this.getItem(e).then((e=>!e))}))}}},4458:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetaCacher=t.WebStorageCacher=t.CookieCacher=t.getDefaultCacher=void 0;const i=n(7582),o=i.__importDefault(n(6428));t.CookieCacher=o.default;const r=i.__importDefault(n(9912));t.WebStorageCacher=r.default;const s=i.__importDefault(n(1877));t.MetaCacher=s.default;const u=n(744);t.getDefaultCacher=function(e={}){var t,n;const i=null!==(t=e.window)&&void 0!==t?t:window,c=null!==(n=e.ttl)&&void 0!==n?n:u.DEFAULT_TTL;return new s.default(new o.default(i,c),new r.default(i.localStorage,c),new r.default(i.sessionStorage,c))}},1877:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582);t.default=class{constructor(...e){this._cachers=e}getItem(e){return i.__awaiter(this,void 0,void 0,(function*(){for(const t of this._cachers){const n=yield t.getItem(e);if(n)return n}}))}setItem(e,t){return i.__awaiter(this,void 0,void 0,(function*(){for(const n of this._cachers)if(yield n.setItem(e,t))return!0;return!1}))}removeItem(e){return i.__awaiter(this,void 0,void 0,(function*(){for(const t of this._cachers)if(yield t.removeItem(e))return!0;return!1}))}}},744:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TTL=void 0,t.DEFAULT_TTL=604800},9912:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=n(744);t.default=class{constructor(e=window.localStorage,t=o.DEFAULT_TTL){this._storage=e,this._ttl=t}getItem(e){return i.__awaiter(this,void 0,void 0,(function*(){try{const n=function(e,t){const n=e.getItem(`${t}_metadata`);if(n)return JSON.parse(atob(n))}(this._storage,e);if(!(n&&(t=n,t.iat<=Math.floor(Date.now()/1e3))))return;if(function(e){return e.exp<Math.floor(Date.now()/1e3)}(n))return void(yield this.removeItem(e));const i=this._storage.getItem(e);return i?JSON.parse(atob(i)):void 0}catch(e){return}var t}))}setItem(e,t){return i.__awaiter(this,void 0,void 0,(function*(){try{!function(e,t,n){e.setItem(`${t}_metadata`,btoa(JSON.stringify(n)))}(this._storage,e,function(e){const t=Math.floor(Date.now()/1e3);return{iat:t,exp:t+e}}(this._ttl));const n=btoa(JSON.stringify(t));return this._storage.setItem(e,n),n===this._storage.getItem(e)}catch(e){return!1}}))}removeItem(e){return i.__awaiter(this,void 0,void 0,(function*(){try{return function(e,t){e.removeItem(t)}(this._storage,e),this._storage.removeItem(e),!this._storage.getItem(e)}catch(e){return!1}}))}}},1815:(e,t)=>{"use strict";function n(e,t){return e.document.cookie.split("; ").reduce(((e,n)=>{const i=n.split("=");return i[0]===t?decodeURIComponent(i[1]):e}),"")}Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=t.getCookie=void 0,t.getCookie=n,t.setCookie=function(e,t,i,o){const r=e.document.location.hostname.split("."),s=[`${t}=${encodeURIComponent(i)}`,"path=/","SameSite=None","Secure"];if(o){const e=new Date(Date.now()+1e3*o).toUTCString();s.push(`expires=${e}`)}const u=s.join("; ");for(let o=2;o<=r.length;o++)if(e.document.cookie=`${u}; domain=${r.slice(-1*o).join(".")}`,n(e,t)===i)return!0;return e.document.cookie=u,!!n(e,t)}},4040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.map((e=>{try{return window.atob(decodeURIComponent(e))}catch(t){return e}}))}},9467:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encoding=void 0;const i=n(7582).__importDefault(n(4040));t.encoding=i.default},3235:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=n(1663),r=i.__importDefault(n(6156));t.default=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){if(!e||0===t.length)return[];const n=(0,o.getCookie)(e,t);return n&&"0"!==n?[n]:(0,r.default)(e,`ketch_${t}`)}))}},9398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=t.getCookie=t.fetcher=void 0;const i=n(7582).__importDefault(n(3235));t.fetcher=i.default;const o=n(1663);Object.defineProperty(t,"getCookie",{enumerable:!0,get:function(){return o.getCookie}}),Object.defineProperty(t,"setCookie",{enumerable:!0,get:function(){return o.setCookie}})},1663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=t.getCookie=void 0;const i=n(1815);Object.defineProperty(t,"getCookie",{enumerable:!0,get:function(){return i.getCookie}}),t.setCookie=function(e,t,n,o){(0,i.setCookie)(e,t,n,o?86400*o:o)}},2294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582);t.default=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){if(!e||!e.dataLayer||0===t.length)return[];let n=[];for(const i of e.dataLayer)if(Object.prototype.hasOwnProperty.call(i,t)){const e=i[t];e&&"0"!==e&&(n=n.concat(e))}return n}))}},6087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetcher=void 0;const i=n(7582).__importDefault(n(2294));t.fetcher=i.default},1736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.semicolonStructure=t.queryStructure=t.jwtStructure=t.jsonStructure=t.stringStructure=t.managedFetcher=t.queryStringFetcher=t.sessionStorageFetcher=t.localStorageFetcher=t.windowFetcher=t.dataLayerFetcher=t.setCookie=t.getCookie=t.cookieFetcher=void 0;const i=n(7582),o=n(9398);Object.defineProperty(t,"cookieFetcher",{enumerable:!0,get:function(){return o.fetcher}}),Object.defineProperty(t,"getCookie",{enumerable:!0,get:function(){return o.getCookie}}),Object.defineProperty(t,"setCookie",{enumerable:!0,get:function(){return o.setCookie}});const r=n(6087);Object.defineProperty(t,"dataLayerFetcher",{enumerable:!0,get:function(){return r.fetcher}});const s=n(9011);Object.defineProperty(t,"windowFetcher",{enumerable:!0,get:function(){return s.fetcher}});const u=n(624);Object.defineProperty(t,"localStorageFetcher",{enumerable:!0,get:function(){return u.fetcher}});const c=n(6279);Object.defineProperty(t,"sessionStorageFetcher",{enumerable:!0,get:function(){return c.fetcher}});const a=n(9312);Object.defineProperty(t,"queryStringFetcher",{enumerable:!0,get:function(){return a.fetcher}});const d=n(9480);Object.defineProperty(t,"managedFetcher",{enumerable:!0,get:function(){return d.fetcher}});const l=n(1198);Object.defineProperty(t,"stringStructure",{enumerable:!0,get:function(){return l.structure}});const f=n(7636);Object.defineProperty(t,"jsonStructure",{enumerable:!0,get:function(){return f.structure}});const p=n(1224);Object.defineProperty(t,"jwtStructure",{enumerable:!0,get:function(){return p.structure}});const h=n(9312);Object.defineProperty(t,"queryStructure",{enumerable:!0,get:function(){return h.structure}});const _=n(9444);Object.defineProperty(t,"semicolonStructure",{enumerable:!0,get:function(){return _.structure}});const v=i.__importDefault(n(8751));t.default=v.default},7636:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structure=void 0;const i=n(7582).__importDefault(n(4839));t.structure=i.default},4839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("object"==typeof e&&!Array.isArray(e)&&null!==e)return e;const t=JSON.parse(e);return"object"!=typeof t||Array.isArray(t)||null===t?{value:t}:t}},1224:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structure=void 0;const i=n(7582).__importDefault(n(2052));t.structure=i.default},2052:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.split(".")[1],n=atob(t);return JSON.parse(n)}},7233:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4118);t.default=(0,i.fetcher)("localStorage")},624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetcher=void 0;const i=n(7582).__importDefault(n(7233));t.fetcher=i.default},4642:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=n(1815),r=n(7429);t.default=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){if(!e||0===t.length)return[];t="_swb";let n=(0,o.getCookie)(e,t);return n?[n]:((0,o.setCookie)(e,t,(0,r.v4)(),63072e3),n=(0,o.getCookie)(e,t),n?[n]:[])}))}},9480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetcher=void 0;const i=n(7582).__importDefault(n(4642));t.fetcher=i.default},435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},7603:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encoding=void 0;const i=n(7582).__importDefault(n(435));t.encoding=i.default},6156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582);t.default=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){return e&&e.location&&0!==e.location.search.length&&0!==t.length?new URLSearchParams(e.location.search).getAll(t).filter((e=>"0"!==e)):[]}))}},9312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structure=t.fetcher=void 0;const i=n(7582),o=i.__importDefault(n(6156));t.fetcher=o.default;const r=i.__importDefault(n(57));t.structure=r.default},57:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t={};for(const[n,i]of new URLSearchParams(e).entries())t[n]=i;return t}},9444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structure=void 0;const i=n(7582).__importDefault(n(859));t.structure=i.default},859:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.split(";").map((e=>e.trim().split("="))),n={};for(const[e,i]of t)n[decodeURIComponent(e)]=decodeURIComponent(i);return n}},5188:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4118);t.default=(0,i.fetcher)("sessionStorage")},6279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetcher=void 0;const i=n(7582).__importDefault(n(5188));t.fetcher=i.default},1188:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582);t.default=function(e){return function(t,n){return i.__awaiter(this,void 0,void 0,(function*(){if(!t||0===n.length)return[];try{const i=("localStorage"===e?t.localStorage:t.sessionStorage).getItem(n);return i&&"0"!==i?[i]:[]}catch(e){return[]}}))}}},4118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetcher=void 0;const i=n(7582).__importDefault(n(1188));t.fetcher=i.default},1198:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structure=void 0;const i=n(7582).__importDefault(n(1961));t.structure=i.default},1961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{value:e}}},8751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=n(7187),r=n(5752),s=n(9398),u=n(6087),c=n(9011),a=n(624),d=n(6279),l=n(9312),f=n(9480),p=n(1198),h=n(7636),_=n(1224),v=n(9312),g=n(9444),E=n(9467),y=n(7603),m=i.__importDefault(n(9746)),C=(0,n(7040).getLogger)("identity");t.default=class{constructor(e,t={}){this._emitter=new o.EventEmitter,this._w=e,this._listenerOptions=t,this._fetchers=new Map,this._identities={}}add(e,t){let n,i;if("function"==typeof t)return void this._fetchers.set(e,(()=>t()));switch(t.format){case r.IdentityFormat.IDENTITY_FORMAT_JSON:n=h.structure;break;case r.IdentityFormat.IDENTITY_FORMAT_JWT:n=_.structure;break;case r.IdentityFormat.IDENTITY_FORMAT_QUERY:n=v.structure;break;case r.IdentityFormat.IDENTITY_FORMAT_SEMICOLON:n=g.structure;break;default:n=p.structure}const o=t.key||"value";switch(i=t.encoding===r.IdentityEncoding.IDENTITY_ENCODING_BASE64?E.encoding:y.encoding,t.type){case r.IdentityType.IDENTITY_TYPE_COOKIE:this._fetchers.set(e,(e=>(0,s.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;case r.IdentityType.IDENTITY_TYPE_DATA_LAYER:this._fetchers.set(e,(e=>(0,u.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;case r.IdentityType.IDENTITY_TYPE_WINDOW:this._fetchers.set(e,(e=>(0,c.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;case r.IdentityType.IDENTITY_TYPE_LOCAL_STORAGE:this._fetchers.set(e,(e=>(0,a.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;case r.IdentityType.IDENTITY_TYPE_SESSION_STORAGE:this._fetchers.set(e,(e=>(0,d.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;case r.IdentityType.IDENTITY_TYPE_QUERY_STRING:this._fetchers.set(e,(e=>(0,l.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;case r.IdentityType.IDENTITY_TYPE_MANAGED:this._fetchers.set(e,(e=>(0,f.fetcher)(e,t.variable).then((e=>i(e).map(n).map((e=>String(e[o])))))));break;default:throw new Error(`unsupported identity type ${t.type} for ${e}`)}}start(){return i.__awaiter(this,void 0,void 0,(function*(){if(!this._intervalId)return this._listenerOptions.interval&&(this._intervalId=this._w.setInterval(this.notify.bind(this),this._listenerOptions.interval),this._listenerOptions.timeout&&this._w.setTimeout(this.stop.bind(this),this._listenerOptions.timeout)),this.notify()}))}stop(){this._intervalId&&(this._w.clearInterval(this._intervalId),this._intervalId=void 0)}notify(){return i.__awaiter(this,void 0,void 0,(function*(){const e={};for(const[t,n]of this._fetchers.entries())try{const i=yield n(this._w);for(const n of i)e[t]=n}catch(e){C.warn(`failed to fetch identity for ${t}: ${e}`)}(0,m.default)(e,this._identities)||(this._emitter.emit("identity",e),this._identities=e)}))}addListener(e,t){return this.on(e,t)}on(e,t){return this._emitter.on(e,t),this}once(e,t){return this._emitter.once(e,t),this}removeListener(e,t){return this.off(e,t)}off(e,t){return this._emitter.off(e,t),this}removeAllListeners(e){return this._emitter.removeAllListeners(e),this}}},4072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582);t.default=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){if(!e||0===t.length)return[];try{const n=function(e,t){const n=t.split(".");let i=e,o=null;for(;n.length>0;)if("window"===n[0])n.shift();else if("object"==typeof i)"()"===n[0].slice(-2)?(o=i,i=i[n[0].slice(0,-2)]):(o=i,i=i[n.shift()]);else{if("function"!=typeof i)return null;{const e=i.call(o);o=i,i=e,n.shift()}}return i&&"string"!=typeof i&&(i=i.toString(),i.startsWith("[object"))?"":i}(e,t);return n&&"0"!==n?[n]:[]}catch(e){return[]}}))}},9011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetcher=void 0;const i=n(7582).__importDefault(n(4072));t.fetcher=i.default},7040:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLogLevel=t.getLogger=t.wrapLogger=t.getParams=t.DEFAULT_LOG_LEVEL=void 0;const o=i(n(8200));t.DEFAULT_LOG_LEVEL="warn";const r={trace:1,debug:2,info:3,warn:4,error:5,log:6},s=()=>{};function u(e=window.location.search,t=["ketch_","swb_"]){return new o.default(e,t)}function c(e,t){const n=`[${t}]`;return{trace:(...t)=>{e.trace(n,...t)},debug:(...t)=>{e.debug(n,...t)},info:(...t)=>{e.info(n,...t)},log:(...t)=>{e.log(n,...t)},warn:(...t)=>{e.warn(n,...t)},error:(...t)=>{e.error(n,...t)}}}function a(e=u()){const n=e.get("log");if(n&&n.length){const e=n.toLowerCase();if(e&&r[e])return e}else if(e.has("debug"))return"debug";return t.DEFAULT_LOG_LEVEL}t.getParams=u,t.wrapLogger=c,t.getLogger=function(e,t=a(u())){const i={log:n.g.console.log,error:n.g.console.error};t=t.toString().toLowerCase();for(const e of Object.keys(r))i[e]="log"===e||r[e]>=r[t]?"error"===e?i.error:i.log:s;return c(i,e)},t.getLogLevel=a},8200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends URLSearchParams{constructor(e,t){super(e),this._prefixes=t}delete(e){for(const t of this._prefixes)super.delete(`${t}${e}`)}get(e){for(const t of this._prefixes){const n=super.get(`${t}${e}`);if(n)return n}return null}getAll(e){for(const t of this._prefixes)if(super.has(`${t}${e}`))return super.getAll(`${t}${e}`);return[]}has(e){for(const t of this._prefixes)if(super.has(`${t}${e}`))return!0;return!1}}t.default=n},7865:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=i.__importDefault(n(9440)),r=i.__importDefault(n(5274)),s=n(1971),u=i.__importDefault(n(1911)),c=i.__importDefault(n(737)),a=n(5574),d=i.__importDefault(n(6100)),l=i.__importDefault(n(7218)),f=n(7040),p=n(2315);t.default=class{constructor(e){this._config=e,this._api=new s.KetchWebAPI((0,l.default)(this._config))}build(){var e,t,n,s;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,f.wrapLogger)(o.default,"build");if(i.info(this._config),!this._config||!this._config.organization)throw r.default.invalidConfigurationError;const d=c.default.get(u.default.EXPERIENCE_VERSION);if(d){let e="";if(this._config.scripts)for(let t=0;t<this._config.scripts.length;t++)this._config.scripts[t].includes("lanyard")&&(e=this._config.scripts[t]);let t=!1;if(e.includes("/v1/")&&"new"===d?(e=e.replace("/v1/","/v2/"),t=!0):e.includes("/v2/")&&"old"===d&&(e=e.replace("/v2/","/v1/"),t=!0),t){const t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.defer=n.async=!0,n.src=e,t.appendChild(n)}}const p=this.formatLanguage(new URLSearchParams(window.location.search).get(u.default.LANGUAGE)||c.default.get(u.default.LANGUAGE)||document.documentElement.lang||document.documentElement.getAttribute("xml:lang")||window.navigator.language||this._config.language||"en");if((null===(e=this._config.property)||void 0===e?void 0:e.code)&&(null===(t=this._config.environment)||void 0===t?void 0:t.code)&&(null===(n=this._config.jurisdiction)||void 0===n?void 0:n.code)&&this._config.language===p){i.debug("full configuration");const e=new a.Ketch(this._api,this._config);return yield e.setEnvironment(this._config.environment),yield e.setJurisdiction(this._config.jurisdiction.code),e}const h=yield this.buildEnvironment();let _,v=c.default.get(u.default.REGION);v||(_=yield this.buildGeoIP(),v=yield this.buildRegionInfo(_));const g=yield this.buildJurisdiction(v);i.info("loadConfig",h,g,p);const E={organizationCode:this._config.organization.code,propertyCode:(null===(s=this._config.property)||void 0===s?void 0:s.code)||"",environmentCode:h.code,hash:h.hash||"",languageCode:p,jurisdictionCode:g},y=yield this._api.getFullConfiguration(E);d&&y.services&&(y.services[u.default.API_SERVER]=(0,l.default)(this._config));const m=new a.Ketch(this._api,y);return yield m.setEnvironment(h),_&&(yield m.setGeoIP(_)),yield m.setRegionInfo(v),yield m.setJurisdiction(g),yield this.setupTelemetry(m,y,{region:v}),m}))}setupTelemetry(e,t,n){var r,s,u,c,a,d,l,f;return i.__awaiter(this,void 0,void 0,(function*(){if(!t.services||!t.services.telemetry||""===t.services.telemetry)return!1;const h=parseFloat((null===(r=t.options)||void 0===r?void 0:r.beaconPercentage)||"1");let _=Math.random()<h;if(!_)return!1;const v={organizationCode:null!==(s=t.organization.code)&&void 0!==s?s:"",propertyCode:null!==(c=null===(u=t.property)||void 0===u?void 0:u.code)&&void 0!==c?c:"",environmentCode:null!==(d=null===(a=t.environment)||void 0===a?void 0:a.code)&&void 0!==d?d:"",jurisdictionCode:null!==(f=null===(l=t.jurisdiction)||void 0===l?void 0:l.code)&&void 0!==f?f:"",purposes:{},identities:{}},g=yield(0,p.getCachedConsent)(v,this._config),E=!!(g.collectedAt&&g.collectedAt>0);return document.addEventListener("visibilitychange",(()=>i.__awaiter(this,void 0,void 0,(function*(){var i;if("hidden"===document.visibilityState&&_){_=!1;const r=yield e.getIdentities(),s=this.collectTelemetry(E,t,n,r);try{navigator.sendBeacon(`${null===(i=t.services)||void 0===i?void 0:i.telemetry}?${s.toString()}`)}catch(e){o.default.debug("telemetry error",e)}}})))),!0}))}collectTelemetry(e,t,n,i){var o,r,s,u;const c=new URLSearchParams,a=`${window.location.protocol}//${window.location.host}${window.location.pathname}`;c.append("hasConsent",`${e}`),c.append("url",a),c.append("property",(null===(o=t.property)||void 0===o?void 0:o.code)||""),c.append("environment",(null===(r=t.environment)||void 0===r?void 0:r.code)||""),c.append("jurisdiction",(null===(s=t.jurisdiction)||void 0===s?void 0:s.code)||""),c.append("tenant",t.organization.code),c.append("dver",`${null===(u=t.deployment)||void 0===u?void 0:u.version}`),c.append("ids",window.btoa(JSON.stringify(i)));for(const[e,t]of Object.entries(n))c.append(e,t);return c}buildEnvironment(){return i.__awaiter(this,void 0,void 0,(function*(){const e=(0,f.wrapLogger)(o.default,"buildEnvironment");if(this._config.environment)return e.trace(this._config.environment),this._config.environment;if(!this._config.environments||0===this._config.environments.length)throw e.trace("no environments"),r.default.noEnvironmentError;const t=c.default.get(u.default.ENV);if(t){for(let n=0;n<this._config.environments.length;n++){const i=this._config.environments[n];if(i&&t&&i.code===t)return e.debug("found",i),i}throw e.trace("unknown environment"),r.default.noEnvironmentError}let n={};for(let e=0;e<this._config.environments.length;e++){const t=this._config.environments[e],i=atob(t.pattern||"");i&&new RegExp(i).test(window.document.location.href)&&(!n.pattern||i.length>atob(n.pattern).length)&&(n=t)}if(n.pattern)return e.debug("matched",n),n;for(let t=0;t<this._config.environments.length;t++){const n=this._config.environments[t];if(n.code===u.default.PRODUCTION)return e.debug(n.code,n),n}throw r.default.noEnvironmentError}))}formatLanguage(e){var t;const n=e.split("-")[0],i=null===(t=e.split("-")[1])||void 0===t?void 0:t.toUpperCase();return`${n}${i?`-${i}`:""}`}buildJurisdiction(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=(0,f.wrapLogger)(o.default,"buildJurisdiction");t.debug(this._config.jurisdiction);const n=c.default.get(u.default.JURISDICTION);if(n)return t.trace("override",n),n;const i=this._config.jurisdiction;if(!i)throw t.trace("no jurisdiction config"),r.default.noJurisdictionError;if(i.code)return t.trace(i.code),i.code;const s=document.documentElement.getAttribute("jurisdiction");if(s)return t.trace("document jurisdiction",s),s;const a=i.variable;if(a)for(const e of(0,d.default)()){const n=e[a];if(n)return t.trace("dataLayer jurisdiction",n),n}if(i.jurisdictions){const n=i.jurisdictions[e];if(n)return t.trace("region jurisdiction",n),n}if(i.defaultJurisdictionCode)return t.trace("default jurisdiction",i.defaultJurisdictionCode),i.defaultJurisdictionCode;throw r.default.noJurisdictionError}))}buildRegionInfo(e){var t;return i.__awaiter(this,void 0,void 0,(function*(){const n=(0,f.wrapLogger)(o.default,"buildRegionInfo");if(("US"===e.countryCode||"CA"===e.countryCode)&&e.regionCode){const t=`${e.countryCode}-${e.regionCode}`;return n.trace(t),t}const i=null!==(t=e.countryCode)&&void 0!==t?t:"US";return n.trace(i),i}))}buildGeoIP(){return i.__awaiter(this,void 0,void 0,(function*(){o.default.debug("buildGeoIP");const e=yield this._api.getLocation();if(!e||!e.location)throw r.default.unrecognizedLocationError;return e.location}))}}},665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582).__importDefault(n(8805));class o extends i.default{constructor(e){super(e)}experienceClosed(e,t){return this._ketch.experienceClosed(e,t).then((()=>{}))}invokeRight(e){return this._ketch.invokeRight(e)}setProvisionalConsent(e){return this._ketch.setProvisionalConsent(e)}getSubscriptions(){return this._ketch.getSubscriptions()}setSubscriptions(e){return this._ketch.setSubscriptions(e)}getSubscriptionConfiguration(){return this._ketch.getSubscriptionConfiguration()}getConsentConfiguration(){return this._ketch.getConsentConfiguration()}getPreferenceConfiguration(){return this._ketch.getPreferenceConfiguration()}willChangeExperience(e){return this._ketch.willChangeExperience(e).then((()=>{}))}hasChangedExperience(e){return this._ketch.hasChangedExperience(e).then((()=>{}))}hasShownExperience(){return this._ketch.hasShownExperience().then((()=>{}))}}t.default=o},5574:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ketch=void 0;const i=n(7582),o=n(7187),r=i.__importDefault(n(4404)),s=n(5752),u=i.__importDefault(n(5887)),c=i.__importDefault(n(9440)),a=i.__importDefault(n(5274)),d=i.__importDefault(n(737)),l=i.__importDefault(n(1736)),f=n(2315),p=i.__importDefault(n(9746)),h=i.__importStar(n(1911)),_=n(7040),v=i.__importDefault(n(665));class g extends o.EventEmitter{constructor(e,t){var n,i,o,s,u,c;super();const a=parseInt(null!==(i=null===(n=t.options)||void 0===n?void 0:n.maxListeners)&&void 0!==i?i:"20");this._api=e,this._config=t,this._consent=new r.default({name:h.default.CONSENT_EVENT,emitter:this,maxListeners:a}),this._protocols=new r.default({name:h.default.PROTOCOLS_EVENT,emitter:this,maxListeners:a}),this._environment=new r.default({name:h.default.ENVIRONMENT_EVENT,emitter:this,maxListeners:a}),this._geoip=new r.default({name:h.default.GEOIP_EVENT,emitter:this,maxListeners:a}),this._identities=new r.default({name:h.default.IDENTITIES_EVENT,emitter:this,maxListeners:a}),this._jurisdiction=new r.default({name:h.default.JURISDICTION_EVENT,emitter:this,maxListeners:a}),this._regionInfo=new r.default({name:h.default.REGION_INFO_EVENT,emitter:this,maxListeners:a}),this._subscriptionConfig=new r.default({name:h.default.SUBSCRIPTIONS_EVENT,emitter:this,maxListeners:a}),this._subscriptions=new r.default({name:h.default.SUBSCRIPTION_CONFIG_EVENT,emitter:this,maxListeners:a}),this._consentConfig=new r.default,this._preferenceConfig=new r.default,this._isExperienceDisplayed=!1,this._hasExperienceBeenDisplayed=!1,this._provisionalConsent=void 0,this._watcher=new l.default(window,{interval:parseInt(null!==(s=null===(o=t.options)||void 0===o?void 0:o.watcherInterval)&&void 0!==s?s:"2000"),timeout:parseInt(null!==(c=null===(u=t.options)||void 0===u?void 0:u.watcherTimeout)&&void 0!==c?c:"10000")}),this._watcher.on(h.default.IDENTITY_EVENT,this.setIdentities.bind(this)),this.setMaxListeners(a)}registerPlugin(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const n=new v.default(this);return t||(t=yield this.getConfig()),e instanceof Function?e(n,t):(void 0!==e.willShowExperience&&this.on(h.default.WILL_SHOW_EXPERIENCE_EVENT,(t=>{void 0!==e.willShowExperience&&e.willShowExperience(n,this._config,t)})),void 0!==e.showConsentExperience&&this.on(h.default.SHOW_CONSENT_EXPERIENCE_EVENT,((t,i)=>{void 0!==e.showConsentExperience&&e.showConsentExperience(n,this._config,t,i)})),void 0!==e.showPreferenceExperience&&this.on(h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT,((t,i)=>{void 0!==e.showPreferenceExperience&&e.showPreferenceExperience(n,this._config,t,i)})),void 0!==e.consentChanged&&this.on(h.default.CONSENT_EVENT,(t=>{void 0!==e.consentChanged&&e.consentChanged(n,this._config,t)})),void 0!==e.environmentLoaded&&this.on(h.default.ENVIRONMENT_EVENT,(t=>{void 0!==e.environmentLoaded&&e.environmentLoaded(n,this._config,t)})),void 0!==e.experienceHidden&&this.on(h.default.HIDE_EXPERIENCE_EVENT,(t=>{void 0!==e.experienceHidden&&e.experienceHidden(n,this._config,t)})),void 0!==e.geoIPLoaded&&this.on(h.default.GEOIP_EVENT,(t=>{void 0!==e.geoIPLoaded&&e.geoIPLoaded(n,this._config,t)})),void 0!==e.identitiesLoaded&&this.on(h.default.IDENTITIES_EVENT,(t=>{void 0!==e.identitiesLoaded&&e.identitiesLoaded(n,this._config,t)})),void 0!==e.jurisdictionLoaded&&this.on(h.default.JURISDICTION_EVENT,(t=>{void 0!==e.jurisdictionLoaded&&e.jurisdictionLoaded(n,this._config,t)})),void 0!==e.regionInfoLoaded&&this.on(h.default.REGION_INFO_EVENT,(t=>{void 0!==e.regionInfoLoaded&&e.regionInfoLoaded(n,this._config,t)})),void 0!==e.rightInvoked&&this.on(h.default.RIGHT_INVOKED_EVENT,(t=>{void 0!==e.rightInvoked&&e.rightInvoked(n,this._config,t)})),void 0!==e.init?e.init(n,t):void 0)}))}registerIdentityProvider(e,t){return i.__awaiter(this,void 0,void 0,(function*(){this._watcher.add(e,t)}))}registerStorageProvider(e,t){return i.__awaiter(this,void 0,void 0,(function*(){}))}registerExperienceServer(e){return i.__awaiter(this,void 0,void 0,(function*(){}))}getConfig(){return i.__awaiter(this,void 0,void 0,(function*(){return this._config}))}getFullConfig(){var e,t,n,o,r,s,u,c,a,d,l,f,p,h,_,v,g,E,y;return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getConsentConfiguration(),m=yield this.getPreferenceConfiguration(),C=this._config;return Object.assign(Object.assign({},C),{theme:{banner:null===(e=i.theme)||void 0===e?void 0:e.banner,modal:null===(t=i.theme)||void 0===t?void 0:t.modal,preference:null===(n=m.theme)||void 0===n?void 0:n.preference},experiences:{content:{banner:null===(r=null===(o=i.experiences)||void 0===o?void 0:o.content)||void 0===r?void 0:r.banner,modal:null===(u=null===(s=i.experiences)||void 0===s?void 0:s.content)||void 0===u?void 0:u.modal,display:null===(a=null===(c=i.experiences)||void 0===c?void 0:c.content)||void 0===a?void 0:a.display,preference:null===(l=null===(d=m.experiences)||void 0===d?void 0:d.content)||void 0===l?void 0:l.preference,static:null===(p=null===(f=i.experiences)||void 0===f?void 0:f.content)||void 0===p?void 0:p.static},layout:{banner:null===(_=null===(h=i.experiences)||void 0===h?void 0:h.layout)||void 0===_?void 0:_.banner,modal:null===(g=null===(v=i.experiences)||void 0===v?void 0:v.layout)||void 0===g?void 0:g.modal,preference:null===(y=null===(E=m.experiences)||void 0===E?void 0:E.layout)||void 0===y?void 0:y.preference}}})}))}selectExperience(e){const t=(0,_.wrapLogger)(c.default,"selectExperience");if(this._hasExperienceBeenDisplayed)t.debug(h.default.NONE);else{if(d.default.get(h.default.SHOW)===h.default.PREFERENCES)return t.debug(s.ExperienceType.Preference),s.ExperienceType.Preference;if(d.default.has(h.default.SHOW))return t.debug(s.ExperienceType.Consent),s.ExperienceType.Consent;if(this._config.purposes)for(const n of this._config.purposes)if(void 0===e.purposes[n.code])return t.debug(s.ExperienceType.Consent),s.ExperienceType.Consent;t.debug(h.default.NONE)}}selectConsentExperience(){var e,t,n;const i=(0,_.wrapLogger)(c.default,"selectConsentExperience");if(this._config.purposes&&this._config.purposes.length&&(null===(e=this._config.experiences)||void 0===e?void 0:e.consent)&&(null===(n=null===(t=this._config.experiences)||void 0===t?void 0:t.consent)||void 0===n?void 0:n.experienceDefault)===s.ExperienceDefault.MODAL)for(const e of this._config.purposes)if(e.requiresOptIn)return i.debug(s.ConsentExperienceType.Modal),s.ConsentExperienceType.Modal;return i.debug(s.ConsentExperienceType.Banner),s.ConsentExperienceType.Banner}willShowExperience(e){c.default.debug("willShowExperience",e),this.emit(h.default.WILL_SHOW_EXPERIENCE_EVENT,e),this._isExperienceDisplayed=!0}experienceClosed(e,t){return i.__awaiter(this,void 0,void 0,(function*(){if(c.default.debug("experienceClosed",e),this._isExperienceDisplayed=!1,this._hasExperienceBeenDisplayed=!0,e!==s.ExperienceClosedReason.CLOSE_WITHOUT_SETTING_CONSENT)if(t&&e===s.ExperienceClosedReason.SET_CONSENT)yield this.setConsent(t,s.SetConsentReason.USER_UPDATE);else if(e!==s.ExperienceClosedReason.SET_CONSENT){const e=yield this.retrieveConsent();if(this._config.purposes)for(const t of this._config.purposes)void 0===e.purposes[t.code]&&t.requiresOptIn&&(e.purposes[t.code]=!1);yield this.setConsent(e,s.SetConsentReason.USER_EXPERIENCE_DISMISSAL)}return setTimeout((()=>{this.emit(h.default.HIDE_EXPERIENCE_EVENT,e)}),0),this.retrieveConsent()}))}willChangeExperience(e){return i.__awaiter(this,void 0,void 0,(function*(){c.default.debug("willChangeExperience",e),this.emit(h.default.WILL_CHANGE_EXPERIENCE_EVENT,e)}))}hasChangedExperience(e){return i.__awaiter(this,void 0,void 0,(function*(){c.default.debug("hasChangedExperience",e),this.emit(h.default.HAS_CHANGED_EXPERIENCE_EVENT,e)}))}hasShownExperience(){return i.__awaiter(this,void 0,void 0,(function*(){c.default.debug("hasShownExperience"),this.emit(h.default.HAS_SHOWN_EXPERIENCE_EVENT)}))}showExperience(e){return i.__awaiter(this,void 0,void 0,(function*(){}))}showConsentExperience(){var e;return i.__awaiter(this,void 0,void 0,(function*(){if(null===(e=this._config.deployment)||void 0===e?void 0:e.isOrchestrationOnly)return{};c.default.debug("showConsentExperience");const t=yield this.retrieveConsent();return this.listenerCount(h.default.SHOW_CONSENT_EXPERIENCE_EVENT)>0?this.showConsentExperienceTrigger(t):this.on("addedListener",(e=>{e===h.default.SHOW_CONSENT_EXPERIENCE_EVENT&&this.showConsentExperienceTrigger(t)})),t}))}showConsentExperienceTrigger(e){c.default.debug("showConsentExperienceTrigger"),this.willShowExperience(s.ExperienceType.Consent),this.emit(h.default.SHOW_CONSENT_EXPERIENCE_EVENT,e,{displayHint:this.selectConsentExperience()})}showPreferenceExperience(e){var t,n,o;return i.__awaiter(this,void 0,void 0,(function*(){if(null===(t=this._config.deployment)||void 0===t?void 0:t.isOrchestrationOnly)return{};const i=(0,_.wrapLogger)(c.default,"showPreferenceExperience");let r;i.debug(e);let u=!0;try{r=yield this.getConsent()}catch(e){if(e!==a.default.noPurposesError)throw e;i.debug("No purposes detected, experience will not display consents tab"),r=h.EMPTY_CONSENT,u=!1}e=null!=e?e:{};const l=d.default.get(h.default.PREFERENCES_TAB);l&&(0,s.isTab)(l)&&(e.tab=l,i.info("tab",l));const f=null===(o=null===(n=d.default.get(h.default.PREFERENCES_TABS))||void 0===n?void 0:n.split(","))||void 0===o?void 0:o.filter((e=>e&&(0,s.isTab)(e)));(null==f?void 0:f.length)&&(e.showOverviewTab=f.includes(s.Tab.Overview),e.showConsentsTab=u&&f.includes(s.Tab.Consents),e.showSubscriptionsTab=f.includes(s.Tab.Subscriptions),e.showRightsTab=f.includes(s.Tab.Rights),e.tab=f.includes(e.tab||"")?e.tab:f[0]);try{const t=yield this.getSubscriptionConfiguration();if(void 0!==t){if(void 0===e.showSubscriptionsTab&&(e.showSubscriptionsTab=!0),void 0!==t.topics&&0!==t.topics.length&&0!==Object.keys(t.identities).length||(e.showSubscriptionsTab=!1,i.trace("not showing subscriptions because invalid subscription config")),e.showSubscriptionsTab){let n=!1;const o=yield this.getIdentities();for(const e of Object.keys(t.identities))if(o[e]){n=!0;break}n||(i.trace("not showing subscriptions because no auth identities"),e.showSubscriptionsTab=!1)}}else i.trace("invalid subscription config"),e.showSubscriptionsTab=!1}catch(t){i.trace("invalid subscription config"),e.showSubscriptionsTab=!1}return e.showSubscriptionsTab||e.tab!==s.Tab.Subscriptions||(e.tab=void 0),this.listenerCount(h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT)>0?this.showPreferenceExperienceTrigger(e,r):this.on("addedListener",(t=>{t===h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT&&this.showPreferenceExperienceTrigger(e,r)})),r}))}showPreferenceExperienceTrigger(e,t){(0,_.wrapLogger)(c.default,"showPreferenceExperienceTrigger").debug(e),this.willShowExperience(s.ExperienceType.Preference),this.emit(h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT,t,e)}onShowConsentExperience(e){return i.__awaiter(this,void 0,void 0,(function*(){c.default.debug("onShowConsentExperience"),this.removeAllListeners(h.default.SHOW_CONSENT_EXPERIENCE_EVENT),this.on(h.default.SHOW_CONSENT_EXPERIENCE_EVENT,e)}))}onShowPreferenceExperience(e){return i.__awaiter(this,void 0,void 0,(function*(){c.default.debug("onShowPreferenceExperience"),this.removeAllListeners(h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT),this.on(h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT,e)}))}hasConsent(){return this._consent.isFulfilled()}setConsent(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const n=(0,_.wrapLogger)(c.default,"setConsent");if(n.debug(e),!e||(0,u.default)(e))return n.trace("reset"),this._consent.reset(),{};let i=!1;if(this.hasConsent()){n.trace("has consent");const t=this._consent.value;i=(0,p.default)(t.purposes,e.purposes);for(const n in t.purposes)Object.prototype.hasOwnProperty.call(t.purposes,n)&&!Object.prototype.hasOwnProperty.call(e.purposes,n)&&(e.purposes[n]=t.purposes[n]);e.protocols=t.protocols}this._consent.value=e;const o=yield this.getIdentities();try{const n=yield this.updateConsent(o,e);n&&void 0!==n.protocols&&(this._protocols.value=n.protocols),t===s.SetConsentReason.USER_UPDATE&&(this._watcher.stop(),yield this._watcher.start(),i||this.emit(h.default.USER_CONSENT_UPDATED_EVENT,e))}catch(e){let t="";e instanceof Error&&(t=e.message),n.warn("unable to update consent",t)}return e}))}setProvisionalConsent(e){return i.__awaiter(this,void 0,void 0,(function*(){c.default.debug("setProvisionalConsent",e),this._provisionalConsent=e}))}overrideWithProvisionalConsent(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=(0,_.wrapLogger)(c.default,"overrideWithProvisionalConsent");t.debug(e);let n=!1;if(!this._provisionalConsent)return t.trace("no provisional consent"),[e,n];for(const t in this._provisionalConsent.purposes)e.purposes[t]!==this._provisionalConsent.purposes[t]&&(e.purposes[t]=this._provisionalConsent.purposes[t],n=!0);return this._provisionalConsent=void 0,t.trace("merged",e),[e,n]}))}getConsent(){var e;return i.__awaiter(this,void 0,void 0,(function*(){const t=(0,_.wrapLogger)(c.default,"getConsent");if(this.hasConsent())return t.trace("has consent"),this._consent.fulfilled;t.debug("obtaining consent");const n=yield this.getIdentities(),i=yield this.fetchConsent(n),[o,r]=yield this.overrideWithProvisionalConsent(i);let u=r;const a=this.selectExperience(o);if(this._config.purposes)for(const e of this._config.purposes)void 0!==o.purposes[e.code]||e.requiresOptIn||(o.purposes[e.code]=!0,u=!0);if(null===(e=this._config.deployment)||void 0===e?void 0:e.isOrchestrationOnly)return{};switch(t.debug("shouldCreatePermits",u),u?yield this.setConsent(o,s.SetConsentReason.DEFAULT_STATE):(this._consent.value=o,void 0!==i.protocols&&(this._protocols.value=i.protocols)),a){case s.ExperienceType.Consent:return this.showConsentExperience();case s.ExperienceType.Preference:return this.showPreferenceExperience()}return this.emit(h.default.HIDE_EXPERIENCE_EVENT,s.ExperienceClosedReason.WILL_NOT_SHOW),this._consent.value}))}retrieveConsent(){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("retrieveConsent"),this._consent.isFulfilled()?this._consent.fulfilled:{purposes:{},vendors:[]}}))}fetchConsent(e){var t,n,o;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"fetchConsent");if(i.debug("identities",e),!e||0===Object.keys(e).length)throw a.default.noIdentitiesError;if(!(this._config&&this._config.property&&this._config.organization&&this._config.environment&&this._config.purposes&&this._config.jurisdiction&&0!==this._config.purposes.length))throw a.default.noPurposesError;const r={organizationCode:null!==(t=this._config.organization.code)&&void 0!==t?t:"",propertyCode:null!==(n=this._config.property.code)&&void 0!==n?n:"",environmentCode:this._config.environment.code,jurisdictionCode:null!==(o=this._config.jurisdiction.code)&&void 0!==o?o:"",identities:e,purposes:{}};for(const e of this._config.purposes)r.purposes[e.code]={legalBasisCode:e.legalBasisCode};i.debug("request",r);let s=yield(0,f.getCachedConsent)(r,this._config);const u=Math.floor(Date.now()/1e3-f.CACHED_CONSENT_TTL);let d=!1,l=!1;if(0===Object.keys(s.purposes).length?i.debug("cached consent is empty",s):(null==s?void 0:s.collectedAt)&&s.collectedAt<u?i.debug("revalidating cached consent",s):(0,p.default)(e,s.identities)?(i.debug("using cached consent",s),d=!0):(l=!0,i.debug("cached consent discarded due to identity mismatch",e,s.identities)),!d){if(this._config.purposes&&s.purposes&&!l)for(const e of this._config.purposes){const t=s.purposes[e.code];t&&(r.purposes[e.code]||(r.purposes[e.code]={}),r.purposes[e.code].allowed="string"==typeof t?t:t.allowed)}i.debug("calling getConsent",r),s=(e=>{var t;if(i.trace("normalizeConsent",e),!e.purposes)return e.purposes={},e;for(const n of Object.keys(e.purposes)){const i=e.purposes[n];"string"==typeof i&&(e.purposes[n]={allowed:i,legalBasisCode:null===(t=r.purposes[n])||void 0===t?void 0:t.legalBasisCode})}return i.trace("normalized",e),e})(yield this._api.getConsent(r)),i.debug("getConsent returned",s),yield(0,f.setCachedConsent)(s)}yield(0,f.setPublicConsent)(s,this._config);const h={purposes:{}};if(this._config.purposes&&s.purposes)for(const e of this._config.purposes)if(s.purposes[e.code]){const t=s.purposes[e.code];"string"==typeof t?h.purposes[e.code]="true"===t:t.allowed&&(h.purposes[e.code]="true"===t.allowed)}return s.vendors&&(h.vendors=s.vendors),s.protocols&&(h.protocols=s.protocols),i.debug("returning",h),h}))}updateConsent(e,t){var n,o,r;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"updateConsent");if(i.debug(e,t),!e||0===Object.keys(e).length)throw i.debug("no identities"),a.default.noIdentitiesError;if(!(this._config&&this._config.organization&&this._config.property&&this._config.environment&&this._config.jurisdiction&&this._config.purposes&&0!==this._config.purposes.length))throw i.debug("invalid configuration"),a.default.invalidConfigurationError;if((0,u.default)(t)||(0,u.default)(t.purposes))throw i.debug("empty consent"),a.default.emptyConsentError;const s={organizationCode:null!==(n=this._config.organization.code)&&void 0!==n?n:"",propertyCode:null!==(o=this._config.property.code)&&void 0!==o?o:"",environmentCode:this._config.environment.code,identities:e,jurisdictionCode:null!==(r=this._config.jurisdiction.code)&&void 0!==r?r:"",purposes:{},vendors:t.vendors,collectedAt:Math.floor(Date.now()/1e3)};if(this._config.purposes&&t)for(const e of this._config.purposes)void 0!==t.purposes[e.code]&&(s.purposes[e.code]={allowed:t.purposes[e.code].toString(),legalBasisCode:e.legalBasisCode});if((0,u.default)(s.purposes))return i.debug("calculated consents empty"),s;yield(0,f.setCachedConsent)(s),yield(0,f.setPublicConsent)(s,this._config);const d=yield this._api.setConsent(s);return yield(0,f.setCachedConsent)(d),d}))}getSubscriptions(){var e,t,n,o,r,s,u,a;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"getSubscriptions");if(void 0===this._config.organization||void 0===this._config.property||void 0===this._config.environment)return i.trace("exiting because invalid config",this._config),this._subscriptions.value={},{};if(this._subscriptions.isFulfilled())return i.trace("cached",this._subscriptions.value),this._subscriptions;const d=yield this.getSubscriptionConfiguration();if(0===d.topics.length||void 0===d.identities||0===Object.keys(d.identities).length)return i.trace("exiting because invalid subscription config",d,d.topics.length,d.identities,Object.keys(d.identities)),this._subscriptions.value={},{};const l={organizationCode:null!==(n=null===(t=null===(e=this._config)||void 0===e?void 0:e.organization)||void 0===t?void 0:t.code)&&void 0!==n?n:"",controllerCode:"",propertyCode:null!==(s=null===(r=null===(o=this._config)||void 0===o?void 0:o.property)||void 0===r?void 0:r.code)&&void 0!==s?s:"",environmentCode:null===(a=null===(u=this._config)||void 0===u?void 0:u.environment)||void 0===a?void 0:a.code,collectedAt:Math.floor(Date.now()/1e3),identities:{}},f=yield this.getIdentities();for(const e of Object.keys(d.identities))f[e]&&(l.identities[e]=f[e]);if(0===Object.keys(l.identities).length)return i.trace("exiting because no identities"),this._subscriptions.value={},{};const p=yield this._api.getSubscriptions(l);return this._subscriptions.value=p,i.trace("loaded",p),p}))}setSubscriptions(e){var t,n,o,r,s,u,a,d;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"setSubscriptions");if(i.trace("subscriptions",e,this._config),void 0===this._config.organization||void 0===this._config.property||void 0===this._config.environment)return void i.trace("exiting because of invalid config");const l=yield this.getSubscriptionConfiguration();if(0===l.topics.length||void 0===l.identities||0===Object.keys(l.identities).length)return void i.trace("exiting because of invalid subscription config",l,0===l.topics.length,l.identities,Object.keys(l.identities));const f={organizationCode:null!==(o=null===(n=null===(t=this._config)||void 0===t?void 0:t.organization)||void 0===n?void 0:n.code)&&void 0!==o?o:"",controllerCode:"",propertyCode:null!==(u=null===(s=null===(r=this._config)||void 0===r?void 0:r.property)||void 0===s?void 0:s.code)&&void 0!==u?u:"",environmentCode:null===(d=null===(a=this._config)||void 0===a?void 0:a.environment)||void 0===d?void 0:d.code,topics:e.topics,controls:e.controls,collectedAt:Math.floor(Date.now()/1e3),identities:{}},p=yield this.getIdentities();for(const e of Object.keys(l.identities))p[e]&&(f.identities[e]=p[e]);return 0===Object.keys(f.identities).length?(i.trace("exiting because no identities"),void(this._subscriptions.value={})):(this._subscriptions.value=e,this._api.setSubscriptions(f))}))}getSubscriptionConfiguration(){var e,t,n,o,r,s,u,a,d,l,f,p,h,v,g,E,y,m,C,b,w,T,I,O,S,P;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"getSubscriptionConfiguration");if(i.trace("config",this._config),this._subscriptionConfig.isFulfilled())return i.trace("cached",this._subscriptionConfig.value),this._subscriptionConfig;if(!(null===(n=null===(t=null===(e=this._config)||void 0===e?void 0:e.experiences)||void 0===t?void 0:t.preference)||void 0===n?void 0:n.code)||(null===(s=null===(r=null===(o=this._config)||void 0===o?void 0:o.services)||void 0===r?void 0:r.shoreline)||void 0===s?void 0:s.includes("v3"))){const e=yield this.getPreferenceConfiguration();return e.subscription?e.subscription:(this._subscriptionConfig.value={contactMethods:{},controls:[],identities:{},language:null!==(a=null===(u=this._config)||void 0===u?void 0:u.language)&&void 0!==a?a:"",organization:{code:null!==(f=null===(l=null===(d=this._config)||void 0===d?void 0:d.organization)||void 0===l?void 0:l.code)&&void 0!==f?f:""},property:{code:null!==(v=null===(h=null===(p=this._config)||void 0===p?void 0:p.property)||void 0===h?void 0:h.code)&&void 0!==v?v:""},topics:[]},this._subscriptionConfig.value)}const N=yield this._api.getSubscriptionsConfiguration({organizationCode:null!==(y=null===(E=null===(g=this._config)||void 0===g?void 0:g.organization)||void 0===E?void 0:E.code)&&void 0!==y?y:"",propertyCode:null!==(b=null===(C=null===(m=this._config)||void 0===m?void 0:m.property)||void 0===C?void 0:C.code)&&void 0!==b?b:"",languageCode:null!==(T=null===(w=this._config)||void 0===w?void 0:w.language)&&void 0!==T?T:"",experienceCode:null!==(P=null===(S=null===(O=null===(I=this._config)||void 0===I?void 0:I.experiences)||void 0===O?void 0:O.preference)||void 0===S?void 0:S.code)&&void 0!==P?P:""});return i.trace("loaded",N),this._subscriptionConfig.value=N,N}))}getConsentConfiguration(){var e,t,n,o,r,s,u,a;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"getConsentConfiguration");if(i.trace("config",this._config),this._consentConfig.isFulfilled())return i.trace("cached",this._consentConfig.value),this._consentConfig;const d=yield this._api.getConsentConfiguration({organizationCode:this._config.organization.code,propertyCode:null!==(t=null===(e=this._config.property)||void 0===e?void 0:e.code)&&void 0!==t?t:"",envCode:null!==(o=null===(n=this._config.environment)||void 0===n?void 0:n.code)&&void 0!==o?o:"",jurisdictionCode:null!==(s=null===(r=this._config.jurisdiction)||void 0===r?void 0:r.code)&&void 0!==s?s:"",langCode:null!==(u=this._config.language)&&void 0!==u?u:"",hash:null===(a=this._config.environment)||void 0===a?void 0:a.hash});return i.trace("loaded",d),this._consentConfig.value=d,d}))}getPreferenceConfiguration(){var e,t,n,o,r,s,u,a;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"getPreferenceConfiguration");if(i.trace("config",this._config),this._preferenceConfig.isFulfilled())return i.trace("cached",this._preferenceConfig.value),this._preferenceConfig;const d=yield this._api.getPreferenceConfiguration({organizationCode:this._config.organization.code,propertyCode:null!==(t=null===(e=this._config.property)||void 0===e?void 0:e.code)&&void 0!==t?t:"",envCode:null!==(o=null===(n=this._config.environment)||void 0===n?void 0:n.code)&&void 0!==o?o:"",jurisdictionCode:null!==(s=null===(r=this._config.jurisdiction)||void 0===r?void 0:r.code)&&void 0!==s?s:"",langCode:null!==(u=this._config.language)&&void 0!==u?u:"",hash:null===(a=this._config.environment)||void 0===a?void 0:a.hash});return i.trace("loaded",d),this._preferenceConfig.value=d,d}))}setEnvironment(e){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("setEnvironment",e),this._environment.value=e,this._environment.fulfilled}))}getEnvironment(){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("getEnvironment"),this._environment.fulfilled}))}setGeoIP(e){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("setGeoIP",e),this._geoip.value=e,this._geoip.fulfilled}))}getGeoIP(){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("getGeoIP"),this._geoip.fulfilled}))}extractGAID(e){const t=/^GA\d\.\d\.(\d+\.\d+)$/.exec(e);return t?"GA1.1."+t[1]:e}setIdentities(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=(0,_.wrapLogger)(c.default,"setIdentities");t.debug(e);let n={};this._identities.isFulfilled()&&(n=this._identities.value);for(const i in e)"google_analytics_cookie"!==i||"utc"!==this._config.organization.code&&"vara_labs"!==this._config.organization.code||(t.debug("altering google_analytics_cookie to get id with GA1.1. prefix"),e[i]=this.extractGAID(e[i])),n[i]=e[i];if(this._identities.value=n,this._isExperienceDisplayed)return t.trace("experience displayed"),n;const i=yield this.retrieveConsent();if(0==Object.keys(i.purposes).length)return n;const o=yield this.fetchConsent(n);if((0,p.default)(o.purposes,i.purposes)){let e=!1;for(const t in o)if(o.purposes[t]!==i.purposes[t]){e=!0;break}if(!e)return n}if(this._hasExperienceBeenDisplayed){t.trace("updating consent because experience displayed");try{yield this.updateConsent(n,i)}catch(e){let n="";e instanceof Error&&(n=e.message),t.warn("unable to update consent",n)}return n}return yield this.showConsentExperience(),n}))}collectIdentities(){var e,t,n;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"collectIdentities");i.debug(this._config.identities);const o=this._config.identities;if(!this._config||!this._config.organization||void 0===o||(0,u.default)(o))return i.trace("invalid configuration"),void(this._identities.value={});const r=this._watcher;let a=(e,t)=>{r.add(e,t)};if(null===(e=this._config.property)||void 0===e?void 0:e.proxy)try{const e=new URL(null===(t=this._config.property)||void 0===t?void 0:t.proxy),n=new URL(window.location.href);e.origin!==n.origin&&(a=(e,t)=>{o[e].type!==s.IdentityType.IDENTITY_TYPE_LOCAL_STORAGE&&r.add(e,t)})}catch(e){i.error(`error checking proxy '${null===(n=this._config.property)||void 0===n?void 0:n.proxy}'`,e)}for(const e of Object.keys(o))a(e,o[e]);i.info("starting watcher"),yield this._watcher.start()}))}getIdentities(){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("getIdentities"),this._identities.isFulfilled()||(yield this.collectIdentities()),this._identities.fulfilled}))}setJurisdiction(e){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("setJurisdiction",e),this._jurisdiction.value=e,this._jurisdiction.fulfilled}))}getJurisdiction(){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("getJurisdiction"),this._jurisdiction.fulfilled}))}setRegionInfo(e){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("setRegionInfo",e),this._regionInfo.value=e,this._regionInfo.fulfilled}))}getRegionInfo(){return i.__awaiter(this,void 0,void 0,(function*(){return c.default.debug("getRegionInfo"),this._regionInfo.fulfilled}))}invokeRight(e){var t,n,o;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,_.wrapLogger)(c.default,"invokeRight");if(i.debug(e),!e.subject||!e.subject.email||""===e.subject.email||!e.right||""===e.right)return void i.warn("invalid right invocation request");const r={};if(this._identities.isFulfilled()&&Object.entries(this._identities.value).forEach((([e,t])=>{r[e]=t})),r.email=e.subject.email,!(this._config&&this._config.organization&&this._config.property&&this._config.environment&&this._config.jurisdiction&&this._config.rights&&0!==this._config.rights.length))return void i.warn("invalid configuration");const s=e.subject,u={organizationCode:null!==(t=this._config.organization.code)&&void 0!==t?t:"",propertyCode:null!==(n=this._config.property.code)&&void 0!==n?n:"",environmentCode:this._config.environment.code,controllerCode:"",identities:r,jurisdictionCode:null!==(o=this._config.jurisdiction.code)&&void 0!==o?o:"",rightCode:e.right,user:s,recaptchaToken:e.recaptchaToken};return this.emit(h.default.RIGHT_INVOKED_EVENT,u),this._api.invokeRight(u)}))}emit(e,...t){var n,i,o,r,s;const u=(0,_.wrapLogger)(c.default,"emit");if(u.trace(e,t),window.androidListener||(null===(n=window.webkit)||void 0===n?void 0:n.messageHandlers)||(null===(i=window.ReactNativeWebView)||void 0===i?void 0:i.postMessage)){const n=e.toString(),i=[];for(const e of t)e!==this&&i.push(e);let c;1===i.length&&"string"==typeof i[0]?c=i[0]:1===i.length?c=JSON.stringify(i[0]):i.length>1&&(c=JSON.stringify(i)),window.androidListener&&n in window.androidListener?(u.trace("androidListener",window.androidListener,c),0===i.length?window.androidListener[n]():window.androidListener[n](c)):(null===(o=window.webkit)||void 0===o?void 0:o.messageHandlers)&&n in window.webkit.messageHandlers?(u.trace("webkitMessageHandlers",null===(r=window.webkit)||void 0===r?void 0:r.messageHandlers,c),window.webkit.messageHandlers[n].postMessage(c)):(null===(s=window.ReactNativeWebView)||void 0===s?void 0:s.postMessage)?window.ReactNativeWebView.postMessage(JSON.stringify({event:e,data:c})):u.warn(`Can't pass message to native code because "${n}" handler is not registered`)}if(this._config&&this._config.options&&this._config.options.externalListener&&window[this._config.options.externalListener]){const n=window[this._config.options.externalListener],i=e.toString(),o=[];for(const e of t)e!==this&&o.push(e);let r;1===o.length&&"string"==typeof o[0]||1===o.length?r=o[0]:o.length>1&&(r=o);let s={event:i,data:r};s=JSON.stringify(s),"function"==typeof n?n(s):"postMessage"in n&&"function"==typeof n.postMessage?n.postMessage(s):"object"==typeof n&&i in n&&("function"===n[i]?n[i](r):"postMessage"in n[i]&&n[i].postMessage(r))}return super.emit(e,...t)}addListener(e,t){return this.on(e,t)}on(e,t){c.default.trace("on",e,t);const n=this.mapEvent(e);return void 0!==n?(n.on(h.default.FULFILLED_EVENT,t),this):(this.isSingletonEvent(e)&&super.removeAllListeners(e),super.on(e,t),this.emit("addedListener",e,t),this)}once(e,t){c.default.trace("once",e,t);const n=this.mapEvent(e);return void 0!==n?(n.once(h.default.FULFILLED_EVENT,t),this):(this.isSingletonEvent(e)&&super.removeAllListeners(e),super.once(e,t),this.emit("addedListener",e,t),this)}removeListener(e,t){c.default.trace("off",e,t);const n=this.mapEvent(e);return void 0!==n?(n.removeListener(h.default.FULFILLED_EVENT,t),this):super.removeListener(e,t)}off(e,t){return this.removeListener(e,t)}isSingletonEvent(e){return e===h.default.SHOW_CONSENT_EXPERIENCE_EVENT||e===h.default.SHOW_PREFERENCE_EXPERIENCE_EVENT}mapEvent(e){switch(e){case h.default.CONSENT_EVENT:return this._consent;case h.default.ENVIRONMENT_EVENT:return this._environment;case h.default.GEOIP_EVENT:return this._geoip;case h.default.IDENTITIES_EVENT:return this._identities;case h.default.JURISDICTION_EVENT:return this._jurisdiction;case h.default.REGION_INFO_EVENT:return this._regionInfo;case h.default.SUBSCRIPTIONS_EVENT:return this._subscriptions;case h.default.SUBSCRIPTION_CONFIG_EVENT:return this._subscriptionConfig}}}t.Ketch=g},8805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=i.__importDefault(n(9440)),r=i.__importDefault(n(5274)),s=i.__importDefault(n(4128)),u=i.__importDefault(n(1911)),c=n(7040);t.default=class{constructor(e){this._ketch=e}push(e){if(void 0===e)return;let t;"string"==typeof e?(t=e,e=[]):(e=Array.from(e),t=e.shift()),o.default.trace(t),this.route(t,...e).then((()=>{o.default.trace(`${t} completed`)})).catch((e=>{o.default.warn(`${t} failed: ${e}`)}))}route(e,...t){return i.__awaiter(this,void 0,void 0,(function*(){const n=(0,c.wrapLogger)((0,c.wrapLogger)(o.default,"route"),e);if("push"===e||"route"===e)throw r.default.actionNotFoundError(e);const i=this[e];if(void 0===i)throw r.default.actionNotFoundError(e);if(n.debug(t,t.length,i.length),t.length<=i.length)return i.apply(this,t);if(t.length==i.length+1){const n=t.pop();if(!(0,s.default)(n))throw r.default.expectedFunctionError(e);return i.apply(this,t).then(n)}const u=t.pop();if(!(0,s.default)(u))throw r.default.expectedFunctionError(e);const a=t.pop();if(!(0,s.default)(a))throw r.default.expectedFunctionError(e);return i.apply(this,t).then(a).catch(u)}))}getConfig(){return this._ketch.getConfig()}getFullConfig(){return this._ketch.getFullConfig()}getConsent(){return this._ketch.getConsent()}getEnvironment(){return this._ketch.getEnvironment()}getGeoIP(){return this._ketch.getGeoIP()}getIdentities(){return this._ketch.getIdentities()}getJurisdiction(){return this._ketch.getJurisdiction()}getRegionInfo(){return this._ketch.getRegionInfo()}onConsent(e){return o.default.debug(`onConsent is deprecated - use ketch("on", "${u.default.CONSENT_EVENT}", listener) instead`),this._ketch.on(u.default.CONSENT_EVENT,e),Promise.resolve()}onEnvironment(e){return o.default.debug(`onEnvironment is deprecated - use ketch("on", "${u.default.ENVIRONMENT_EVENT}", listener) instead`),this._ketch.on(u.default.ENVIRONMENT_EVENT,e),Promise.resolve()}onGeoIP(e){return o.default.debug(`onGeoIP is deprecated - use ketch("on", "${u.default.GEOIP_EVENT}", listener) instead`),this._ketch.on(u.default.GEOIP_EVENT,e),Promise.resolve()}onHideExperience(e){return o.default.debug(`onHideExperience is deprecated - use ketch("on", "${u.default.HIDE_EXPERIENCE_EVENT}", listener) instead`),this._ketch.on(u.default.HIDE_EXPERIENCE_EVENT,e),Promise.resolve()}onWillShowExperience(e){return o.default.debug('onWillShowExperience is deprecated - use ketch("on", "'+u.default.WILL_SHOW_EXPERIENCE_EVENT+'", listener) instead'),this._ketch.on(u.default.WILL_SHOW_EXPERIENCE_EVENT,e),Promise.resolve()}onIdentities(e){return o.default.debug(`onIdentities is deprecated - use ketch("on", "${u.default.IDENTITIES_EVENT}", listener) instead`),this._ketch.on(u.default.IDENTITIES_EVENT,e),Promise.resolve()}onJurisdiction(e){return o.default.debug(`onJurisdiction is deprecated - use ketch("on", "${u.default.JURISDICTION_EVENT}", listener) instead`),this._ketch.on(u.default.JURISDICTION_EVENT,e),Promise.resolve()}onRegionInfo(e){return o.default.debug(`onRegionInfo is deprecated - use ketch("on", "${u.default.REGION_INFO_EVENT}", listener) instead`),this._ketch.on(u.default.REGION_INFO_EVENT,e),Promise.resolve()}setEnvironment(e){return o.default.warn("setEnvironment is deprecated"),this._ketch.setEnvironment(e).then((()=>{}))}setGeoIP(e){return o.default.warn("setGeoIP is deprecated"),this._ketch.setGeoIP(e).then((()=>{}))}setIdentities(e){return o.default.warn("setIdentities is deprecated"),this._ketch.setIdentities(e).then((()=>{}))}setJurisdiction(e){return o.default.warn("setJurisdiction is deprecated"),this._ketch.setJurisdiction(e).then((()=>{}))}setRegionInfo(e){return o.default.warn("setRegionInfo is deprecated"),this._ketch.setRegionInfo(e).then((()=>{}))}showConsent(){return this._ketch.showConsentExperience().then((()=>{}))}showPreferences(e){return this._ketch.showPreferenceExperience(e).then((()=>{}))}registerPlugin(e,t){return this._ketch.registerPlugin(e,t)}registerIdentityProvider(e,t){return this._ketch.registerIdentityProvider(e,t)}registerExperienceServer(e){return this._ketch.registerExperienceServer(e)}registerStorageProvider(e,t){return this._ketch.registerStorageProvider(e,t)}setConsent(e,t){return this._ketch.setConsent(e,t).then((()=>{}))}showExperience(e){return this._ketch.showExperience(e)}emit(e,...t){return this._ketch.emit(e,...t),Promise.resolve()}on(e,t){return this._ketch.on(e,t),Promise.resolve()}once(e,t){return this._ketch.once(e,t),Promise.resolve()}addListener(e,t){return this._ketch.addListener(e,t),Promise.resolve()}removeListener(e,t){return this._ketch.removeListener(e,t),Promise.resolve()}off(e,t){return this._ketch.off(e,t),Promise.resolve()}removeAllListeners(e){return this._ketch.removeAllListeners(e),Promise.resolve()}}},4578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=n(1971),r=n(5752),s=i.__importDefault(n(9440)),u=i.__importDefault(n(5274)),c=n(2315),a=n(7040),d=i.__importDefault(n(7218));t.default=class{constructor(e,t){this._ketch=e,this._config=t,this._api=new o.KetchWebAPI((0,d.default)(this._config))}normalizeConsent(e,t){var n;if(!e.purposes)return e.purposes={},e;for(const i of Object.keys(e.purposes)){const o=e.purposes[i];"string"==typeof o&&(e.purposes[i]={allowed:o,legalBasisCode:null===(n=t.purposes[i])||void 0===n?void 0:n.legalBasisCode})}return e}enableAllConsent(){var e,t,n;return i.__awaiter(this,void 0,void 0,(function*(){const i=(0,a.wrapLogger)(s.default,"trackers: enableAllConsent");if(this._ketch.hasConsent())return i.trace("trackers: has consent"),this._ketch.getConsent();i.debug("trackers: obtaining and setting consent");const o=yield this._ketch.getIdentities();if(i.debug("trackers: identities",o),!o||0===Object.keys(o).length)throw u.default.noIdentitiesError;if(!(this._config&&this._config.property&&this._config.organization&&this._config.environment&&this._config.purposes&&this._config.jurisdiction&&0!==this._config.purposes.length))throw u.default.noPurposesError;const d={organizationCode:null!==(e=this._config.organization.code)&&void 0!==e?e:"",propertyCode:null!==(t=this._config.property.code)&&void 0!==t?t:"",environmentCode:this._config.environment.code,jurisdictionCode:null!==(n=this._config.jurisdiction.code)&&void 0!==n?n:"",identities:o,purposes:{}};for(const e of this._config.purposes)d.purposes[e.code]={legalBasisCode:e.legalBasisCode};i.debug("trackers: calling getConsent",d);const l=this.normalizeConsent(yield this._api.getConsent(d),d);i.debug("trackers: getConsent returned",l),yield(0,c.setCachedConsent)(l),yield(0,c.setPublicConsent)(l,this._config);const f={purposes:{}};if(null==l?void 0:l.purposes)for(const[e]of Object.entries(l.purposes))f.purposes[e]=!0;return l.vendors&&(f.vendors=l.vendors),l.protocols&&(f.protocols=l.protocols),i.debug("trackers: newConsent",f),yield this._ketch.setConsent(f,r.SetConsentReason.USER_UPDATE),f}))}}},2078:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boot=void 0;const i=n(7582),o=i.__importDefault(n(1329)),r=i.__importDefault(n(9440)),s=i.__importDefault(n(7394));t.boot=function(){return i.__awaiter(this,void 0,void 0,(function*(){window.semaphore=window.semaphore||[],window.ketch=window.ketch||s.default;const e=()=>i.__awaiter(this,void 0,void 0,(function*(){try{yield(0,o.default)()}catch(e){r.default.error(e)}}));"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):yield e()}))}},2315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPublicConsent=t.setCachedConsent=t.getCachedConsent=t.PUBLIC_CONSENT_TTL=t.CACHED_CONSENT_TTL=t.CACHED_PROTOCOLS_KEY=t.PUBLIC_CONSENT_KEY_V1=t.CACHED_CONSENT_KEY=void 0;const i=n(7582),o=n(4458),r=n(1815);t.CACHED_CONSENT_KEY="_swb_consent_",t.PUBLIC_CONSENT_KEY_V1="_ketch_consent_v1_",t.CACHED_PROTOCOLS_KEY="_swb_consent_",t.CACHED_CONSENT_TTL=300,t.PUBLIC_CONSENT_TTL=3456e4;const s=(0,o.getDefaultCacher)(),u=new o.WebStorageCacher(window.localStorage,86400);t.getCachedConsent=function(e,n){return i.__awaiter(this,void 0,void 0,(function*(){const i={organizationCode:e.organizationCode,propertyCode:e.propertyCode,environmentCode:e.environmentCode,jurisdictionCode:e.jurisdictionCode,identities:e.identities,purposes:{},collectedAt:0};if(n.options&&"no-cache"===n.options["Cache-Control"])return i;const o=yield s.getItem(t.CACHED_CONSENT_KEY);if(!o)return i;if(0===Object.keys(o).length)return i;if(!o.collectedAt)return i;const r=o,c=yield u.getItem(t.CACHED_PROTOCOLS_KEY);return r.vendors=null==c?void 0:c.vendors,r.protocols=null==c?void 0:c.protocols,r}))},t.setCachedConsent=function(e){return i.__awaiter(this,void 0,void 0,(function*(){if(!e||0===Object.keys(e).length)return;e.collectedAt=Math.floor(Date.now()/1e3);const n=Object.assign({},e);yield u.setItem(t.CACHED_PROTOCOLS_KEY,n),n.vendors=void 0,"protocols"in n&&(n.protocols=void 0),yield s.setItem(t.CACHED_CONSENT_KEY,n)}))},t.setPublicConsent=function(e,n){return i.__awaiter(this,void 0,void 0,(function*(){if(0===Object.keys(e).length)return;const i={};if(n.purposes){for(const t of n.purposes){if(!Object.prototype.hasOwnProperty.call(e.purposes,t.code))continue;const n=e.purposes[t.code];let o="";"string"==typeof n?o="true"===n?"granted":"denied":n.allowed&&(o="true"===n.allowed?"granted":"denied"),0!=o.length&&(i[t.code]={status:o},t.canonicalPurposeCodes?i[t.code].canonicalPurposes=t.canonicalPurposeCodes:t.canonicalPurposeCode&&t.canonicalPurposeCode.length>0&&(i[t.code].canonicalPurposes=[t.canonicalPurposeCode]))}if(Object.keys(i).length>0){const e=btoa(JSON.stringify(i));null===localStorage||void 0===localStorage||localStorage.setItem(t.PUBLIC_CONSENT_KEY_V1,e),(0,r.setCookie)(window,t.PUBLIC_CONSENT_KEY_V1,e,t.PUBLIC_CONSENT_TTL)}}}))}},1911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_CONSENT=void 0,t.default={FULFILLED_EVENT:"fulfilled",CONSENT_EVENT:"consent",PROTOCOLS_EVENT:"protocols",ENVIRONMENT_EVENT:"environment",GEOIP_EVENT:"geoip",IDENTITIES_EVENT:"identities",IDENTITY_EVENT:"identity",JURISDICTION_EVENT:"jurisdiction",REGION_INFO_EVENT:"regionInfo",SUBSCRIPTIONS_EVENT:"subscriptions",SUBSCRIPTION_CONFIG_EVENT:"subscriptionConfig",RIGHT_INVOKED_EVENT:"rightInvoked",WILL_SHOW_EXPERIENCE_EVENT:"willShowExperience",SHOW_CONSENT_EXPERIENCE_EVENT:"showConsentExperience",SHOW_PREFERENCE_EXPERIENCE_EVENT:"showPreferenceExperience",WILL_CHANGE_EXPERIENCE_EVENT:"willChangeExperience",HAS_CHANGED_EXPERIENCE_EVENT:"hasChangedExperience",HAS_SHOWN_EXPERIENCE_EVENT:"hasShownExperience",HIDE_EXPERIENCE_EVENT:"hideExperience",USER_CONSENT_UPDATED_EVENT:"userConsentUpdated",NONE:"none",ENV:"env",PRODUCTION:"production",REGION:"region",JURISDICTION:"jurisdiction",LANGUAGE:"lang",SHOW:"show",PREFERENCES_TAB:"preferences_tab",PREFERENCES_TABS:"preferences_tabs",CONSENT:"cd",PREFERENCES:"preferences",API_SERVER:"shoreline",API_SERVER_BASE_URL:"https://global.ketchcdn.com/web/v2",EXPERIENCE_VERSION:"experience_version"},t.EMPTY_CONSENT={purposes:{},vendors:[],protocols:{}}},6100:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.dataLayer=window.dataLayer||[]}},5274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={actionNotFoundError:e=>new Error(`action "${e}" not found`),expectedFunctionError:e=>new Error(`action "${e}" expected a function`),unrecognizedLocationError:new Error("unrecognized location"),noIdentitiesError:new Error("no identities"),noPurposesError:new Error("no purposes"),noEnvironmentError:new Error("no environment"),noJurisdictionError:new Error("no jurisdiction"),invalidConfigurationError:new Error("invalid configuration"),emptyConsentError:new Error("empty consent")}},7218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=i.__importDefault(n(1911)),r=i.__importDefault(n(737));t.default=function(e){if(e.services){let t=e.services[o.default.API_SERVER];t.endsWith("/")&&(t=t.slice(0,-1));const n=r.default.get(o.default.EXPERIENCE_VERSION);return n&&(t.includes("v3")&&"old"===n?t=t.replace("v3","v2"):t.includes("v2")&&"new"===n&&(t=t.replace("v2","v3"))),t.endsWith("/web/v2")||t.endsWith("/web/v3")||(t+="/web/v2"),t}return o.default.API_SERVER_BASE_URL}},4371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ketch=t.boot=void 0;const i=n(5574);Object.defineProperty(t,"Ketch",{enumerable:!0,get:function(){return i.Ketch}});const o=n(2078);Object.defineProperty(t,"boot",{enumerable:!0,get:function(){return o.boot}})},1329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7582),o=i.__importDefault(n(9440)),r=i.__importDefault(n(7865)),s=i.__importDefault(n(8805)),u=i.__importDefault(n(4578));t.default=function(){var e;return i.__awaiter(this,void 0,void 0,(function*(){const t=window.semaphore||[],n=t.shift();if(!Array.isArray(n)||2!=n.length||"init"!=n[0])throw Error("ketch tag command queue is not configured correctly");const i=n[1];o.default.debug("init",i);const c=new r.default(i),a=yield c.build(),d=new s.default(a);for(;t.length>0;)d.push(t.shift());if(window.semaphore.push=d.push.bind(d),window.semaphore.loaded=!0,null===(e=null===window||void 0===window?void 0:window.localStorage)||void 0===e?void 0:e.getItem("overrideConsent")){const e=yield a.getConfig(),t=new u.default(a,e);yield t.enableAllConsent()}else yield a.getConsent()}))}},5887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}},4128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},7394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,...t){(window.semaphore=window.semaphore||[]).push([e,...t])}},9440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7040);t.default=(0,i.getLogger)("ketch",(0,i.getLogLevel)((0,i.getParams)(window.location.search,["ketch_","swb_"])))},737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=(0,n(7040).getParams)(window.location.search,["ketch_","swb_"]);t.default=i},2117:(e,t)=>{"use strict";var n,i,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.FormFieldVariant=t.FormFieldType=t.FormFieldCategory=t.FormFieldWidth=void 0,(r=t.FormFieldWidth||(t.FormFieldWidth={})).UNSPECIFIED="unspecified",r.HALF="half",r.FULL="full",(o=t.FormFieldCategory||(t.FormFieldCategory={})).UNSPECIFIED="unspecified",o.DEFAULT="default",o.CUSTOM="custom",(i=t.FormFieldType||(t.FormFieldType={})).UNSPECIFIED="unspecified",i.TEXT="text",i.DROPDOWN="dropdown",i.CHECKBOX="checkbox",(n=t.FormFieldVariant||(t.FormFieldVariant={})).UNSPECIFIED="unspecified",n.INPUT="input",n.TEXTAREA="textarea"},5752:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.FormFieldVariant=t.FormFieldType=t.FormFieldCategory=t.FormFieldWidth=t.PreviewMessageType=t.RightsFormMode=t.CanonicalRightCode=t.SubscriptionItemType=t.UnsubscribeAllImpact=t.PreferenceCenterPage=t.QuickLinkAction=t.BannerButtonAction=t.SwitchButtonDisplay=t.FormFieldStyle=t.UnsubscribeFromAllPosition=t.SubscriptionListStyle=t.ExitButtonPosition=t.ModalContainerPosition=t.BannerContainerPosition=t.BannerContainerSize=t.BannerContainerLayout=t.ListLayout=t.ItemStyle=t.ButtonVariant=t.SubscriptionStatus=t.SubscriptionExperienceItemType=t.StorageOriginPolicy=t.ExperienceActionKind=t.ModalPosition=t.BannerPosition=t.SubscriptionControlPositionType=t.SubscriptionControlImpactType=t.SwitchTextRenderLogic=t.IdentityEncoding=t.IdentityFormat=t.IdentityType=t.CookieCategory=t.CookieProvenance=t.CookieDuration=t.MigrationOption=t.ExperiencePrimaryButtonAction=t.ExperienceButtonDestination=t.ExperienceDefault=t.SetConsentReason=t.ExperienceClosedReason=t.ConsentExperienceType=t.ExperienceDisplayType=t.ExperienceType=t.isTab=t.Tab=void 0,function(e){e.Overview="overviewTab",e.Rights="rightsTab",e.Consents="consentsTab",e.Subscriptions="subscriptionsTab"}(i=t.Tab||(t.Tab={}));const o=Object.values(i).map((e=>e.toString()));var r,s,u,c,a,d,l,f,p,h,_,v,g,E,y,m,C,b,w,T,I,O,S,P,N,L,R,j,x,D,A,k,M,F,U,V,G,B,H,$,W,Y,z,J;t.isTab=function(e){return o.includes(e)},(J=t.ExperienceType||(t.ExperienceType={})).Consent="experiences.consent",J.Preference="experiences.preference",(z=t.ExperienceDisplayType||(t.ExperienceDisplayType={})).Banner="experiencedisplays.banner",z.Modal="experiencedisplays.modal",z.Preference="experiencedisplays.preference",(Y=t.ConsentExperienceType||(t.ConsentExperienceType={})).Banner="experiences.consent.banner",Y.Modal="experiences.consent.modal",Y.JIT="experiences.consent.jit",(W=t.ExperienceClosedReason||(t.ExperienceClosedReason={})).SET_CONSENT="setConsent",W.INVOKE_RIGHT="invokeRight",W.CLOSE="close",W.CLOSE_WITHOUT_SETTING_CONSENT="closeWithoutSettingConsent",W.WILL_NOT_SHOW="willNotShow",W.SET_SUBSCRIPTIONS="setSubscriptions",($=t.SetConsentReason||(t.SetConsentReason={})).USER_UPDATE="userUpdate",$.USER_EXPERIENCE_DISMISSAL="userExperienceDismissal",$.DEFAULT_STATE="defaultState",(H=t.ExperienceDefault||(t.ExperienceDefault={}))[H.BANNER=1]="BANNER",H[H.MODAL=2]="MODAL",(B=t.ExperienceButtonDestination||(t.ExperienceButtonDestination={}))[B.GOTO_MODAL=1]="GOTO_MODAL",B[B.GOTO_PREFERENCE=2]="GOTO_PREFERENCE",B[B.REJECT_ALL=3]="REJECT_ALL",(G=t.ExperiencePrimaryButtonAction||(t.ExperiencePrimaryButtonAction={}))[G.SAVE_CURRENT_STATE=1]="SAVE_CURRENT_STATE",G[G.ACCEPT_ALL=2]="ACCEPT_ALL",(V=t.MigrationOption||(t.MigrationOption={}))[V.MIGRATE_DEFAULT=0]="MIGRATE_DEFAULT",V[V.MIGRATE_NEVER=1]="MIGRATE_NEVER",V[V.MIGRATE_FROM_ALLOW=2]="MIGRATE_FROM_ALLOW",V[V.MIGRATE_FROM_DENY=3]="MIGRATE_FROM_DENY",V[V.MIGRATE_ALWAYS=4]="MIGRATE_ALWAYS",(U=t.CookieDuration||(t.CookieDuration={}))[U.SESSION=1]="SESSION",U[U.PERSISTENT=2]="PERSISTENT",(F=t.CookieProvenance||(t.CookieProvenance={}))[F.FIRST_PARTY=1]="FIRST_PARTY",F[F.THIRD_PARTY=2]="THIRD_PARTY",(M=t.CookieCategory||(t.CookieCategory={}))[M.STRICTLY_NECESSARY=1]="STRICTLY_NECESSARY",M[M.FUNCTIONAL=2]="FUNCTIONAL",M[M.PERFORMANCE=3]="PERFORMANCE",M[M.MARKETING=4]="MARKETING",(k=t.IdentityType||(t.IdentityType={})).IDENTITY_TYPE_UNDEFINED="",k.IDENTITY_TYPE_DATA_LAYER="dataLayer",k.IDENTITY_TYPE_WINDOW="window",k.IDENTITY_TYPE_COOKIE="cookie",k.IDENTITY_TYPE_MANAGED="managedCookie",k.IDENTITY_TYPE_LOCAL_STORAGE="localStorage",k.IDENTITY_TYPE_SESSION_STORAGE="sessionStorage",k.IDENTITY_TYPE_QUERY_STRING="queryString",(A=t.IdentityFormat||(t.IdentityFormat={})).IDENTITY_FORMAT_UNDEFINED="",A.IDENTITY_FORMAT_STRING="string",A.IDENTITY_FORMAT_JSON="json",A.IDENTITY_FORMAT_JWT="jwt",A.IDENTITY_FORMAT_QUERY="query",A.IDENTITY_FORMAT_SEMICOLON="semicolon",(D=t.IdentityEncoding||(t.IdentityEncoding={})).IDENTITY_ENCODING_UNDEFINED="",D.IDENTITY_ENCODING_NONE="none",D.IDENTITY_ENCODING_BASE64="base64",(x=t.SwitchTextRenderLogic||(t.SwitchTextRenderLogic={}))[x.SWITCH_TEXT_RENDER_ALL=1]="SWITCH_TEXT_RENDER_ALL",x[x.SWITCH_TEXT_RENDER_LEGAL_BASIS=2]="SWITCH_TEXT_RENDER_LEGAL_BASIS",x[x.SWITCH_TEXT_RENDER_CHANGE=3]="SWITCH_TEXT_RENDER_CHANGE",x[x.SWITCH_TEXT_RENDER_NEVER=4]="SWITCH_TEXT_RENDER_NEVER",(j=t.SubscriptionControlImpactType||(t.SubscriptionControlImpactType={}))[j.UNSPECIFIED=0]="UNSPECIFIED",j[j.GLOBAL=1]="GLOBAL",j[j.LOCAL=2]="LOCAL",(R=t.SubscriptionControlPositionType||(t.SubscriptionControlPositionType={}))[R.UNSPECIFIED=0]="UNSPECIFIED",R[R.TOP=1]="TOP",R[R.BOTTOM=2]="BOTTOM",(L=t.BannerPosition||(t.BannerPosition={}))[L.BOTTOM=1]="BOTTOM",L[L.TOP=2]="TOP",L[L.BOTTOM_LEFT=3]="BOTTOM_LEFT",L[L.BOTTOM_RIGHT=4]="BOTTOM_RIGHT",(N=t.ModalPosition||(t.ModalPosition={}))[N.CENTER=1]="CENTER",N[N.LEFT_FULL_HEIGHT=2]="LEFT_FULL_HEIGHT",N[N.RIGHT_FULL_HEIGHT=3]="RIGHT_FULL_HEIGHT",(P=t.ExperienceActionKind||(t.ExperienceActionKind={}))[P.ShowExperience=0]="ShowExperience",P[P.HideExperience=1]="HideExperience",P[P.SetConsent=2]="SetConsent",P[P.SetSubscription=3]="SetSubscription",P[P.InvokeRight=4]="InvokeRight",(S=t.StorageOriginPolicy||(t.StorageOriginPolicy={})).CrossOrigin="cross-origin",S.SameOrigin="same-origin,",(O=t.SubscriptionExperienceItemType||(t.SubscriptionExperienceItemType={}))[O.SUBSCRIPTION_EXPERIENCE_ITEM_TYPE_UNKNOWN=0]="SUBSCRIPTION_EXPERIENCE_ITEM_TYPE_UNKNOWN",O[O.SUBSCRIPTION_EXPERIENCE_ITEM_TYPE_TOPIC=1]="SUBSCRIPTION_EXPERIENCE_ITEM_TYPE_TOPIC",O[O.SUBSCRIPTION_EXPERIENCE_ITEM_TYPE_CONTROL=2]="SUBSCRIPTION_EXPERIENCE_ITEM_TYPE_CONTROL",(I=t.SubscriptionStatus||(t.SubscriptionStatus={})).Denied="denied",I.Granted="granted",(T=t.ButtonVariant||(t.ButtonVariant={})).Outlined="outlined",T.Contained="contained",(w=t.ItemStyle||(t.ItemStyle={})).Filled="filled",w.Outlined="outlined",(b=t.ListLayout||(t.ListLayout={})).Expandable="expandable",b.Cards="cards",(C=t.BannerContainerLayout||(t.BannerContainerLayout={})).Horizontal="horizontal",C.Vertical="vertical",C.Centered="centered",(m=t.BannerContainerSize||(t.BannerContainerSize={})).Standard="standard",m.Compact="compact",(y=t.BannerContainerPosition||(t.BannerContainerPosition={})).Bottom="bottom",y.Top="top",y.LeftCorner="leftCorner",y.RightCorner="rightCorner",y.BottomMiddle="bottomMiddle",y.Center="center",(E=t.ModalContainerPosition||(t.ModalContainerPosition={})).Center="center",E.Left="left",E.Right="right",(g=t.ExitButtonPosition||(t.ExitButtonPosition={})).topRight="topRight",g.bottomLeft="bottomLeft",(v=t.SubscriptionListStyle||(t.SubscriptionListStyle={})).Filled="filled",v.Underlined="underlined",(_=t.UnsubscribeFromAllPosition||(t.UnsubscribeFromAllPosition={})).Top="top",_.Bottom="bottom",(h=t.FormFieldStyle||(t.FormFieldStyle={})).Box="box",h.Underline="underline",(p=t.SwitchButtonDisplay||(t.SwitchButtonDisplay={})).Always="always",p.WhenLegalBasisDiffers="whenLegalBasisDiffers",(f=t.BannerButtonAction||(t.BannerButtonAction={})).SaveCurrentState="saveCurrentState",f.AcceptAll="acceptAll",f.OpenModal="openModal",f.OpenPreferences="openPreferences",f.RejectAll="rejectAll",f.OpenURL="openURL",(l=t.QuickLinkAction||(t.QuickLinkAction={})).OpenUrl="openUrl",l.OpenPage="openPage",(d=t.PreferenceCenterPage||(t.PreferenceCenterPage={})).Welcome="welcome",d.PrivacyPolicy="privacyPolicy",d.Purpose="purpose",d.Subscriptions="subscriptions",d.RequestsHome="requestsHome",d.RequestsForm="requestsForm",d.RequestsSubmitted="requestsSubmitted",(a=t.UnsubscribeAllImpact||(t.UnsubscribeAllImpact={})).Universal="universal",a.SingleExperience="singleExperience",(c=t.SubscriptionItemType||(t.SubscriptionItemType={})).Unknown="unknown",c.Topic="topic",c.Control="control",(u=t.CanonicalRightCode||(t.CanonicalRightCode={})).Get="get",u.Delete="delete",u.Restrict="restrict",u.Update="update",(s=t.RightsFormMode||(t.RightsFormMode={})).Single="single",s.Custom="custom",(r=t.PreviewMessageType||(t.PreviewMessageType={})).LoadConfig="loadConfig",r.ShowBanner="showBanner",r.ShowModal="showModal",r.ShowPreference="showPreferences",r.SwitchPreferencePage="switchPreferencePage";var X=n(2117);Object.defineProperty(t,"FormFieldWidth",{enumerable:!0,get:function(){return X.FormFieldWidth}}),Object.defineProperty(t,"FormFieldCategory",{enumerable:!0,get:function(){return X.FormFieldCategory}}),Object.defineProperty(t,"FormFieldType",{enumerable:!0,get:function(){return X.FormFieldType}}),Object.defineProperty(t,"FormFieldVariant",{enumerable:!0,get:function(){return X.FormFieldVariant}})},7582:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>D,__assign:()=>r,__asyncDelegator:()=>I,__asyncGenerator:()=>T,__asyncValues:()=>O,__await:()=>w,__awaiter:()=>h,__classPrivateFieldGet:()=>R,__classPrivateFieldIn:()=>x,__classPrivateFieldSet:()=>j,__createBinding:()=>v,__decorate:()=>u,__disposeResources:()=>k,__esDecorate:()=>a,__exportStar:()=>g,__extends:()=>o,__generator:()=>_,__importDefault:()=>L,__importStar:()=>N,__makeTemplateObject:()=>S,__metadata:()=>p,__param:()=>c,__propKey:()=>l,__read:()=>y,__rest:()=>s,__runInitializers:()=>d,__setFunctionName:()=>f,__spread:()=>m,__spreadArray:()=>b,__spreadArrays:()=>C,__values:()=>E,default:()=>M});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}function u(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,i){t(n,i,e)}}function a(e,t,n,i,o,r){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var u,c=i.kind,a="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?i.static?e:e.prototype:null,l=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),f=!1,p=n.length-1;p>=0;p--){var h={};for(var _ in i)h[_]="access"===_?{}:i[_];for(var _ in i.access)h.access[_]=i.access[_];h.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");r.push(s(e||null))};var v=(0,n[p])("accessor"===c?{get:l.get,set:l.set}:l[a],h);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(u=s(v.get))&&(l.get=u),(u=s(v.set))&&(l.set=u),(u=s(v.init))&&o.unshift(u)}else(u=s(v))&&("field"===c?o.unshift(u):l[a]=u)}d&&Object.defineProperty(d,i.name,l),f=!0}function d(e,t,n){for(var i=arguments.length>2,o=0;o<t.length;o++)n=i?t[o].call(e,n):t[o].call(e);return i?n:void 0}function l(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function u(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}c((i=i.apply(e,t||[])).next())}))}function _(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,u[0]&&(s=0)),s;)try{if(n=1,i&&(o=2&u[0]?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,i=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],i=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var v=Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function g(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||v(t,e,n)}function E(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function C(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,u=r.length;s<u;s++,o++)i[o]=r[s];return i}function b(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function T(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,t||[]),r=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(t){return new Promise((function(n,i){r.push([e,t,n,i])>1||u(e,t)}))})}function u(e,t){try{(n=o[e](t)).value instanceof w?Promise.resolve(n.value.v).then(c,a):d(r[0][2],n)}catch(e){d(r[0][3],e)}var n}function c(e){u("next",e)}function a(e){u("throw",e)}function d(e,t){e(t),r.shift(),r.length&&u(r[0][0],r[0][1])}}function I(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,o){t[i]=e[i]?function(t){return(n=!n)?{value:w(e[i](t)),done:!1}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=E(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,o,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&v(t,e,n);return P(t,e),t}function L(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function j(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n}function x(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function D(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var A="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function k(e){function t(t){e.error=e.hasError?new A(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var i=e.stack.pop();try{var o=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(o).then(n,(function(e){return t(e),n()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}const M={__extends:o,__assign:r,__rest:s,__decorate:u,__param:c,__metadata:p,__awaiter:h,__generator:_,__createBinding:v,__exportStar:g,__values:E,__read:y,__spread:m,__spreadArrays:C,__spreadArray:b,__await:w,__asyncGenerator:T,__asyncDelegator:I,__asyncValues:O,__makeTemplateObject:S,__importStar:N,__importDefault:L,__classPrivateFieldGet:R,__classPrivateFieldSet:j,__classPrivateFieldIn:x,__addDisposableResource:D,__disposeResources:k}},7808:e=>{"use strict";e.exports=JSON.parse('{"version":"2.15.50"}')}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=n(7582),t=n(4371),i=e.__importDefault(n(3857));window.semaphore=window.semaphore||[],window.semaphore.push(["registerPlugin",i.default]),(0,t.boot)()})()})();